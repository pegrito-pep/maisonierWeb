(function(e){function t(t){for(var s,i,l=t[0],r=t[1],c=t[2],d=0,u=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);m&&m(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},n={app:0},o=[];function l(e){return r.p+"js/"+({}[e]||e)+"."+{"chunk-074986f4":"ab3949a0","chunk-0957679f":"6746e4bb","chunk-0e170bd7":"6b9f657e","chunk-2c3a4fc5":"bddc8baa","chunk-2d0c2335":"d0748dd9","chunk-2d2371b2":"87a07c55","chunk-2d9fb030":"12c5f2d1","chunk-322798f1":"f102c2e7","chunk-37106f40":"807e314f","chunk-38b5821c":"278f7586","chunk-3ceffec6":"ba058177","chunk-42c0aafb":"2a05df89","chunk-47a0080d":"8d9f11f7","chunk-8cd10c58":"5ac7fc80","chunk-8cf7bf00":"1ff44891","chunk-dd5ac3ce":"e771052b"}[e]+".js"}function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a={"chunk-074986f4":1,"chunk-0957679f":1,"chunk-0e170bd7":1,"chunk-2c3a4fc5":1,"chunk-2d9fb030":1,"chunk-322798f1":1,"chunk-37106f40":1,"chunk-38b5821c":1,"chunk-3ceffec6":1,"chunk-42c0aafb":1,"chunk-47a0080d":1,"chunk-dd5ac3ce":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var s="css/"+({}[e]||e)+"."+{"chunk-074986f4":"9375d29e","chunk-0957679f":"f829aae0","chunk-0e170bd7":"6f4a5573","chunk-2c3a4fc5":"434789f2","chunk-2d0c2335":"31d6cfe0","chunk-2d2371b2":"31d6cfe0","chunk-2d9fb030":"94673525","chunk-322798f1":"d31405e7","chunk-37106f40":"0de6cbed","chunk-38b5821c":"bb3f0914","chunk-3ceffec6":"cd15b528","chunk-42c0aafb":"693d2e8f","chunk-47a0080d":"6a0626c3","chunk-8cd10c58":"31d6cfe0","chunk-8cf7bf00":"31d6cfe0","chunk-dd5ac3ce":"80b34a15"}[e]+".css",n=r.p+s,o=document.getElementsByTagName("link"),l=0;l<o.length;l++){var c=o[l],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===s||d===n))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){c=u[l],d=c.getAttribute("data-href");if(d===s||d===n)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var s=t&&t.target&&t.target.src||n,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete i[e],m.parentNode.removeChild(m),a(o)},m.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){i[e]=0})));var s=n[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=o);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,r.nc&&d.setAttribute("nonce",r.nc),d.src=l(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(m);var a=n[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",u.name="ChunkLoadError",u.type=s,u.request=i,a[1](u)}n[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=d;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"09ad":function(e,t,a){"use strict";a("4ff6")},"265a":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shadow list-item list-item-grid"},[a("div",{staticClass:"card d-flex flex-row mb-3"},[a("a",{staticClass:"d-flex card-img",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[e.logement.photos.length>0?a("b-carousel",{attrs:{interval:4e3,controls:"",indicators:"",background:"#ababab","img-width":"1024","img-height":"15em"}},e._l(e.logement.photos,(function(e,t){return a("b-carousel-slide",{key:e.idPhoto||t,staticClass:"responsive border-0",staticStyle:{height:"15em"},attrs:{"img-src":e.image||"/img/bgCity.jpg"}})})),1):a("img",{staticClass:"list-thumbnail responsive border-0",staticStyle:{height:"15em"},attrs:{src:"/img/imgLogementHomepage.jpg",alt:""}}),e.logement.etatLogement?a("span",{staticClass:"badge badge-pill badge-success position-absolute badge-top-left"},[e._v("Occupé")]):a("span",{staticClass:"badge badge-pill badge-danger position-absolute badge-top-left"},[e._v("Libre")])],1),a("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content"},[a("div",{staticClass:"card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center"},[a("div",{staticClass:"text-center"},[a("h4",{staticClass:"text-red mt-0 truncate"},[e._v(e._s(e.logement.refLogement))])]),a("hr"),a("div",{staticClass:"text-muted w-100 my-1"},[e._m(0),a("span",[e._v(e._s(e.logement.sousTypeLogement.libelleSousType))])]),a("div",{staticClass:"text-muted w-100 my-1"},[e._m(1),a("span",[e._v(e._s(e.logement.adresse.ville+" "+e.logement.adresse.pays)+" ")])]),a("div",{staticClass:"text-muted w-100 my-1"},[e._m(2),a("span",[e._v(e._s(e.logement.prixMin+" F - "+e.logement.prixMax+" F")+" ")])]),e.isSub?a("p",{staticClass:"text-muted mt-3 mb-1 date w-15 w-xs-100 text-small"},[e._v(e._s(e.$date(e.logement.createdAt).format("DD.MM.YYYY")))]):a("p",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:e.dateCreation,expression:"dateCreation",modifiers:{bottom:!0}}],staticClass:"mt-3 mb-1 text-muted text-small date w-15 w-xs-100"},[e._v(e._s(e.$date(e.logement.createdAt).format("DD.MM.YYYY")))])]),a("div",{staticClass:"list-actions"},[e.isSub?e._e():a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Détails",expression:"'Détails'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-eye"})]),e.isSub?e._e():a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Cloner",expression:"'Cloner'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("makeClone",e.logement)}}},[a("i",{staticClass:"ik ik-copy"})]),e.isSub?a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Accéder aux détails",expression:"'Accéder aux détails'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.accessTo.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-link"})]):e._e(),e.isSub?e._e():a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Editer",expression:"'Editer'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("makeUpdate",e.logement)}}},[a("i",{staticClass:"ik ik-edit-2"})]),a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Supprimer",expression:"'Supprimer'",modifiers:{bottom:!0}}],staticClass:"list-delete",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.remove.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-trash-2"})])])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fa fa-star"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fa fa-map-marker-alt"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fa fa-dollar-sign"})])}],n={props:{logement:{type:Object,required:!0},isSub:{type:Boolean,default:!1}},computed:{dateCreation(){const e=this.$date(this.logement.createdAt);return`Crée le ${e.format("dddd, DD MMMM YYYY")} à ${e.format("HH:mm")}`}},methods:{showDetails(){if(this.isSub)return!1;this.$emit("showDetails",this.logement)},accessTo(){$("#editLayoutItem").modal("hide"),this.$router.push({name:"logements",query:{target:this.logement.idLogement}})},remove(){App.confirm(`Voullez vous vraiment supprimer le logement " <b>${this.logement.refLogement}</b> " ?`,{confirm:()=>{axios.delete("logements/"+this.logement.idLogement).then(e=>e.success?(this.$emit("deleted",this.logement.idLogement),App.notifySuccess(e.message)):App.notifyError(e.message))}})}}},o=n,l=a("2877"),r=Object(l["a"])(o,s,i,!1,null,null,null);t["a"]=r.exports},"2c43":function(e,t,a){"use strict";t["a"]={success:function(e,t){this.make(e,{type:"success",bgcolor:"#5bd747"},t)},error:function(e,t){this.make(e,{type:"error"},t)},make:function(e,t,a){notif(Object.assign({},{type:"info",msg:e,timeout:3e3,callback:a},t))}}},"47bb":function(e,t,a){"use strict";a("bae3")},"4ff6":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),i=a("81eb"),n=a.n(i);const o=n.a.init("le-maisonier","localstorage");s["default"].use({install:(e,t)=>{e.storage=o,window.storage=o,Object.defineProperties(e.prototype,{storage:{get:()=>o},$storage:{get:()=>o}})}});var l=a("5f5b");a("2dd8");s["default"].use(l["a"]);var r=a("bc3a"),c=a.n(r);const d="production";let u="https://fse-le-maisonier.herokuapp.com/api";"production"===d&&(u="https://fse-le-maisonier.herokuapp.com/api");let m={baseURL:u};const p={all:e=>c.a.all(e),spread:e=>c.a.spread(e)},h=c.a.create(m);h.interceptors.request.use((function(e){const t=storage.get("access_token");return""!=t&&null!=t&&(e.headers["Authorization"]="Bearer "+t),e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){return e.data}),(function(e){let t=e.response||null;if(null==t)return Promise.reject(e);let a=t.data||null;return null==a?Promise.reject(t):(498==a.code&&(storage.clear(),window.location.href="/login"),Promise.reject(a))})),s["default"].use({install:function(e,t){e.axios=h,window.axios=h,e.api=p,window.api=p,Object.defineProperties(e.prototype,{axios:{get(){return h}},$axios:{get(){return h}},api:{get:()=>p}})}});var g=a("5a0c"),b=a.n(g),f=a("4208"),v=a.n(f),C=a("f906"),y=a.n(C);a("e5b7"),b.a.locale("fr"),b.a.extend(y.a),b.a.extend(v.a),s["default"].use({install:(e,t)=>{e.dayjs=b.a,window.dayjs=b.a,Object.defineProperties(e.prototype,{$dayjs:{get:()=>b.a},$date:{get:()=>b.a}})}}),s["default"].use({install:(e,t)=>{Object.defineProperties(e.prototype,{$getBase64:{get:()=>function(e,t){return"undefined"!=typeof e&&"string"!=typeof e&&e?!1===t?null:new Promise((t,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}):e}}})}});var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.layout,{tag:"component"},[a("vue-page-transition",{attrs:{name:"fade-in-right"}},[a("router-view")],1)],1)},k=[],x=a("f0eb");const w="default";s["default"].use(x["default"]);var S={name:"App",computed:{layout(){return(this.$route.meta.layout||w)+"-layout"}},mounted(){initTemplateScript(window,document,jQuery)},updated(){}},L=S,M=a("2877"),q=Object(M["a"])(L,_,k,!1,null,null,null),T=q.exports,A=a("9483");Object(A["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var P=a("8c4f"),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-description",{attrs:{title:"Accueil",description:"bienvenu sur le maisonier",icon:"home",path:[]}}),a("link",{attrs:{rel:"stylesheet",href:""}}),a("div",{staticClass:"top-banner"},[a("div",{staticClass:"img"},[a("div",{staticClass:"bg"}),a("div",{staticClass:"txt"},[a("h1",[e._v("Bienvenu sur la plateforme maisonnier")]),e._m(0),a("button",{on:{click:function(t){return t.preventDefault(),e.gotToProfile.apply(null,arguments)}}},[e._v("Terminer votre profil")])])]),e._m(1)]),a("div",{staticClass:"action-container"},[a("span",[e._v("Actions rapides")]),a("div",[a("div",{staticClass:"action-item"},[e._m(2),a("div",{staticClass:"txt"},[a("h2",[e._v("Créer une cité")]),a("p",[e._v("Une cité est un ensemble de plusieurs batiments regroupés dans une zone")]),a("button",{on:{click:function(t){return t.preventDefault(),e.createCite.apply(null,arguments)}}},[e._v("Créer")])])]),a("div",{staticClass:"action-item"},[e._m(3),a("div",{staticClass:"txt"},[a("h2",[e._v("Créer un batiment")]),a("p",[e._v("Un batiment est un édifice doté de plusieurs residences (appartements, studios etc)")]),a("button",{on:{click:function(t){return t.preventDefault(),e.createBatiment.apply(null,arguments)}}},[e._v("Créer")])])]),a("div",{staticClass:"action-item"},[e._m(4),a("div",{staticClass:"txt"},[a("h2",[e._v("Créer un logement")]),a("p",[e._v("Un logement est une residence destiné a hébergé un habitant (ex appartement, maison, studio)")]),a("button",{on:{click:function(t){return t.preventDefault(),e.createLogement.apply(null,arguments)}}},[e._v("Créer")])])]),a("div",{staticClass:"action-item"},[e._m(5),a("div",{staticClass:"txt"},[a("h2",[e._v("Créer un habitant")]),a("p",[e._v("Un habitant est tout simplement une personne (votre locataire) qui occupe votre logement")]),a("button",{on:{click:function(t){return t.preventDefault(),e.createHabitant.apply(null,arguments)}}},[e._v("Créer")])])])])])],1)},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Ici vous pourrez créer des: cités, batiments, logements et habitants. Mais avant, veuillez completer votre profil "),a("br"),e._v(" Profil complet à "),a("b",[e._v("15%")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"summary"},[a("div",{staticClass:"stat"},[a("div",{staticClass:"stat-item"},[a("i",{staticClass:"fa fa-building"}),a("div",[a("h3",[e._v("Batiments")]),a("span",[e._v("Pas de batiment pour le moment")])])]),a("div",{staticClass:"stat-item"},[a("i",{staticClass:"fas fa-home"}),a("div",[a("h3",[e._v("Logements")]),a("span",[e._v("Pas de logements pour le moment")])])]),a("div",{staticClass:"stat-item"},[a("i",{staticClass:"fas fa-users"}),a("div",[a("h3",[e._v("Habitants")]),a("span",[e._v("Pas d'habitant pour le moment")])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:"/img/cite.jpg",alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:"/img/batiment (2).jpg",alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:"/img/appart-sejour.jpg",alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:"/img/loc.jpg",alt:""}})])}],E=a("4971"),O=a.n(E),N=(a("24df"),{name:"Home",components:{VueSlider:O.a},data:()=>({pourcentage:15,disabled:!0}),mounted(){setTimeout(()=>{$("button.nav-toggle").click()},100)},methods:{createCite(){this.$router.push({name:"cites",query:{target:"call-cite"}})},createBatiment(){this.$router.push({name:"batiments",query:{target:"call-batiment"}})},createLogement(){this.$router.push({name:"logements",query:{target:"call-logement"}})},createHabitant(){this.$router.push({name:"habitants",query:{target:"call-habitant"}})},gotToProfile(){this.$router.push({name:"profil",query:{target:"call-profile"}})}}}),j=N,z=(a("09ad"),Object(M["a"])(j,D,B,!1,null,"380af561",null)),F=z.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("page-description",{attrs:{title:"Logements",description:"Gestion de vos logements",icon:"home",path:["Patrimoine immobilier","Mes Logements"]}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"mb-2 clearfix"},[a("div",{staticClass:"collapse d-md-block display-options",attrs:{id:"displayOptions"}},[a("div",{staticClass:"d-block d-md-inline-block"},[a("div",{staticClass:"btn-group float-md-left mr-1 mb-1"},[a("b-form-select",{staticStyle:{"box-shadow":"none"},attrs:{size:"sm"},model:{value:e.filtre_categories,callback:function(t){e.filtre_categories=t},expression:"filtre_categories"}},[a("b-form-select-option",{attrs:{value:null}},[e._v("Filtre de catégories")]),e._l(e.typesLogements,(function(t,s){return a("b-form-select-option-group",{key:s,attrs:{label:t.libelleType}},e._l(t.sousTypesLogement,(function(t,s){return a("b-form-select-option",{key:s,attrs:{value:t.idSousType}},[e._v(e._s(t.libelleSousType))])})),1)}))],2)],1),a("div",{staticClass:"search-sm d-inline-block float-md-left mr-1 mb-1 align-top"},[a("form",{attrs:{action:"",onsubmit:"return false"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recherche..."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._m(0)])])]),a("div",{staticClass:"float-md-right"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.logementForm",modifiers:{logementForm:!0}}],attrs:{variant:"danger"}},[a("i",{staticClass:"fa fa-plus-circle"}),e._v(" Nouveau Logement ")]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Télécharger un fichier modèle pour l'import de logements en masse",expression:"'Télécharger un fichier modèle pour l\\'import de logements en masse'",modifiers:{top:!0}},{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"btn btn-info ml-4 dispose",on:{click:function(t){return t.preventDefault(),e.loadCsv.apply(null,arguments)}}},[a("i",{staticClass:"fa fa-download"})]),a("flatfile-button",{staticClass:"mt-2",attrs:{licenseKey:e.licenseKey,customer:e.customer,settings:e.settings,onData:e.onData,type:"logement"}},[e._v("Ajout de logements en masse")])],1)])]),a("div",{staticClass:"separator mb-20"}),a("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[e.logements.length?a("b-row",{staticClass:"layout-wrap"},e._l(e.items,(function(t,s){return a("b-col",{key:t.idLogement||s,staticClass:"animated flipInX mb-4",attrs:{lg:"4",cols:"12",sm:"6"}},[a("logement",{attrs:{logement:t},on:{makeClone:e.cloneLogement,makeUpdate:e.updateLogement,deleted:e.removeLogement,showDetails:e.showDetails}})],1)})),1):a("b-alert",{staticClass:"text-center",attrs:{variant:"info",show:""}},[a("i",{staticClass:"fa fa-exclamation-triangle fa-3x"}),a("br"),a("span",{staticClass:"h4 d-inline-flex ml-2"},[e._v("Aucun enregistré pour le moment")])]),a("paginator",{attrs:{hr:"top",offset:e.offset,total:e.logements.length||0,limit:e.perPage,page:e.currentPage},on:{pageChanged:function(t){e.currentPage=t},limitChanged:function(t){e.perPage=t}}})],1)],1)]),e.logement?a("div",{staticClass:"modal fade edit-layout-modal",attrs:{id:"editLayoutItem",tabindex:"-1",role:"dialog","aria-labelledby":"editLayoutItemLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"editLayoutItemLabel"}},[e._v(" Détails du logement : "),a("b",[e._v(e._s(e.logement.refLogement))]),e._v(". ")]),e._m(1)]),a("div",{staticClass:"modal-body pt-2"},[a("details-logement",{attrs:{logement:e.logement}})],1)])])]):e._e(),e.logement?a("div",[a("b-modal",{attrs:{title:"Clonner le logement "+e.logement.refLogement},on:{ok:e.validateClone,hidden:e.resetCloneForm},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var s=t.ok;return[a("b-button",{attrs:{size:"sm",variant:"danger",disabled:e.clone.submitted},on:{click:function(e){return s()}}},[e._v(" Valider "),e.clone.submitted?a("b-spinner",{attrs:{small:""}}):e._e()],1)]}}],null,!1,2706565153),model:{value:e.clone.enabled,callback:function(t){e.$set(e.clone,"enabled",t)},expression:"clone.enabled"}},[a("div",{staticClass:"jumbotron pt-10 pb-10"},[a("p",[e._v("Le clonnage de logement vous permet d'ajouter une multitude de logement en se servant d'un logement pré-existant pour générer de nouveaux.")])]),a("b-form-group",{attrs:{description:"Entrez le nombre de logement à générer",label:"Nombre de clone"}},[a("b-form-input",{class:{"is-invalid":e.clone.error},attrs:{type:"number",min:1},model:{value:e.clone.nbr,callback:function(t){e.$set(e.clone,"nbr",t)},expression:"clone.nbr"}})],1),a("b-form-group",{attrs:{description:"Selectionnez le batiment auquel sera rataché les logements générés",label:"Batiment"}},[a("b-form-select",{model:{value:e.clone.idBatiment,callback:function(t){e.$set(e.clone,"idBatiment",t)},expression:"clone.idBatiment"}},[a("b-form-select-option",{attrs:{value:null}},[e._v("Pas de batiment")]),e._l(e.cites,(function(t,s){return a("b-form-select-option-group",{key:s,attrs:{label:t.nomCite}},e._l(t.batiments,(function(t,s){return a("b-form-select-option",{key:s,attrs:{value:t.idBatiment}},[e._v(e._s(t.nomBatiment))])})),1)}))],2)],1)],1)],1):e._e(),a("b-modal",{ref:"logement-form",attrs:{id:"logementForm",size:"lg",title:e.title,"ok-title":"Fermer","ok-only":"","ok-variant":"secondary","no-close-on-backdrop":"","hide-header-close":""}},[a("div",[a("add-logement",{attrs:{editLogement:e.logement,action:e.action},on:{logementAdded:e.addedLogement,editSuccessfull:e.editSuccessfull,closeLogementModal:e.resetLogementFormProps}})],1)]),e.commandeLoadCsv?a("load-csv"):e._e()],1)},G=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-icon",attrs:{type:"submit"}},[a("i",{staticClass:"ik ik-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],R=a("c0a6"),U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"load-csv-modal",attrs:{id:"modal-prevent-closing",title:"Configurer votre fichier Modèle"},on:{show:e.resetModal,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("download-excel",{staticClass:"btn btn-default",attrs:{data:e.dataForExcel,type:"csv",name:"fichiermodel.xls","before-finish":e.finishDownload}},[a("b-button",{staticClass:"btn btn-info ml-4"},[a("i",{staticClass:"fa fa-download"}),e._v("Télécharger")])],1)]},proxy:!0}])},[a("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[a("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",[e._v("Batiment associé")]),a("b-form-select",{staticClass:"mb-3",attrs:{options:e.tousLesBatiments,"value-field":"idBatiment","text-field":"nomBatiment","disabled-field":"notEnabled"},model:{value:e.idBatiment,callback:function(t){e.idBatiment=t},expression:"idBatiment"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v("Catégorie associée ")]),a("b-form-select",{staticClass:"mb-3",class:e.requiredSousType?"":"is-red",attrs:{options:e.sousTypesLogements||[],"value-field":"idSousType","text-field":"libelleSousType"},model:{value:e.idSousType,callback:function(t){e.idSousType=t},expression:"idSousType"}}),e.requiredSousType?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Vous devez choisir au moins un sous-type")])],1)])])],1)},V=[],H=a("f2d9");s["default"].component("downloadExcel",H["a"]);var Y={name:"load-csv_model",data:()=>({tousLesBatiments:[],idBatiment:"",sousTypesLogements:[],idSousType:"",requiredSousType:!0,showOverlay:!0}),computed:{dataForExcel(){return[{ref:"",description:"",prixMin:"",prixMax:"",SousTypeLogement:this.idSousType,batiment:this.idBatiment,pays:"",ville:"",quartier:"",lat:"",lon:"",nombreChambres:"",nombreCuisines:"",nombreDouches:"",nombreSalons:"",nombreParkings:""}]}},async beforeMount(){await this.getLogementsData()},methods:{async getLogementsData(){try{this.tousLesBatiments=await axios.get("batiments").then(e=>e.result)}catch(e){console.log(e)}try{this.sousTypesLogements=await axios.get("soustypes-logements").then(e=>e.result)}catch(e){console.log(e)}this.showOverlay=!1},resetModal(){this.idBatiment=""},finishDownload(){this.$refs["load-csv-modal"].hide()}}},K=Y,J=Object(M["a"])(K,U,V,!1,null,null,null),Q=J.exports,W=a("265a"),Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"caracteristiques"==e.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(t){t.preventDefault(),e.section="caracteristiques"}}},[e._v("Caractéristiques")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"localisation"==e.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(t){t.preventDefault(),e.section="localisation"}}},[e._v("Localisation")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"photos"==e.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(t){t.preventDefault(),e.section="photos"}}},[e._v("Photos")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"annonces"==e.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(t){t.preventDefault(),e.section="annonces"}}},[e._v("Annonces")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"depenses"==e.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(t){t.preventDefault(),e.section="depenses"}}},[e._v("Dépenses liées au logement")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"add-depense"==e.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(t){t.preventDefault(),e.section="add-depense"}}},[e._v("Attribuer une dépense à ce logement")])])]),a("div",{staticClass:"tab-content mt-3"},[a("div",{staticClass:"tab-pane fade show active"},["photos"==e.section?a("b-container",{staticStyle:{height:"75vh","overflow-y":"auto","overflow-x":"hidden"},attrs:{fluid:""}},[a("b-row",{staticClass:"layout-wrap"},[a("b-col",{attrs:{cols:"4"}},[a("vue-upload-multiple-image",{attrs:{"data-images":e.section_photo.images},on:{"upload-success":e.section_photo_uploadImageSuccess}})],1),e._l(e.photos,(function(t,s){return a("b-col",{key:s,attrs:{cols:"4"}},[a("div",{staticClass:"shadow list-item list-item-grid"},[a("div",{staticClass:"card d-flex flex-row mb-3"},[a("a",{staticClass:"d-flex card-img",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.section_photo_showImg(s)}.apply(null,arguments)}}},[a("img",{staticClass:"list-thumbnail responsive border-0",staticStyle:{height:"15em"},attrs:{src:t,alt:""}})]),a("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content"},[a("div",{staticClass:"list-actions"},[a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.section_photo_showImg(s)}.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-eye"})]),a("a",{staticClass:"list-delete",attrs:{href:"#"}},[a("i",{staticClass:"ik ik-trash-2"})])])])])])])}))],2),a("vue-easy-lightbox",{attrs:{visible:e.section_photo.visible,imgs:e.photos,index:e.section_photo.index},on:{hide:e.section_photo_handleHide}})],1):e._e(),"localisation"==e.section?a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Pays: "),a("b",[e._v(e._s(e.logement.adresse.pays))])]),a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Ville: "),a("b",[e._v(e._s(e.logement.adresse.ville))])]),a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Quartier: "),a("b",[e._v(e._s(e.logement.adresse.quartier))])])]),a("b-col",{attrs:{cols:"6"}},[a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Logitude: "),a("b",[e._v(e._s(e.logement.adresse.lon))])]),a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Latitue: "),a("b",[e._v(e._s(e.logement.adresse.lat))])])])],1),a("b-container",{staticClass:"mt-4 p-0"},[a("GmapMap",{staticClass:"w-100",staticStyle:{height:"340px"},attrs:{center:{lat:parseFloat(e.logement.adresse.lat),lng:parseFloat(e.logement.adresse.lon)},zoom:14}})],1)],1):e._e(),"caracteristiques"==e.section?a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{cols:"7"}},[a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Type de logement: "),a("b",[e._v(e._s(e.logement.sousTypeLogement.libelleSousType))])]),a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Etat: "),e.logement.etatLogement?a("b-badge",{attrs:{variant:"success"}},[e._v("Occupé")]):a("b-badge",{attrs:{variant:"danger"}},[e._v("Libre")])],1)]),a("b-col",{attrs:{cols:"5"}},[a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Prix minimal: "),a("b",[e._v(e._s(e.logement.prixMin+" F"))])]),a("span",{staticClass:"d-inline-block w-100 my-1"},[e._v(" Prix maximal: "),a("b",[e._v(e._s(e.logement.prixMax+" F"))])])])],1),a("div",{staticClass:"jumbotron pt-10 pb-10 mt-2 mb-0"},[a("p",[e._v(e._s(e.logement.descLogement))])]),a("hr"),a("div",e._l(e.caracteristiques,(function(t,s){return a("b-badge",{key:t.idCaracteristique||s,staticClass:"m-1",attrs:{variant:"secondary"}},[a("b",{staticClass:"fa-lg"},[e._v(e._s(t.valeur))]),e._v(" "+e._s(t.libelleCaracteristique)+" ")])})),1)],1):e._e(),"annonces"==e.section?a("div",{staticStyle:{height:"75vh","overflow-y":"auto","overflow-x":"hidden"}},[a("b-row",e._l(e.logement.annonces,(function(t,s){return a("b-col",{key:t.idAnnonce||s,attrs:{cols:"12"}},[a("div",{staticClass:"card p-0 shadow"},[a("div",{staticClass:"card-body p-0 d-flex"},[a("b-img",{staticStyle:{height:"8em",width:"8em"},attrs:{src:e.photos[s]||e.photos[0]}}),a("div",{staticClass:"ml-2 p-2"},[a("div",[a("b-badge",{attrs:{variant:t.publish?"success":"danger"}},[e._v(e._s(t.publish?"Déja publiée":"Pas encore publiée"))]),e._v("  "),a("b-badge",{attrs:{variant:"light"}},[a("i",{staticClass:"fa fa-clock"}),e._v(" Créée le "+e._s(e.$date(t.createdAt).format("DD.MM.YYYY"))+" ")])],1),a("h5",{staticClass:"my-2"},[a("a",{staticClass:"text-red",attrs:{href:"#"}},[e._v(e._s(t.titreAnnonce))])]),e._l(t.tags.split(","),(function(t,s){return a("b-badge",{key:s,attrs:{variant:"secondary"}},[e._v(e._s(t))])}))],2)],1)])])})),1)],1):e._e(),"depenses"==e.section?a("div",[e.logement.depenses.length?e._e():a("b-alert",{attrs:{variant:"info",show:""}},[a("i",{staticClass:"fa fa-exclamation-triangle fa-3x float-left"}),a("span",{staticClass:"h4 d-inline-flex ml-2"},[e._v("Aucune dépense enregistrée pour le moment")])]),e.logement.depenses.length>0?a("div",{staticStyle:{height:"75vh"}},[a("b-row",[a("paginator",{attrs:{"no-control":"",hr:"bottom",total:e.logement.depenses.length,limit:e.perPage,page:e.currentPage},on:{pageChanged:function(t){e.currentPage=t},limitChanged:function(t){e.perPage=t}}})],1),a("div",{staticStyle:{height:"90%","overflow-y":"auto","overflow-x":"hidden"}},[a("b-row",{staticClass:"layout-wrap"},e._l(e.itemsDepenses,(function(t,s){return a("b-col",{key:t.idDepense||s,attrs:{cols:"6"}},[a("depense",{attrs:{depense:t,source:e.source,"is-sub":""},on:{deleted:e.removeDepense}})],1)})),1)],1)],1):e._e()],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"add-depense"==e.section,expression:"section == 'add-depense'"}]},[a("depense-form",{attrs:{logement:e.logement,provenance:e.provenance},on:{depenseAdded:e.addedDepense}})],1)],1)])])},X=[],ee=a("825a"),te=a("fc5c"),ae=a("5ad6"),se=a("a474");const ie=a("5a6f");var ne={components:{VueEasyLightbox:ee["a"],VueUploadMultipleImage:te["a"],Depense:ae["a"],DepenseForm:se["a"]},props:{logement:{type:Object,required:!0}},data:()=>({section:"caracteristiques",section_photo:{index:0,visible:!1,images:[]},commandeDepense:!1,action:"",currentPage:1,perPage:10,source:2,provenance:"2"}),computed:{photos(){return this.logement.photos.map(e=>e.image)},caracteristiques(){return this.logement.caracteristiques.filter(e=>parseInt(e.valeur)>0)},itemsDepenses(){return ie.array_slice(this.logement.depenses,this.offset,this.perPage)},offset(){return this.currentPage*this.perPage-this.perPage}},mounted(){console.log(this.logement)},methods:{addedDepense(){axios.get(`logements/${this.logement.idLogement}/depenses`).then(e=>e.result||[]).then(e=>{this.logement.depenses=e,this.section="depenses"})},section_photo_showImg(e){this.section_photo.index=e,this.section_photo.visible=!0},section_photo_handleHide(){this.section_photo.visible=!1},section_photo_uploadImageSuccess(e,t,a){console.log("data",e,t,a)},removeDepense(e){this.logement.depenses=this.logement.depenses.filter(t=>t.idDepense!=e),this.$emit("depensesChanged",this.logement.depenses)},defineDepense(){console.log("enter",this.logement),this.action="add",this.commandeDepense=!0},onCloseSet(){this.commandeDepense=!1}}},oe=ne,le=Object(M["a"])(oe,Z,X,!1,null,null,null),re=le.exports,ce=a("e4c3");const de=a("5a6f");var ue={name:"listlogements",components:{AddLogement:R["a"],Logement:W["a"],DetailsLogement:re,FlatfileButton:ce["FlatfileButton"],LoadCsv:Q},data:()=>({licenseKey:"6e79e3c9-a02b-44ba-b761-9f18a885e464",settings:{disableManualInput:!0,type:"logement",title:"Ajout de logements en masse",displayEncoding:!1,fields:[{label:"reférence",key:"ref",validators:[{validate:"required"}]},{label:"description",key:"description"},{label:"Prix Minimal",key:"prixMin",validators:[{validate:"required"}]},{label:"Prix Maximal",key:"prixMax",validators:[{validate:"required"}]},{label:"Nom Sous-type de logement",key:"sousTypeLogement",validators:[{validate:"required"}]},{label:"Nom Batiment",key:"batiment"},{label:"Pays",key:"pays",validators:[{validate:"required"}]},{label:"Ville",key:"ville",validators:[{validate:"required"}]},{label:"Quartier",key:"quartier"},{label:"Latitude",key:"lat"},{label:"Longitude",key:"lon"},{label:"Nombre de chambres",key:"nombreChambres"},{label:"Nombre de cuisines",key:"nombreCuisines"},{label:"Nombre de douches",key:"nombreDouches"},{label:"Nombre de salons",key:"nombreSalons"},{label:"Nombre de parkings",key:"nombreParkings"}]},customer:{userId:"12345"},overrides:{manual:"Did you know you can type in an import below?",dropzone:{button:"Click me to upload some data."}},commandeLoadCsv:!1,search:null,showOverlay:!0,currentPage:1,perPage:10,logements:[],trueLogements:[],logement:null,typesLogements:[],filtre_categories:null,title:"Ajouter un logement",action:"add",cites:[],clone:{enabled:!1,submitted:!1,error:!1,nbr:null,idBatiment:null},housingToUpload:[]}),computed:{items(){return de.array_slice(this.logements,this.offset,this.perPage)},offset(){return this.currentPage*this.perPage-this.perPage}},watch:{filtre_categories(e){this.logements=de.empty(e)?this.trueLogements:this.trueLogements.filter(t=>t.idSousType==e)},search(e){this.logements=de.empty(e)?this.trueLogements:this.trueLogements.filter(t=>t.nomLogement.toLowerCase().includes(e.toLowerCase()))}},beforeMount(){setTimeout(()=>{this.getHousing()},5e3)},mounted(){},methods:{resetLogementFormProps(){this.action="add",this.title="Ajouter un logement",this.$bvModal.hide("logementForm"),this.logement=null},addedLogement(){this.getHousing(!1),this.$bvModal.hide("logementForm"),this.autoAddTarget()},editSuccessfull(e){console.log(" 11 result",e),this.action="add",this.title="Ajouter un logement",this.$bvModal.hide("logementForm"),this.logement=null,this.getHousing(!1)},async getHousing(e){this.showOverlay=!0,this.logements=this.trueLogements=await axios.get("logements").then(e=>e.result||[]),this.showOverlay=!1,!1!==e&&(this.typesLogements=await axios.get("types-logements?all=true").then(e=>e.result||[]),this.cites=(await axios.get("cites").then(e=>e.result||[])).filter(e=>e.batiments.length>0)),this.autoAddTarget(),this.autoDetailsTarget()},autoAddTarget(){const e=this.$route.query.target||null;e&&(this.$refs["logement-form"].show(),window.history.replaceState({},"",window.location.href.split("?")[0]))},autoDetailsTarget(){const e=this.$route.query.target||null;if(e){const t=this.trueLogements.filter(t=>t.idLogement==e)[0];t&&(this.showDetails(t),window.history.replaceState({},"",window.location.href.split("?")[0]))}},cloneLogement(e){this.clone.enabled=!0,this.clone.idBatiment=e.idBatiment,this.logement=e},validateClone(e){e.preventDefault(),this.clone.error=!1,de.empty(this.clone.nbr)||this.clone.nbr<1?this.clone.error=!0:(this.clone.submitted=!0,axios.post(`logements/${this.logement.idLogement}/clone`,this.clone).then(e=>(this.getHousing(!1),this.resetCloneForm(),App.notifySuccess(e.message))).catch(e=>(this.clone.submitted=!1,App.alertError(e.message))))},resetCloneForm(){this.clone={enabled:!1,submitted:!1,error:!1,nbr:null,idBatiment:null}},loadCsv(){this.commandeLoadCsv=!0},updateLogement(e){this.action="edit",console.log("logement",e),this.logement=e,this.title="édition du logement "+this.logement.refLogement,this.$refs["logement-form"].show()},removeLogement(e){console.log("logement",e)},showDetails(e){this.logement=e,setTimeout(()=>{$("#editLayoutItem").modal("show"),$("#editLayoutItem").on("hide.bs.modal",e=>{this.logement=null}),$("#editLayoutItem").on("hidden.bs.modal",e=>{this.logement=null})},100)},onData(e){let t=!1;for(let a=0;a<e.$data.length;a++){let t={pays:e.$data[a].data.pays,ville:e.$data[a].data.ville,quartier:e.$data[a].data.quartier,lon:e.$data[a].data.lon,lat:e.$data[a].data.lat},s={nom:e.$data[a].data.nom,ref:e.$data[a].data.ref,description:e.$data[a].data.description,prixMin:e.$data[a].data.prixMin,prixMax:e.$data[a].data.prixMax,idSousType:e.$data[a].data.sousTypeLogement,idBatiment:e.$data[a].data.batiment,adresse:t,caracteristiques:[{libelle:"chambre",valeur:e.$data[a].data.nombreChambres},{libelle:"salon",valeur:e.$data[a].data.nombreChambres},{libelle:"cuisine",valeur:e.$data[a].data.nombreChambres},{libelle:"douche",valeur:null!=e.$data[a].data.nombreDouches?e.$data[a].data.nombreDouches:0},{libelle:"parkings",valeur:null!=e.$data[a].data.nombreParkings?e.$data[a].data.nombreParkings:0}]};console.log("logement final",s),this.housingToUpload.push(s)}return new Promise((e,a)=>{let s;for(let n=0;n<this.housingToUpload.length;n++){try{s=axios.post("logements",this.housingToUpload[n]).then(e=>e.result),n==this.housingToUpload.length-1&&this.getHousing(!1)}catch(i){console.log(i)}s||(t=!0)}setTimeout(()=>{t?(a("erreur produite"),t=!1):e("import reussi")},300)})}}},me=ue,pe=(a("91e1"),Object(M["a"])(me,I,G,!1,null,"1afb4fbf",null)),he=pe.exports;s["default"].use(P["a"]);const ge=[{path:"/home",name:"home",component:F},{path:"/",redirect:{name:"home"}},{path:"/housing",name:"logements",component:he},{path:"/profil",name:"profil",component:()=>a.e("chunk-2c3a4fc5").then(a.bind(null,"7c54"))},{path:"/login",name:"login",meta:{layout:"empty",noAuth:!0},component:()=>a.e("chunk-37106f40").then(a.bind(null,"5326"))},{path:"/register",name:"register",meta:{layout:"empty",noAuth:!0},component:()=>a.e("chunk-dd5ac3ce").then(a.bind(null,"935e"))},{path:"/confirm",name:"confirm",meta:{layout:"empty",noAuth:!0},component:()=>a.e("chunk-2d9fb030").then(a.bind(null,"5dc4"))},{path:"/forgot-password",name:"forgot-password",meta:{layout:"empty",noAuth:!0},component:()=>a.e("chunk-2d2371b2").then(a.bind(null,"fa67"))},{path:"/cites",name:"cites",component:()=>a.e("chunk-8cd10c58").then(a.bind(null,"bc60"))},{path:"/batiments",name:"batiments",component:()=>a.e("chunk-8cf7bf00").then(a.bind(null,"91d3"))},{path:"/annonces",name:"annonces",component:()=>a.e("chunk-0957679f").then(a.bind(null,"9957"))},{path:"/habitants",name:"habitants",component:()=>a.e("chunk-322798f1").then(a.bind(null,"1418"))},{path:"/occupations",name:"occupations",component:()=>a.e("chunk-0e170bd7").then(a.bind(null,"0e80"))},{path:"/occupations/:id",name:"details-occupation",component:()=>a.e("chunk-2d0c2335").then(a.bind(null,"48fa"))},{path:"/articles",name:"articles",component:()=>a.e("chunk-38b5821c").then(a.bind(null,"dba4"))},{path:"/contrat",name:"contrat",component:()=>a.e("chunk-47a0080d").then(a.bind(null,"b15e"))},{path:"/depenses",name:"depenses",component:()=>a.e("chunk-3ceffec6").then(a.bind(null,"c574"))},{path:"/indexes",name:"indexes",component:()=>a.e("chunk-074986f4").then(a.bind(null,"a7a3"))},{path:"/loyers",name:"loyers",component:()=>a.e("chunk-42c0aafb").then(a.bind(null,"ad35"))}],be=new P["a"]({mode:"hash",base:"/",routes:ge});be.beforeEach(async(e,t,a)=>{if(e.matched.some(e=>e.meta.noAuth&&!0===e.meta.noAuth))a();else{const e=storage.get("access_token");e&&null!=e&&""!=e||a({name:"login"}),a()}});var fe=be,ve=a("2f62");s["default"].use(ve["a"]);const Ce={user:{avatar:null,nom:null}};var ye=new ve["a"].Store({state:Ce,getters:{user(e){return e.user}},mutations:{user(e,t){e.user=t}},actions:{user(e,t){e.commit("user",t)}},modules:{}}),_e=a("2ee4"),ke=a.n(_e),xe=(a("da93"),a("4a7a")),we=a.n(xe),Se=(a("6dfc"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper",attrs:{id:"app"}},[a("app-header"),a("div",{staticClass:"page-wrap"},[a("sidebar"),a("div",{staticClass:"main-content"},[a("div",{staticClass:"container-fluid"},[e._t("default")],2)]),a("full-features"),a("AppFooter")],1)],1)}),Le=[],Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header-top",attrs:{"header-theme":"light"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"d-flex justify-content-between"},[e._m(0),a("div",{staticClass:"top-menu d-flex align-items-center"},[e._m(1),a("div",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("img",{staticClass:"avatar",attrs:{src:e.user.avatar,alt:e.user.nom}})]),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"userDropdown"}},[a("b-link",{staticClass:"dropdown-item",attrs:{to:{name:"profil"}}},[a("i",{staticClass:"ik ik-user dropdown-icon"}),e._v(" Profil")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-power dropdown-icon"}),e._v(" Déconnexion")])],1)])])])])])},qe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top-menu d-flex align-items-center"},[a("button",{staticClass:"btn-icon mobile-nav-toggle d-lg-none",attrs:{type:"button"}},[a("span")]),a("div",{staticClass:"header-search"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon search-close"},[a("i",{staticClass:"ik ik-x"})]),a("input",{staticClass:"form-control",attrs:{type:"text"}}),a("span",{staticClass:"input-group-addon search-btn"},[a("i",{staticClass:"ik ik-search"})])])]),a("button",{staticClass:"nav-link",attrs:{type:"button",id:"navbar-fullscreen"}},[a("i",{staticClass:"ik ik-maximize"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"nav-link ml-10",attrs:{type:"button",id:"apps_modal_btn","data-toggle":"modal","data-target":"#appsModal"}},[a("i",{staticClass:"ik ik-grid"})])}],Te={name:"Header",computed:{...Object(ve["b"])(["user"])},methods:{logout(){storage.clear(),this.$router.push({name:"login"})}}},Ae=Te,Pe=Object(M["a"])(Ae,Me,qe,!1,null,null,null),$e=Pe.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-sidebar colored"},[e._m(0),a("div",{staticClass:"sidebar-content"},[a("div",{staticClass:"nav-container"},[a("nav",{staticClass:"navigation-main",attrs:{id:"main-menu-navigation"}},[a("div",{staticClass:"nav-lavel"},[e._v("Accueil")]),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"home"}}},[a("i",{staticClass:"ik ik-monitor",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Accueil")])])],1),a("div",{staticClass:"nav-lavel"},[e._v("Analyse & rentabilité")]),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"depenses"}}},[a("i",{staticClass:"ik ik-menu",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Dépenses")])])],1),a("div",{staticClass:"nav-lavel"},[e._v("Patrimoine immobilier")]),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"cites"}}},[a("i",{staticClass:"fas fa-city",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes cités")])])],1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"batiments"}}},[a("i",{staticClass:"fa fa-building",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes batiments")])])],1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"logements"}}},[a("i",{staticClass:"fas fa-home",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes logements")])])],1),a("div",{staticClass:"nav-lavel"},[e._v("Gestion immobilière")]),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"annonces"}}},[a("i",{staticClass:"fas fa-ad",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes annonces")])])],1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"occupations"}}},[a("i",{staticClass:"fas fa-building",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes occupations")])])],1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"habitants"}}},[a("i",{staticClass:"fas fa-users",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes habitants")])])],1),a("div",{staticClass:"nav-lavel"},[e._v("Finances")]),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"indexes"}}},[a("i",{staticClass:"fas fa-clipboard-list",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Rélévés d'indexes")])])],1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"loyers"}}},[a("i",{staticClass:"fas fa-list",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Loyers")])])],1),a("div",{staticClass:"nav-lavel"},[e._v("Configuration et Aide")]),e._m(1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"articles"}}},[a("i",{staticClass:"fas fa-newspaper",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes Articles et Rubriques")])])],1),a("div",{staticClass:"nav-item"},[a("b-link",{attrs:{to:{name:"contrat"}}},[a("i",{staticClass:"fas fa-file-signature",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Mes Modèles Contrats")])])],1)])])])])},Be=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-header"},[a("a",{staticClass:"header-brand",attrs:{href:"index.html"}},[a("div",{staticClass:"logo-img mr-2"},[a("img",{staticClass:"header-brand-img",staticStyle:{height:"1.5em",width:"1.5em"},attrs:{src:"/img/logo-m0.png",alt:"lavalite"}})]),a("span",{staticClass:"text"},[e._v("Maisonier")])]),a("button",{staticClass:"nav-toggle",attrs:{type:"button"}},[a("i",{staticClass:"ik ik-toggle-right toggle-icon",attrs:{"data-toggle":"expanded"}})]),a("button",{staticClass:"nav-close",attrs:{id:"sidebarClose"}},[a("i",{staticClass:"ik ik-x"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-item"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"ik ik-monitor",staticStyle:{color:"whitesmoke","font-size":".9rem"}}),a("span",[e._v("Documentation")])])])}],Ee={name:"Sidebar"},Oe=Ee,Ne=Object(M["a"])(Oe,De,Be,!1,null,null,null),je=Ne.exports,ze=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Fe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"w-100 clearfix"},[a("span",{staticClass:"text-center text-sm-left d-md-inline-block"},[e._v("Copyright © 2018 ThemeKit v2.0. All Rights Reserved.")]),a("span",{staticClass:"float-none float-sm-right mt-1 mt-sm-0 text-center"},[e._v("Crafted with "),a("i",{staticClass:"fa fa-heart text-danger"}),e._v(" by "),a("a",{staticClass:"text-dark",attrs:{href:"http://lavalite.org/",target:"_blank"}},[e._v("Lavalite")])])])])}],Ie={name:"Footer"},Ge=Ie,Re=Object(M["a"])(Ge,ze,Fe,!1,null,null,null),Ue=Re.exports,Ve=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},He=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade apps-modal",attrs:{id:"appsModal",tabindex:"-1",role:"dialog","aria-labelledby":"appsModalLabel","aria-hidden":"true","data-backdrop":"false"}},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("i",{staticClass:"ik ik-x-circle"})]),a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"quick-search"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 ml-auto mr-auto"},[a("div",{staticClass:"input-wrap"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"quick-search",placeholder:"Search..."}}),a("i",{staticClass:"ik ik-search"})])])])])]),a("div",{staticClass:"modal-body d-flex align-items-center"},[a("div",{staticClass:"container"},[a("div",{staticClass:"apps-wrap"},[a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-bar-chart-2"}),a("span",[e._v("Dashboard")])])]),a("div",{staticClass:"app-item dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"ik ik-command"}),a("span",[e._v("Ui")])]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Another action")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Something else here")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-mail"}),a("span",[e._v("Message")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-users"}),a("span",[e._v("Accounts")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-shopping-cart"}),a("span",[e._v("Sales")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-briefcase"}),a("span",[e._v("Purchase")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-server"}),a("span",[e._v("Menus")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-clipboard"}),a("span",[e._v("Pages")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-message-square"}),a("span",[e._v("Chats")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-map-pin"}),a("span",[e._v("Contacts")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-box"}),a("span",[e._v("Blocks")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-calendar"}),a("span",[e._v("Events")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-bell"}),a("span",[e._v("Notifications")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-pie-chart"}),a("span",[e._v("Reports")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-layers"}),a("span",[e._v("Tasks")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-edit"}),a("span",[e._v("Blogs")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-settings"}),a("span",[e._v("Settings")])])]),a("div",{staticClass:"app-item"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"ik ik-more-horizontal"}),a("span",[e._v("More")])])])])])])])])])}],Ye={name:"FullFeature"},Ke=Ye,Je=Object(M["a"])(Ke,Ve,He,!1,null,null,null),Qe=Je.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("div",{staticClass:"row align-items-end"},[a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"page-header-title"},[a("i",{class:"fa fa-"+e.icon+" bg-red"}),a("div",{staticClass:"d-inline"},[a("h5",[e._v(e._s(e.title))]),a("span",[e._v(e._s(e.description))])])])]),a("div",{staticClass:"col-lg-4"},[a("nav",{staticClass:"breadcrumb-container"},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("b-link",{attrs:{to:{name:"home"}}},[a("i",{staticClass:"ik ik-home"})])],1),e._l(e.path,(function(t,s){return a("li",{key:s,staticClass:"breadcrumb-item"},[a("b-link",{attrs:{href:"#",onclick:"return false"}},[e._v(e._s(t))])],1)}))],2)])])])])},Ze=[],Xe={props:{title:String,description:String,icon:{type:String,default:"file-alt"},path:{type:Array,default:[]}}},et=Xe,tt=Object(M["a"])(et,We,Ze,!1,null,null,null),at=tt.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["top"===e.hr?a("hr"):e._e(),a("div",{staticClass:"d-flex align-items-center"},[!1===e.noControl?a("div",{staticClass:"mr-2 m-0 mt-n3"},[a("span",{staticClass:"text-muted text-small mr-2"},[e._v("Affichage de "+e._s(e.offset+1)+" - "+e._s(e.last)+" de "+e._s(e.total)+" éléments ")]),a("button",{staticClass:"btn btn-outline-dark btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.limit)+" "),a("i",{staticClass:"ik ik-chevron-down mr-0 align-middle"})]),a("div",{staticClass:"dropdown-menu dropdown-menu-right"},e._l([10,20,30,50,100],(function(t){return a("a",{key:t,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.changeLimit(t)}}},[e._v(e._s(t))])})),0)]):e._e(),a("b-pagination",{attrs:{"total-rows":e.total,"per-page":e.limiter},on:{input:function(t){e.$emit("pageChanged",t)}},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1),"bottom"===e.hr?a("hr",{staticClass:"mt-0"}):e._e()])},it=[],nt={props:{total:{type:Number,required:!0},limit:{type:Number,default:20},offset:{type:Number,default:0},page:{type:Number,default:1},hr:{type:[String,Boolean],default:!1},noControl:{type:Boolean,default:!1}},data:()=>({limiter:20,current:1}),mounted(){this.limiter=this.limit,this.current=this.page},computed:{last(){const e=this.offset+this.limiter;return e>this.total?this.total:e}},methods:{changeLimit(e){this.limiter=e,this.$emit("limitChanged",e)}}},ot=nt,lt=Object(M["a"])(ot,st,it,!1,null,null,null),rt=lt.exports,ct=a("e15b"),dt=a.n(ct);a("0ae7");s["default"].component("PageDescription",at),s["default"].component("Paginator",rt),s["default"].component("vue-repeater",dt.a);var ut={name:"DefaultLayout",components:{AppHeader:$e,Sidebar:je,AppFooter:Ue,FullFeatures:Qe},created(){const e=storage.get("access_token");e&&null!=e&&""!=e&&axios.get("utilisateurs/"+e).then(e=>e.result).then(e=>{this.$store.dispatch("user",e)}).catch(e=>{storage.clear(),this.$router.push({name:"login"})})},mounted(){this.activeSidebarItem()},updated(){this.activeSidebarItem()},methods:{activeSidebarItem(){$("#main-menu-navigation *").removeClass("active"),$("#main-menu-navigation .router-link-exact-active").parent(".nav-item").addClass("active")}}},mt=ut,pt=Object(M["a"])(mt,Se,Le,!1,null,null,null),ht=pt.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("default")],2)},bt=[],ft={name:"EmptyLayout"},vt=ft,Ct=Object(M["a"])(vt,gt,bt,!1,null,null,null),yt=Ct.exports,_t=a("ebfd"),kt=a.n(_t),xt=a("657c"),wt=(a("2bd9"),a("755e"));s["default"].use(ke.a),s["default"].component("v-select",we.a),s["default"].config.productionTip=!0,s["default"].component("default-layout",ht),s["default"].component("empty-layout",yt),s["default"].use(kt.a),s["default"].component("img-inputer",xt["a"]),s["default"].use(wt,{load:{key:"AIzaSyB4wnGV-GeVMiv-_yT2qO_iKyaM_bMGX7w"}}),new s["default"]({router:fe,store:ye,render:function(e){return e(T)}}).$mount("#app")},"5ad6":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shadow list-item list-item-grid"},[a("div",{staticClass:"card d-flex flex-row mb-3"},[a("a",{staticClass:"d-flex card-img",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[a("img",{staticClass:"list-thumbnail responsive border-0",staticStyle:{height:"15em"},attrs:{src:e.depense.photo||"/img/depenseImage.jpg",alt:""}}),e.depense.etatDepense?a("span",{staticClass:"badge badge-pill badge-success position-absolute badge-top-left"}):a("span",{staticClass:"badge badge-pill badge-danger position-absolute badge-top-left"},[e._v("Non traitée")])]),a("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content"},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content py-3"},[a("div",{staticClass:"card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center",staticStyle:{height:"15em","overflow-y":"auto"}},[a("div",{staticClass:"text-center"},[a("h5",{staticClass:"text-red"},[e._v(e._s(e.php.ucfirst(e.depense.motif.toLowerCase())))])]),a("div",{staticClass:"text-muted w-100 my-1"},[e._m(0),a("span",[e._v("Montant :"+e._s(e.depense.montant)+" ")])]),a("div",{staticClass:"text-muted w-100 my-1"},[e._m(1),a("span",[e._v("Date :"+e._s(e.depense.dateDepense)+" ")])]),0==e.source?a("div",[null!==e.depense.cite?a("div",{staticClass:"text-muted w-100 my-1"},[e._m(2),a("span",[e._v("Cité :"+e._s(e.depense.cite.nomCite)+" ")])]):e._e(),null!==e.depense.batiment?a("div",{staticClass:"text-muted w-100 my-1"},[e._m(3),a("span",[e._v("Batiment :"+e._s(e.depense.batiment.nomBatiment)+" ")])]):e._e(),null!==e.depense.logement?a("div",{staticClass:"text-muted w-100 my-1"},[e._m(4),a("span",[e._v("Logement :"+e._s(e.depense.logement.refLogement)+" ")])]):e._e()]):e._e(),a("hr"),a("p",{staticClass:"text-muted text-small"},[e._v(e._s(e.depense.observation))])])]),a("div",{staticClass:"list-actions"},[e.isSub?e._e():a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-eye"})]),e.isSub?a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.accessTo.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-link"})]):e._e(),e.isSub?e._e():a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("makeUpdate",e.depense)}}},[a("i",{staticClass:"ik ik-edit-2"})]),a("a",{staticClass:"list-delete",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.remove.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-trash-2"})])])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fa fa-dollar-sign"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"far fa-calendar-alt"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fas fa-city"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fa fa-building"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-inline-block w-10 text-center"},[a("i",{staticClass:"fas fa-home"})])}];const n=a("5a6f");var o={props:{depense:{type:Object,required:!0},isSub:{type:Boolean,default:!1},source:{type:Number,default:0}},computed:{dateCreation(){const e=this.$date(this.depense.createdAt);return`Crée le ${e.format("dddd, DD MMMM YYYY")} à ${e.format("HH:mm")}`},php(){return n}},methods:{showDetails(){if(this.isSub)return!1;this.$emit("showDetails",this.depense)},accessTo(){$("#editLayoutItem").modal("hide"),this.$router.push({name:"depenses",query:{target:this.depense.idDepense}})},remove(){App.confirm(`Voullez vous vraiment supprimer la dépense " <b>${this.depense.motif}</b> " ?`,{confirm:()=>{axios.delete("depenses/"+this.depense.idDepense).then(e=>e.success?(this.$emit("deleted",this.depense.idDepense),App.notifySuccess(e.message)):App.notifyError(e.message))}})}}},l=o,r=a("2877"),c=Object(r["a"])(l,s,i,!1,null,null,null);t["a"]=c.exports},6727:function(e,t,a){},"6bc6":function(e,t,a){"use strict";a("84e3")},"84e3":function(e,t,a){},"91e1":function(e,t,a){"use strict";a("6727")},a474:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.showOverlayP,rounded:"sm"}},[a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Montant",description:"à combien s'élève la dépense éffectuée?"}},[a("b-form-input",{attrs:{placeholder:"Ex: 45000",type:"number",trim:""},model:{value:e.depense.montant,callback:function(t){e.$set(e.depense,"montant",t)},expression:"depense.montant"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Date à laquelle la dépense a été éffectuée"}},[a("date-picker",{staticClass:"w-100",attrs:{placeholder:"Selectionnez une date",format:"dddd, DD MMMM YYYY",valueType:"YYYY-MM-DD",clearable:!1},model:{value:e.depense.date,callback:function(t){e.$set(e.depense,"date",t)},expression:"depense.date"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Motif",description:"Pourquoi avez-vous éffectué cette dépense ?"}},[a("b-form-input",{attrs:{placeholder:"Ex: Replacement ampoules cassées",trim:""},model:{value:e.depense.motif,callback:function(t){e.$set(e.depense,"motif",t)},expression:"depense.motif"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"responsable",description:"Qui est celui qui a déclaré la dépense?"}},[a("b-form-input",{attrs:{placeholder:"Ex: Pedro",trim:""},model:{value:e.depense.responsable,callback:function(t){e.$set(e.depense,"responsable",t)},expression:"depense.responsable"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{cols:"7"}},[a("b-form-group",{attrs:{label:"observations"}},[a("b-form-textarea",{staticClass:"mb-2",attrs:{placeholder:"C'est ici que vou pouvez décrire ce qui a engendré la dépense",rows:"7"},model:{value:e.depense.observation,callback:function(t){e.$set(e.depense,"observation",t)},expression:"depense.observation"}})],1)],1),a("b-col",{attrs:{cols:"5"}},[a("b-form-group",{attrs:{label:"joindre une photo"}},[a("img-inputer",{attrs:{theme:"light",size:"xl","bottom-text":"déposez le fichier ici ou cliquez pour modifier",icon:"img",placeholder:"joindre recu dépense"},on:{onChange:e.onrecuLoad},model:{value:e.depense.photo,callback:function(t){e.$set(e.depense,"photo",t)},expression:"depense.photo"}})],1)],1)],1),a("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Votre dépense concerne"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.ariaDescribedby;return[a("b-form-radio-group",{attrs:{id:"radio-slots",options:e.options,"aria-describedby":s,name:"radio-options-slots",disabled:e.disableState},on:{change:e.setAction},model:{value:e.commandeAction,callback:function(t){e.commandeAction=t},expression:"commandeAction"}})]}}])})],1),a("b-col",[a("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[e.showSelectCite?a("div",{staticClass:"form-group"},[a("label",[e._v("Cité concernée")]),a("v-select",{class:{disabled:1==e.disabled},attrs:{label:"nomCite",options:e.cites},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1):e._e(),e.showSelectBatiment?a("div",{staticClass:"form-group"},[a("label",[e._v("Batiment concerné")]),a("v-select",{class:{disabled:1==e.disabled},attrs:{label:"nomBatiment",options:e.batiments},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1):e._e(),e.showSelectLogement?a("div",{staticClass:"form-group"},[a("label",[e._v("Logement concerné")]),a("v-select",{class:{disabled:1==e.disabled},attrs:{label:"refLogement",options:e.logements},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1):e._e()])],1)],1),a("hr"),a("div",{staticClass:"float-right"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.submitModal.apply(null,arguments)}}},[e._v("Valider")])],1)],1)],1)},i=[],n=a("ec45"),o=(a("411c"),a("0edd"),a("2c43")),l=a("2b0e"),r=a("657c");a("2bd9");const c=a("5a6f");l["default"].component("ImgInputer",r["a"]);var d={name:"depense-form",data:()=>({disabled:!1,disableState:!1,options:[{text:"une cité",value:"cite"},{text:"un batiment",value:"batiment"},{text:"un logement",value:"logement"}],depense:{montant:"",date:"",motif:"",responsable:"",obs:"",photo:""},id:"",commandeAction:"",showOverlay:!1,showOverlayP:!1,showSelectCite:!1,showSelectBatiment:!1,showSelectLogement:!1,sendForm:!1,cites:[],batiments:[],logements:[]}),components:{DatePicker:n["default"]},props:{cite:{type:Object},batiment:{type:Object},logement:{type:Object},action:{type:String,required:!0,default:"add"},provenance:{type:String,required:!0,default:"1"}},methods:{async onrecuLoad(e){const t=e;this.depense.photo=await this.getBase64(t)},async setAction(){if(this.showOverlay=!0,"cite"==this.commandeAction){this.showSelectCite=!0,this.showSelectBatiment=!1,this.showSelectLogement=!1;try{this.cites=await(await axios.get("cites").then(e=>e.result))}catch(e){console.log(e)}}if("batiment"==this.commandeAction){this.showSelectBatiment=!0,this.showSelectCite=!1,this.showSelectLogement=!1;try{this.batiments=await(await axios.get("batiments").then(e=>e.result))}catch(e){console.log(e)}}if("logement"==this.commandeAction){this.showSelectLogement=!0,this.showSelectCite=!1,this.showSelectBatiment=!1;try{this.logements=await(await axios.get("logements").then(e=>e.result))}catch(e){console.log(e)}}this.showOverlay=!1},resetModal(){this.depense={montant:"",date:"",motif:"",responsable:"",observation:""},"2"!=this.provenance&&(this.showSelectCite=!1,this.showSelectBatiment=!1,this.showSelectLogement=!1,this.id=null,this.commandeAction=""),setTimeout(()=>{this.$emit("closeDepenseModal")},500)},submitModal(e){return e.preventDefault(),c.empty(this.depense.montant)||c.empty(this.depense.motif)||c.empty(this.id)?App.error("Un montant, un motif et l'entité concernée par la dépense sont obligatoires"):""==this.depense.montant?App.error("Vous devez spécifier un montant"):""==this.depense.motif?App.error("Vous devez spécifier un motif"):""==this.id?App.error("Vous devez spécifier l'entité concernée par la dépense"):void("add"==this.action&&(this.showOverlayP=!0,this.showSelectLogement&&(console.log("dépense",this.depense,"id",this.id.idLogement),axios.post("/logements/"+this.id.idLogement+"/depenses",this.depense).then(e=>(this.resetModal(),this.showOverlayP=!1,this.$emit("depenseAdded",e.result),App.notifySuccess(e.message))).catch(e=>{this.showOverlayP=!1,o["a"].error(e.message)})),this.showSelectCite&&axios.post("/cites/"+this.id.idCite+"/depenses",this.depense).then(e=>(this.resetModal(),this.showOverlayP=!1,this.$emit("depenseAdded",e.result),App.notifySuccess(e.message))).catch(e=>{this.showOverlayP=!1,o["a"].error(e.message)}),this.showSelectBatiment&&axios.post("/batiments/"+this.id.idBatiment+"/depenses",this.depense).then(e=>(this.resetModal(),this.showOverlayP=!1,this.$emit("depenseAdded",e.result),App.notifySuccess(e.message))).catch(e=>{this.showOverlayP=!1,o["a"].error(e.message)})))},getBase64(e){return new Promise((t,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)})}},mounted(){null!=this.cite&&(this.commandeAction="cite",this.showSelectCite=!0,this.id=this.cite,this.disabled=!0,this.disableState=!0),null!=this.batiment&&(this.commandeAction="batiment",this.showSelectBatiment=!0,this.id=this.batiment,this.disabled=!0,this.disableState=!0),null!=this.logement&&(this.commandeAction="logement",this.showSelectLogement=!0,this.id=this.logement,this.disabled=!0,this.disableState=!0)}},u=d,m=(a("47bb"),a("2877")),p=Object(m["a"])(u,s,i,!1,null,"55406b86",null);t["a"]=p.exports},bae3:function(e,t,a){},c0a6:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[a("form-wizard",{ref:"logementForm",attrs:{title:"",subtitle:"",nextButtonText:"suivant",backButtonText:"Précedent",finishButtonText:"Enregistrer","aria-labelledby":"demoModalLabel",shape:"circle",color:"#e74c3c"},on:{"on-complete":e.onComplete,"on-loading":e.setLoading,"on-validate":e.handleValidation}},[a("tab-content",{attrs:{title:"Informations sur le logement",icon:"ik ik-home","before-change":e.validateAsync}},[a("div",[a("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"9",description:e.reference,label:"Reférence du logement","label-for":"input-horizontal"}},[a("b-form-input",{class:e.requiredRef?"":"is-red",attrs:{id:"input-horizontal"},model:{value:e.logement.ref,callback:function(t){e.$set(e.logement,"ref",t)},expression:"logement.ref"}}),e.requiredRef?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Ce champ est obligatoire")])],1)],1),a("b-row",[a("b-col",[a("div",{staticClass:"form-group"},[a("label",[e._v("Type de logement")]),a("v-select",{class:e.requiredSousType?"":"is-red",attrs:{label:"libelleType",options:e.typesLogement},on:{input:e.changeType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)]),a("b-col",[a("div",{staticClass:"form-group"},[a("label",[e._v("Catégorie associée ")]),a("v-select",{class:e.requiredSousType?"":"is-red",attrs:{label:"libelleSousType",options:e.sousTypes},model:{value:e.sousType,callback:function(t){e.sousType=t},expression:"sousType"}}),e.requiredSousType?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Ce champ est obligatoire")])],1)])],1),a("b-row",[a("b-col",[a("div",{staticClass:"form-group"},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Ajouter une description à votre logement",size:"sm"},model:{value:e.logement.description,callback:function(t){e.$set(e.logement,"description",t)},expression:"logement.description"}})],1)])],1),a("b-form-checkbox",{staticClass:"mb-2",attrs:{disabled:null!=e.batiment,switch:""},model:{value:e.showSelectBatiment,callback:function(t){e.showSelectBatiment=t},expression:"showSelectBatiment"}},[a("span",{staticClass:"fa-lg"},[e._v("Votre logement est-il associé à un batiment ?")])]),a("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[e.showSelectBatiment?a("b-form-group",{attrs:{label:"Batiment associé"}},[a("v-select",{attrs:{disabled:null!=e.batiment,options:e.tousLesBatiments,reduce:function(e){return e.idBatiment},label:"nomBatiment"},scopedSlots:e._u([{key:"option",fn:function(t){var s=t.nomBatiment,i=t.refBatiment,n=t.cite;return[e._v(" "+e._s(s)+" "),a("br"),a("span",{staticClass:"text-muted"},[e._v("Reference: "+e._s(i))]),a("br"),null!=n?a("small",{staticClass:"text-muted"},[e._v("Cité: "+e._s(n.nomCite))]):e._e(),a("hr",{staticClass:"m-0"})]}}],null,!1,3960934033),model:{value:e.idBatiment,callback:function(t){e.idBatiment=t},expression:"idBatiment"}})],1):e._e()],1)],1),a("tab-content",{attrs:{title:"Informations sur le coût",icon:"fas fa-money-check-alt","before-change":e.validateSecond}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputUsername1"}},[e._v("Prix Minimal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.logement.prixMin,expression:"logement.prixMin"}],staticClass:"form-control",attrs:{type:"number",step:"1000",min:"1000",id:"prixMin",required:"",placeholder:"Prix Minimal Ex:18500"},domProps:{value:e.logement.prixMin},on:{input:function(t){t.target.composing||e.$set(e.logement,"prixMin",t.target.value)}}}),e.requiredPrixMin?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Le prix minimal est obligatoire")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputUsername1"}},[e._v("Prix Maximal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.logement.prixMax,expression:"logement.prixMax"}],staticClass:"form-control",attrs:{type:"number",step:"1000",min:"1000",id:"prixMax",required:"",placeholder:"Prix Maximal Ex:21000"},domProps:{value:e.logement.prixMax},on:{input:function(t){t.target.composing||e.$set(e.logement,"prixMax",t.target.value)}}}),e.requiredPrixMax?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Le prix maximal est obligatoire")])])]),a("tab-content",{attrs:{title:"Photos du logement",icon:"fas fa-image","before-change":e.validateThird}},[a("div",{staticStyle:{display:"flex","justify-content":"center"},attrs:{id:"my-strictly-unique-vue-upload-multiple-image"}},[a("vue-upload-multiple-image",{attrs:{"data-images":e.images,dragText:"cliquer pour choisir des images",browseText:"Vous pouvez choisir jusqu'à 5 images",idUpload:"myIdUpload",editUpload:"myIdEdit"},on:{"upload-success":e.uploadImageSuccess,"before-remove":e.beforeRemove,"edit-image":e.editImage}})],1)]),a("tab-content",{attrs:{title:"Localisation du logement",icon:"fa fa-map-marker","before-change":e.validateFour}},[a("div",{staticClass:"form-group"},[a("label",[e._v("Pays ")]),a("b-form-select",{staticClass:"mb-3",attrs:{options:e.tousLesPays,"value-field":"name","text-field":"name"},model:{value:e.logement.pays,callback:function(t){e.$set(e.logement,"pays",t)},expression:"logement.pays"}}),e.requiredPays?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Vous devez selectionner un pays")])],1),a("div",{staticClass:"form-group"},[a("label",[e._v("Ville ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.logement.ville,expression:"logement.ville"}],staticClass:"form-control",attrs:{type:"text",id:"ville",required:"",placeholder:"Ville Ex:Yaoundé"},domProps:{value:e.logement.ville},on:{input:function(t){t.target.composing||e.$set(e.logement,"ville",t.target.value)}}}),e.requiredVille?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Ville obligatoire")])]),a("div",{staticClass:"form-group"},[a("label",[e._v("Quartier ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.logement.quartier,expression:"logement.quartier"}],staticClass:"form-control",attrs:{type:"text",id:"quartier",required:"",placeholder:"Quartier Ex:Nsam"},domProps:{value:e.logement.quartier},on:{input:function(t){t.target.composing||e.$set(e.logement,"quartier",t.target.value)}}}),e.requiredQuartier?e._e():a("span",{staticStyle:{color:"red"}},[e._v("Quartier obligatoire")])])]),a("tab-content",{attrs:{title:"Coordonnées du logement",icon:"ik ik-map-pin","before-change":e.validateFive}},[a("b-row",[a("b-col",[a("div",{staticClass:"form-group"},[a("label",[e._v("Latitude ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mapCoordinates.lat,expression:"mapCoordinates.lat"}],staticClass:"form-control",attrs:{type:"text",id:"lat"},domProps:{value:e.mapCoordinates.lat},on:{input:function(t){t.target.composing||e.$set(e.mapCoordinates,"lat",t.target.value)}}})])]),a("b-col",[a("div",{staticClass:"form-group"},[a("label",[e._v("Longitude ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mapCoordinates.lng,expression:"mapCoordinates.lng"}],staticClass:"form-control",attrs:{type:"text",id:"longitude"},domProps:{value:e.mapCoordinates.lng},on:{input:function(t){t.target.composing||e.$set(e.mapCoordinates,"lng",t.target.value)}}})])])],1),a("div",[a("h1",[e._v("Coordonnées de ma position:")]),a("p",[e._v(e._s(e.myCoordinates.lat)+" Latitude, "+e._s(e.myCoordinates.lng)+" Longitude")])]),a("div",[a("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"360px",margin:"32px auto"},attrs:{center:e.myCoordinates,zoom:e.zoom},on:{dragend:e.handleDrag}})],1)],1),a("tab-content",{attrs:{title:"Caractéristiques approfondies du logement",icon:"fa fa-list"}},[a("b-row",[a("b-col",[a("label",[e._v("Nombre de chambre"),e.logement.nbchambre>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbchambre--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbchambre,callback:function(t){e.$set(e.logement,"nbchambre",t)},expression:"logement.nbchambre"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbchambre++}}},[e._v("+")])],1)],1)],1),a("b-col",[a("label",[e._v("Nombre de cuisine"),e.logement.nbcuisine>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbcuisine--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbcuisine,callback:function(t){e.$set(e.logement,"nbcuisine",t)},expression:"logement.nbcuisine"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbcuisine++}}},[e._v("+")])],1)],1)],1),a("b-col",[a("label",[e._v("Nombre de Salon"),e.logement.nbsalon>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbsalon--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbsalon,callback:function(t){e.$set(e.logement,"nbsalon",t)},expression:"logement.nbsalon"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbsalon++}}},[e._v("+")])],1)],1)],1)],1),a("b-row",[a("b-col",[a("label",[e._v("Nombre de douche"),e.logement.nbdouche>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbdouche--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbdouche,callback:function(t){e.$set(e.logement,"nbdouche",t)},expression:"logement.nbdouche"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbdouche++}}},[e._v("+")])],1)],1)],1),a("b-col",[a("label",[e._v("Nombre de parking"),e.logement.nbparking>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbparking--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbparking,callback:function(t){e.$set(e.logement,"nbparking",t)},expression:"logement.nbparking"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbparking++}}},[e._v("+")])],1)],1)],1),a("b-col",[a("label",[e._v("Nombre de Piscine"),e.logement.nbpiscine>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbpiscine--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbpiscine,callback:function(t){e.$set(e.logement,"nbpiscine",t)},expression:"logement.nbpiscine"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbpiscine++}}},[e._v("+")])],1)],1)],1)],1),a("b-row",[a("b-col",[a("label",[e._v("Nombre de Garage"),e.logement.nbgarage>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbgarage--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbgarage,callback:function(t){e.$set(e.logement,"nbgarage",t)},expression:"logement.nbgarage"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbgarage++}}},[e._v("+")])],1)],1)],1),a("b-col",[a("label",[e._v("Nombre de Sona"),e.logement.nbsona>1?a("span",[e._v("(s)")]):e._e()]),a("b-input-group",[a("b-input-group-prepend",[a("b-btn",{attrs:{variant:"outline-info"},on:{click:function(t){e.logement.nbsona--}}},[e._v("-")])],1),a("b-form-input",{attrs:{type:"number",min:"0.00"},model:{value:e.logement.nbsona,callback:function(t){e.$set(e.logement,"nbsona",t)},expression:"logement.nbsona"}}),a("b-input-group-append",[a("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.logement.nbsona++}}},[e._v("+")])],1)],1)],1)],1)],1),"edit"==e.action&&5!=e.indexForm?a("div",[a("hr"),a("div",{staticClass:"center"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.onComplete.apply(null,arguments)}}},[e._v("Valider")])],1)]):e._e(),e.loadingWizard?a("div",{staticClass:"leloader"}):e._e()],1)],1)},i=[],n=a("2c43"),o=a("fc5c"),l=a("2ee4"),r=(a("da93"),{name:"add-logement",props:{batiment:{type:Object},editLogement:{type:Object},action:{type:String}},data:()=>({loadingWizard:!1,showOverlay:!0,reference:"une reference est propre à chaque logement",logement:{ref:"",description:"",prixMin:"",prixMax:"",pays:"",ville:"",quartier:"",lat:"",lon:"",nbchambre:0,nbcuisine:0,nbsalon:0,nbdouche:0,nbparking:0,nbpiscine:0,nbgarage:0,nbsona:0},map:null,myCoordinates:{lat:0,lng:0},zoom:14,telUser:null,passUser:null,avatarSmUser:null,requiredRef:!0,requiredPays:!0,requiredVille:!0,requiredQuartier:!0,requiredSousType:!0,requiredPrixMin:!0,requiredPrixMax:!0,check:!0,check2:!0,check3:!0,check4:!1,check5:!1,check6:!1,type:null,sousType:null,typesLogement:[],sousTypesLogements:[],sousTypes:[],tousLesBatiments:[],idBatiment:null,images:[],photos:[],tousLesPays:{AF:"Afghanistan",ZA:"Afrique du Sud",AL:"Albanie",DZ:"Algérie",DE:"Allemagne",AD:"Andorre",AO:"Angola",AI:"Anguilla",AQ:"Antarctique",AG:"Antigua-et-Barbuda",AN:"Antilles néerlandaises",SA:"Arabie saoudite",AR:"Argentine",AM:"Arménie",AW:"Aruba",AU:"Australie",AT:"Autriche",AZ:"Azerbaïdjan",BS:"Bahamas",BH:"Bahreïn",BD:"Bangladesh",BB:"Barbade",BY:"Bélarus",BE:"Belgique",BZ:"Belize",BJ:"Bénin",BM:"Bermudes",BT:"Bhoutan",BO:"Bolivie",BA:"Bosnie-Herzégovine",BW:"Botswana",BR:"Brésil",BN:"Brunéi Darussalam",BG:"Bulgarie",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodge",CM:"Cameroun",CA:"Canada",CV:"Cap-Vert",EA:"Ceuta et Melilla",CL:"Chili",CN:"Chine",CY:"Chypre",CO:"Colombie",KM:"Comores",CG:"Congo-Brazzaville",KP:"Corée du Nord",KR:"Corée du Sud",CR:"Costa Rica",CI:"Côte d’Ivoire",HR:"Croatie",CU:"Cuba",DK:"Danemark",DG:"Diego Garcia",DJ:"Djibouti",DM:"Dominique",EG:"Égypte",SV:"El Salvador",AE:"Émirats arabes unis",EC:"Équateur",ER:"Érythrée",ES:"Espagne",EE:"Estonie",VA:"État de la Cité du Vatican",FM:"États fédérés de Micronésie",US:"États-Unis",ET:"Éthiopie",FJ:"Fidji",FI:"Finlande",FR:"France",GA:"Gabon",GM:"Gambie",GE:"Géorgie",GS:"Géorgie du Sud et les îles Sandwich du Sud",GH:"Ghana",GI:"Gibraltar",GR:"Grèce",GD:"Grenade",GL:"Groenland",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernesey",GN:"Guinée",GQ:"Guinée équatoriale",GW:"Guinée-Bissau",GY:"Guyana",GF:"Guyane française",HT:"Haïti",HN:"Honduras",HU:"Hongrie",BV:"Île Bouvet",CX:"Île Christmas",CP:"Île Clipperton",AC:"Île de l'Ascension",IM:"Île de Man",NF:"Île Norfolk",AX:"Îles Åland",KY:"Îles Caïmans",IC:"Îles Canaries",CC:"Îles Cocos - Keeling",CK:"Îles Cook",FO:"Îles Féroé",HM:"Îles Heard et MacDonald",FK:"Îles Malouines",MP:"Îles Mariannes du Nord",MH:"Îles Marshall",UM:"Îles Mineures Éloignées des États-Unis",SB:"Îles Salomon",TC:"Îles Turks et Caïques",VG:"Îles Vierges britanniques",VI:"Îles Vierges des États-Unis",IN:"Inde",ID:"Indonésie",IQ:"Irak",IR:"Iran",IE:"Irlande",IS:"Islande",IL:"Israël",IT:"Italie",JM:"Jamaïque",JP:"Japon",JE:"Jersey",JO:"Jordanie",KZ:"Kazakhstan",KE:"Kenya",KG:"Kirghizistan",KI:"Kiribati",KW:"Koweït",LA:"Laos",LS:"Lesotho",LV:"Lettonie",LB:"Liban",LR:"Libéria",LY:"Libye",LI:"Liechtenstein",LT:"Lituanie",LU:"Luxembourg",MK:"Macédoine",MG:"Madagascar",MY:"Malaisie",MW:"Malawi",MV:"Maldives",ML:"Mali",MT:"Malte",MA:"Maroc",MQ:"Martinique",MU:"Maurice",MR:"Mauritanie",YT:"Mayotte",MX:"Mexique",MD:"Moldavie",MC:"Monaco",MN:"Mongolie",ME:"Monténégro",MS:"Montserrat",MZ:"Mozambique",MM:"Myanmar",NA:"Namibie",NR:"Nauru",NP:"Népal",NI:"Nicaragua",NE:"Niger",NG:"Nigéria",NU:"Niue",NO:"Norvège",NC:"Nouvelle-Calédonie",NZ:"Nouvelle-Zélande",OM:"Oman",UG:"Ouganda",UZ:"Ouzbékistan",PK:"Pakistan",PW:"Palaos",PA:"Panama",PG:"Papouasie-Nouvelle-Guinée",PY:"Paraguay",NL:"Pays-Bas",PE:"Pérou",PH:"Philippines",PN:"Pitcairn",PL:"Pologne",PF:"Polynésie française",PR:"Porto Rico",PT:"Portugal",QA:"Qatar",HK:"R.A.S. chinoise de Hong Kong",MO:"R.A.S. chinoise de Macao",QO:"régions éloignées de l’Océanie",CF:"République centrafricaine",CD:"République démocratique du Congo",DO:"République dominicaine",CZ:"République tchèque",RE:"Réunion",RO:"Roumanie",GB:"Royaume-Uni",RU:"Russie",RW:"Rwanda",EH:"Sahara occidental",BL:"Saint-Barthélémy",KN:"Saint-Kitts-et-Nevis",SM:"Saint-Marin",MF:"Saint-Martin",PM:"Saint-Pierre-et-Miquelon",VC:"Saint-Vincent-et-les Grenadines",SH:"Sainte-Hélène",LC:"Sainte-Lucie",WS:"Samoa",AS:"Samoa américaines",ST:"Sao Tomé-et-Principe",SN:"Sénégal",RS:"Serbie",CS:"Serbie-et-Monténégro",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapour",SK:"Slovaquie",SI:"Slovénie",SO:"Somalie",SD:"Soudan",LK:"Sri Lanka",SE:"Suède",CH:"Suisse",SR:"Suriname",SJ:"Svalbard et Île Jan Mayen",SZ:"Swaziland",SY:"Syrie",TJ:"Tadjikistan",TW:"Taïwan",TZ:"Tanzanie",TD:"Tchad",TF:"Terres australes françaises",IO:"Territoire britannique de l'océan Indien",PS:"Territoire palestinien",TH:"Thaïlande",TL:"Timor oriental",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinité-et-Tobago",TA:"Tristan da Cunha",TN:"Tunisie",TM:"Turkménistan",TR:"Turquie",TV:"Tuvalu",UA:"Ukraine",EU:"Union européenne",UY:"Uruguay",VU:"Vanuatu",VE:"Venezuela",VN:"Viêt Nam",WF:"Wallis-et-Futuna",YE:"Yémen",ZM:"Zambie",ZW:"Zimbabwe"},showSelectBatiment:!1,indexForm:0}),components:{FormWizard:l["FormWizard"],TabContent:l["TabContent"],VueUploadMultipleImage:o["a"]},computed:{mapCoordinates(){return this.map?{lat:this.map.getCenter().lat().toFixed(4),lng:this.map.getCenter().lng().toFixed(4)}:{lat:0,lng:0}}},methods:{resetModal(){this.logement={ref:null,description:null,prixMin:null,prixMax:null,pays:null,ville:null,quartier:null,lat:null,lon:null,nbchambre:null,nbcuisine:null,nbsalon:null,nbdouche:null,nbparking:null,nbpiscine:null,nbgarage:null,nbsona:null},this.editLogement&&(this.editLogement={refLogement:null,descLogement:null,prixMin:null,prixMax:null,pays:null,ville:null,quartier:null,lat:null,lon:null,nbchambre:null,nbcuisine:null,nbsalon:null,nbdouche:null,nbparking:null,nbpiscine:null,nbgarage:null,nbsona:null}),this.idSousType=null,this.idBatiment=null,this.mapCoordinates={lat:null,lng:null},this.photos=[],this.action="add",this.$emit("closeLogementModal")},setLoading:function(e){this.loadingWizard=e},handleValidation:function(e,t){console.log("Tab: "+t+" valid: "+e),this.indexForm=this.indexForm+1,console.log("indexFom: ",this.indexForm)},validateAsync:function(){return new Promise((e,t)=>{this.logement.ref&&this.sousType?this.check=!0:(this.check=!1,this.logement.ref?this.requiredRef=!0:(this.reference="",this.requiredRef=!1),this.sousType?this.requiredSousType=!0:this.requiredSousType=!1),setTimeout(()=>{e(this.check)},1e3)})},validateSecond:function(){return new Promise((e,t)=>{this.logement.prixMin&&this.logement.prixMax?this.check2=!0:(this.check2=!1,this.logement.prixMin?this.requiredPrixMin=!0:this.requiredPrixMin=!1,this.logement.prixMax?this.requiredPrixMax=!0:this.requiredPrixMax=!1),setTimeout(()=>{e(this.check2)},1e3)})},validateThird:function(){return new Promise((e,t)=>{this.check3=!0,setTimeout(()=>{e(this.check3)},1e3)})},validateFour:function(){return new Promise((e,t)=>{this.logement.pays&&this.logement.ville&&this.logement.quartier?this.check4=!0:(this.check4=!1,this.logement.pays?this.requiredPays=!0:this.requiredPays=!1,this.logement.ville?this.requiredVille=!0:this.requiredVille=!1,this.logement.quartier?this.requiredQuartier=!0:this.requiredQuartier=!1),setTimeout(()=>{e(this.check4)},1e3)})},validateFive:function(){return new Promise((e,t)=>{this.check3=!0,setTimeout(()=>{e(this.check3)},1e3)})},onComplete(){this.showOverlay=!0;let e={pays:this.logement.pays,ville:this.logement.ville,quartier:this.logement.quartier,lat:this.mapCoordinates.lat,lon:this.mapCoordinates.lng},t={ref:this.logement.ref,description:this.logement.description,prixMin:this.logement.prixMin,prixMax:this.logement.prixMax,idSousType:this.sousType.idSousType,idBatiment:this.idBatiment,adresse:e,photos:this.photos,caracteristiques:[{libelle:"chambre",valeur:this.logement.nbchambre},{libelle:"salon",valeur:this.logement.nbsalon},{libelle:"cuisine",valeur:this.logement.nbcuisine},{libelle:"douche",valeur:this.logement.nbdouche},{libelle:"parking",valeur:this.logement.nbparking},{libelle:"piscine",valeur:this.logement.nbpiscine},{libelle:"sona",valeur:this.logement.nbsona},{libelle:"garage",valeur:this.logement.nbgarage}]};console.log("data",t),"add"==this.action&&axios.post("logements",t).then(e=>(this.resetModal(),this.showOverlay=!1,this.$emit("logementAdded"),App.notifySuccess(e.message))).catch(e=>{this.showOverlay=!1,n["a"].error(e.message)}),"edit"==this.action&&axios.put("logements/"+this.editLogement.idLogement,t).then(e=>e.success?(this.resetModal(),this.showOverlay=!1,this.editLogement=null,this.$emit("editSuccessfull",e.result),App.notifySuccess(e.message)):App.alertError(e.message)).catch(e=>{this.showOverlay=!1,n["a"].error(e.message)})},async getLogementsData(){try{this.typesLogement=await axios.get("types-logements?all=true").then(e=>e.result)}catch(e){n["a"].error(e.message)}try{this.sousTypesLogements=await axios.get("soustypes-logements").then(e=>e.result)}catch(e){n["a"].error(e.message)}this.showOverlay=!1},uploadImageSuccess(e,t,a){this.photos=[],console.log("taille Totale",a.length-1,"formaData",e);for(let s=0;s<a.length;s++)this.photos.push(a[s].path);console.log("photosTaille",this.photos.length)},beforeRemove(e,t,a){console.log("index",e,a);var s=confirm("voulez vous supprimer cette image");1==s?t():console.log("erreur")},editImage(e,t,a){console.log("edit data",a)},async getAllCountries(){let e="https://restcountries.eu/rest/v2/all";try{this.tousLesPays=await fetch(e).then(e=>e.json())}catch(t){console.log(t)}},changeType(e){this.sousType=[],console.log("type sélectionné ",this.type);let t=[];for(let s=0;s<this.sousTypesLogements.length;s++)t.push(this.sousTypesLogements[s]);let a=t.filter(e=>e.idType==this.type.idType);this.sousTypes=a,console.log("sous-type",this.sousTypes)},handleDrag(){let e={lat:this.map.getCenter().lat(),lng:this.map.getCenter().lng()},t=this.map.getZoom();localStorage.center=JSON.stringify(e),localStorage.zoom=t},async getAllBatiments(){this.tousLesBatiments=await axios.get("batiments").then(e=>e.result||[])},getBase64(e){return new Promise((t,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)})}},created(){localStorage.center?this.myCoordinates=JSON.parse(localStorage.center):this.$getLocation({}).then(e=>{this.myCoordinates=e}).catch(e=>alert(e)),localStorage.zoom&&(this.zoom=parseInt(localStorage.zoom))},async mounted(){const e=setInterval(()=>{this.$refs.mapRef&&(this.$refs.mapRef.$mapPromise.then(e=>this.map=e),clearInterval(e))},50);if(await this.getAllBatiments(),await this.getLogementsData(),this.batiment&&(this.showSelectBatiment=!0,this.idBatiment=this.batiment.idBatiment),this.editLogement){console.log("provenance = édition"),this.logement.ref=this.editLogement.refLogement,this.logement.description=this.editLogement.descLogement,this.logement.prixMin=this.editLogement.prixMin,this.logement.prixMax=this.editLogement.prixMax,this.logement.pays=this.editLogement.adresse.pays,this.logement.ville=this.editLogement.adresse.ville,this.logement.quartier=this.editLogement.adresse.quartier,this.logement.lat=this.editLogement.adresse.lat,this.logement.lon=this.editLogement.adresse.lon,this.photos=this.editLogement.photos,this.type=this.editLogement.sousTypeLogement.typeLogement,this.sousType=this.editLogement.sousTypeLogement,this.logement.nbchambre=this.editLogement.adresse.lat,null!=this.editLogement.batiment&&(this.showSelectBatiment=!0,this.idBatiment=this.editLogement.batiment.idBatiment);for(let e=0;e<=this.editLogement.caracteristiques.length;e++)null!=this.editLogement.caracteristiques[e]&&"chambre"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbchambre=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"salon"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbsalon=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"cuisine"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbcuisine=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"douche"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbdouche=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"parking"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbparking=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"piscine"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbpiscine=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"sona"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbsona=this.editLogement.caracteristiques[e].valeur),null!=this.editLogement.caracteristiques[e]&&"garage"==this.editLogement.caracteristiques[e].libelleCaracteristique&&(this.logement.nbgarage=this.editLogement.caracteristiques[e].valeur);this.$refs["logementForm"].activateAll()}}}),c=r,d=(a("6bc6"),a("2877")),u=Object(d["a"])(c,s,i,!1,null,"1523ef37",null);t["a"]=u.exports}});
//# sourceMappingURL=app.a77d5042.js.map