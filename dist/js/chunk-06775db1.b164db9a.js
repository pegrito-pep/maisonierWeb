(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06775db1"],{"02e8":function(e,t,i){},"287a":function(e,t,i){"use strict";i("02e8")},"2c43":function(e,t,i){"use strict";t["a"]={success:function(e,t){this.make(e,{type:"success",bgcolor:"#5bd747"},t)},error:function(e,t){this.make(e,{type:"error"},t)},make:function(e,t,i){notif(Object.assign({},{type:"info",msg:e,timeout:3e3,callback:i},t))}}},"3c60":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[i("div",{staticClass:"d-flex flex-column justify-content-between h-100"},[i("div",{style:null!=e.cite?"height: 73.5vh;":"",attrs:{id:e.repeaterId}},[i("div",{staticClass:"d-flex flex-column justify-content-between",staticStyle:{height:"95%","overflow-y":"auto","overflow-x":"hidden"}},[i("div",{attrs:{"data-repeater-list":"group"}},[i("b-row",{attrs:{"data-repeater-item":""}},[i("b-col",[i("b-form-group",{attrs:{label:"Nom du batiment"}},[i("b-form-input",{attrs:{name:"nom",placeholder:"Ex: Batiment A",trim:""},model:{value:e.nom,callback:function(t){e.nom=t},expression:"nom"}})],1),i("b-form-group",{attrs:{label:"Reference"}},[i("b-form-input",{attrs:{name:"ref",placeholder:"Ex: B1",trim:""},model:{value:e.ref,callback:function(t){e.ref=t},expression:"ref"}})],1),null==e.cite?i("b-form-group",{attrs:{label:"Photo"}},[i("img-inputer",{attrs:{"img-src":e.$getBase64(e.photo.batiment,!1),placeholder:"Ajouter la photo du batiment",theme:"light",size:"xl","bottom-text":"déposez le fichier ici ou cliquez pour modifier",icon:"img"},model:{value:e.photo.batiment,callback:function(t){e.$set(e.photo,"batiment",t)},expression:"photo.batiment"}})],1):e._e()],1),i("b-col",[null!=e.cite?i("b-form-group",{attrs:{label:"Photo"}},[i("img-inputer",{attrs:{name:"test",placeholder:"Ajouter la photo du batiment",theme:"light",size:"xl","bottom-text":"déposez le fichier ici ou cliquez pour modifier",icon:"img"}})],1):i("div",[i("b-form-group",{attrs:{label:"Cité"}},[i("v-select",{staticClass:"py-1",attrs:{options:e.cites,reduce:function(e){return e.idCite},label:"nomCite"},scopedSlots:e._u([{key:"option",fn:function(t){var s=t.nomCite,a=t.refCite,o=t.idCite;return[e._v(" "+e._s(s)+" "),i("br"),i("span",{staticClass:"text-muted"},[e._v(" "+e._s(-1!=o?"Reference: ":"")+e._s(a))]),-1==o?i("hr",{staticClass:"m-0 bg-danger",staticStyle:{"border-width":"1.5px"}}):e._e()]}}]),model:{value:e.idCite,callback:function(t){e.idCite=t},expression:"idCite"}})],1),i("b-carousel",{directives:[{name:"show",rawName:"v-show",value:-1!=e.idCite,expression:"idCite != -1"}],ref:"citeCarousel",attrs:{interval:0,controls:""},model:{value:e.selected_index_cite,callback:function(t){e.selected_index_cite=t},expression:"selected_index_cite"}},e._l(e.slideCites,(function(e,t){return i("b-carousel-slide",{key:t,staticClass:"fluid w-100 responsive border",staticStyle:{height:"20em"},attrs:{"img-src":e.image||"/img/bgCity.jpg"}})})),1),-1==e.idCite?i("div",[i("b-row",[i("b-col",[i("b-form-group",{attrs:{label:"Nom de la cité"}},[i("b-form-input",{attrs:{placeholder:"Ex: Cité de la joie",trim:""},model:{value:e.nomCite,callback:function(t){e.nomCite=t},expression:"nomCite"}})],1)],1),i("b-col",[i("b-form-group",{attrs:{label:"Reférence de la cité"}},[i("b-form-input",{attrs:{placeholder:"Ex: CDJ",trim:""},model:{value:e.refCite,callback:function(t){e.refCite=t},expression:"refCite"}})],1)],1)],1),i("b-form-group",{attrs:{label:"Photo"}},[i("img-inputer",{attrs:{"img-src":e.$getBase64(e.photo.cite,!1),placeholder:"Ajouter la photo de la cité",theme:"light",size:"xl","bottom-text":"déposez le fichier ici ou cliquez pour modifier",icon:"img"},model:{value:e.photo.cite,callback:function(t){e.$set(e.photo,"cite",t)},expression:"photo.cite"}})],1)],1):e._e()],1)],1),null!=e.cite?i("b-col",{staticClass:"m-0 p-0 mr-2",attrs:{cols:"1"}},[i("b-form-group",{attrs:{label:"Action"}},[i("b-button",{attrs:{"data-repeater-delete":"",variant:"outline-danger"}},[i("i",{staticClass:"fa fa-times"})])],1)],1):e._e()],1)],1)]),i("div",{staticClass:"w-100 d-flex justify-content-end align-items-center mt-4"},[null!=e.cite?i("b-button",{attrs:{variant:"outline-primary","data-repeater-create":""}},[e._v("Ajouter un élément")]):e._e(),i("b-button",{staticClass:"ml-2",attrs:{variant:"danger",disabled:e.submitted},on:{click:e.submitForm}},[e._v("Valider "),e.submitted?i("b-spinner",{attrs:{small:""}}):e._e()],1)],1)])])])},a=[];const o=i("5a6f");var n={data:()=>({submitted:!1,showOverlay:!0,cites:[],idCite:-1,nom:null,ref:null,nomCite:null,refCite:null,photo:{batiment:null,cite:null},selected_index_cite:null}),watch:{selected_index_cite(e){this.idCite=this.slideCites[e].idCite},idCite(e){this.setSlide_cite(e)}},props:{action:{type:String,default:"add"},batiment:{type:Object,default:null},cite:{type:Object,default:null}},computed:{repeaterId(){return"repeat-added-batiment-form-"+(o.empty(this.cite)?o.uniqid():this.cite.idCite)},slideCites(){return this.cites.filter(e=>-1!=e.idCite)}},created(){this.getCites()},mounted(){o.empty(this.cite)||(this.makeRepeater(),this.idCite=this.cite.idCite)},methods:{async getCites(){let e=storage.get("cites");o.empty(e)&&(e=await axios.get("cites").then(e=>e.result||[]),storage.set("cites",e,10)),this.cites=e||[],o.empty(this.batiment)?this.cites.unshift({nomCite:"Créer une nouvelle cité",refCite:"Ajout d'une cité inexistante",idCite:-1}):(this.nom=this.batiment.nomBatiment,this.ref=this.batiment.refBatiment,this.photo.batiment=this.batiment.image,this.idCite=this.batiment.idCite),this.showOverlay=!1},makeRepeater(){setTimeout(()=>{$("#"+this.repeaterId).repeater({isFirstItemUndeletable:!0})},500)},setSlide_cite(e){for(let t=0;t<this.slideCites.length;t++)if(this.slideCites[t].idCite==e&&!o.empty(this.$refs.citeCarousel)){this.$refs.citeCarousel.setSlide(t);break}},async submitForm(){if(o.empty(this.nom)||o.empty(this.ref)||o.empty(this.idCite))return App.error("Veuillez remplir le nom et la reference du batiment");if(-1==this.idCite&&(o.empty(this.nomCite)||o.empty(this.refCite)))return App.error("Veuillez entrer le nom et la reference de la cité");this.submitted=!0;let e={nom:this.nom,idCite:this.idCite,ref:this.ref,photo:await this.$getBase64(this.photo.batiment),batiments:[]};if("add"==this.action){if(-1==e.idCite)try{let t=await axios.post("cites",{nom:this.nomCite,ref:this.refCite,photo:await this.$getBase64(this.photo.cite)});e.idCite=t.result.idCite}catch(t){return App.alertError(t.message)}if(!o.empty(this.cite)){let t=$("#"+this.repeaterId).repeaterVal().group;if(console.log(t),o.empty(t[0].nom)||o.empty(t[0].ref))return App.error("Vous devez remplir au moins les informations du premier batiment");e.batiments=t}axios.post("batiments",e).then(e=>(this.$emit("batimentAdded",e.result),this.submitted=!1,App.notifySuccess(e.message))).catch(e=>(this.submitted=!1,App.notifyError(e.message)))}"edit"!=this.action||o.empty(this.batiment)||axios.put("batiments/"+this.batiment.idBatiment,e).then(t=>(this.$emit("batimentUpdated",{...e,idBatiment:this.batiment.idBatiment}),this.submitted=!1,App.notifySuccess(t.message))).catch(e=>(this.submitted=!1,App.notifyError(e.message)))}}},l=n,r=i("2877"),c=Object(r["a"])(l,s,a,!1,null,null,null);t["a"]=c.exports},"5ad6":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card d-flex flex-row justify-justify-content-start align-items-start"},[i("a",{staticClass:"d-flex card-img",attrs:{href:"#editLayoutItem","data-toggle":"modal","data-target":"#editLayoutItem"}},[i("img",{staticClass:"list-thumbnail responsive border-0",staticStyle:{height:"10em"},attrs:{src:e.depense.photo||"/img/depenseImage.jpg",alt:""}})]),i("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content"},[i("div",{staticClass:"card-body align-self-center d-flex flex-column justify-content-between min-width-zero align-items-md-center"},[i("div",{staticClass:"list-item-heading mb-1 truncate w-100 w-xs-100",attrs:{href:"#editLayoutItem","data-toggle":"modal","data-target":"#editLayoutItem"}},[i("h5",{staticClass:"text-red"},[e._v(e._s(e.php.ucfirst(e.depense.motif.toLowerCase())))]),i("div",{staticClass:"d-flex"},[i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Montant de la dépense",expression:"'Montant de la dépense'",modifiers:{bottom:!0}}],staticClass:"text-muted small date mr-3"},[i("i",{staticClass:"fa fa-dollar-sign"}),e._v(" "+e._s(e.depense.montant)+" F")]),i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Date de l'opération",expression:"'Date de l\\'opération'",modifiers:{bottom:!0}}],staticClass:"text-muted small date ml-3"},[i("i",{staticClass:"far fa-calendar-alt"}),e._v(" "+e._s(e.$dayjs(e.depense.dateDepense).format("DD MMMM YYYY"))+" ")])]),i("div",{staticClass:"w-100"},[e.depense.etatDepense?i("span",{staticClass:"badge badge-pill badge-success"}):i("span",{staticClass:"badge badge-danger small"},[e._v("Non traitée")])])]),i("div",{staticClass:"card-content w-100"},[i("hr"),0==e.source?i("div",[null!==e.depense.cite?i("div",{staticClass:"text-muted w-100 my-1"},[e._m(0),i("span",[e._v("Cité :"+e._s(e.depense.cite.nomCite)+" ")])]):e._e(),null!==e.depense.batiment?i("div",{staticClass:"text-muted w-100 my-1"},[e._m(1),i("span",[e._v("Batiment :"+e._s(e.depense.batiment.nomBatiment)+" ")])]):e._e(),null!==e.depense.logement?i("div",{staticClass:"text-muted w-100 my-1"},[e._m(2),i("span",[e._v("Logement :"+e._s(e.depense.logement.refLogement)+" ")])]):e._e()]):e._e(),e.depense.observation?i("div",{staticClass:"jumbotron pt-5 pb-5 px-3 my-0"},[i("p",{staticClass:"text-muted text-small"},[e._v(e._s(e.depense.observation))])]):e._e()])]),i("div",{staticClass:"list-actions"},[e.isSub?e._e():i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[i("i",{staticClass:"ik ik-eye"})]),e.isSub?i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.accessTo.apply(null,arguments)}}},[i("i",{staticClass:"ik ik-link"})]):e._e(),e.isSub?e._e():i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("makeUpdate",e.depense)}}},[i("i",{staticClass:"ik ik-edit-2"})]),i("a",{staticClass:"list-delete",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.remove.apply(null,arguments)}}},[i("i",{staticClass:"ik ik-trash-2"})])])])])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"d-inline-block w-10 text-center"},[i("i",{staticClass:"fas fa-city"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"d-inline-block w-10 text-center"},[i("i",{staticClass:"fa fa-building"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"d-inline-block w-10 text-center"},[i("i",{staticClass:"fas fa-home"})])}];const o=i("5a6f");var n={props:{depense:{type:Object,required:!0},isSub:{type:Boolean,default:!1},source:{type:Number,default:0}},computed:{dateCreation(){const e=this.$date(this.depense.createdAt);return`Crée le ${e.format("dddd, DD MMMM YYYY")} à ${e.format("HH:mm")}`},php(){return o}},methods:{showDetails(){if(this.isSub)return!1;this.$emit("showDetails",this.depense)},accessTo(){$("#editLayoutItem").modal("hide"),this.$router.push({name:"depenses",query:{target:this.depense.idDepense}})},remove(){App.confirm(`Voullez vous vraiment supprimer la dépense " <b>${this.depense.motif}</b> " ?`,{confirm:()=>{axios.delete("depenses/"+this.depense.idDepense).then(e=>e.success?(this.$emit("deleted",this.depense.idDepense),App.notifySuccess(e.message)):App.notifyError(e.message))}})}}},l=n,r=i("2877"),c=Object(r["a"])(l,s,a,!1,null,null,null);t["a"]=c.exports},"5c21":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"shadow list-item list-item-grid"},[i("div",{staticClass:"card d-flex flex-row mb-3"},[i("a",{staticClass:"d-flex card-img",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[i("img",{staticClass:"list-thumbnail responsive border-0",staticStyle:{height:"10em"},attrs:{src:e.batiment.image||"/img/batiment.jpg",alt:""}}),e.isNew?i("span",{staticClass:"badge badge-pill badge-primary position-absolute badge-top-left"},[e._v("New")]):e._e()]),i("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content"},[i("div",{staticClass:"card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center"},[i("div",{staticClass:"text-center"},[i("h4",{staticClass:"text-red mt-0 truncate"},[e._v(e._s(e.batiment.nomBatiment))]),i("span",{staticClass:"d-inline-block text-muted"},[e._v("Reference: "),i("b",[e._v(e._s(e.batiment.refBatiment))])])]),e.isSub?i("p",{staticClass:"text-muted mt-3 mb-1 date w-15 w-xs-100 text-small"},[e._v(e._s(e.$date(e.batiment.createdAt).format("DD.MM.YYYY")))]):i("p",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:e.dateCreation,expression:"dateCreation",modifiers:{bottom:!0}}],staticClass:"mt-3 mb-1 text-muted text-small date w-15 w-xs-100"},[e._v(e._s(e.$date(e.batiment.createdAt).format("DD.MM.YYYY")))])]),i("div",{staticClass:"list-actions"},[e.isSub?e._e():i("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Détails",expression:"'Détails'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showDetails.apply(null,arguments)}}},[i("i",{staticClass:"ik ik-eye"})]),e.isSub?i("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Accéder aux détails",expression:"'Accéder aux détails'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.accessTo.apply(null,arguments)}}},[i("i",{staticClass:"ik ik-link"})]):e._e(),e.isSub?e._e():i("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Editer",expression:"'Editer'",modifiers:{bottom:!0}}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("makeUpdate",e.batiment)}}},[i("i",{staticClass:"ik ik-edit-2"})]),i("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Supprimer",expression:"'Supprimer'",modifiers:{bottom:!0}}],staticClass:"list-delete",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.remove.apply(null,arguments)}}},[i("i",{staticClass:"ik ik-trash-2"})])])])])])},a=[],o={props:{batiment:{type:Object,required:!0},isSub:{type:Boolean,default:!1}},computed:{dateCreation(){const e=this.$date(this.batiment.createdAt);return`Créée le ${e.format("dddd, DD MMMM YYYY")} à ${e.format("HH:mm")}`},isNew(){return dayjs().diff(this.batiment.createdAt,"week")<=1}},methods:{showDetails(){if(this.isSub)return!1;this.$emit("showDetails",this.batiment)},accessTo(){$("#editLayoutItem").modal("hide"),this.$router.push({name:"batiments",query:{target:this.batiment.idBatiment}})},remove(){App.confirm(`Voullez vous vraiment supprimer le batiment " <b>${this.batiment.nomBatiment}</b> " ?`,{confirm:()=>{axios.delete("batiments/"+this.batiment.idBatiment).then(e=>e.success?(this.$emit("deleted",this.batiment.idBatiment),App.notifySuccess(e.message)):App.notifyError(e.message)).catch(e=>{App.notifyError(e.message)})}})}}},n=o,l=i("2877"),r=Object(l["a"])(n,s,a,!1,null,null,null);t["a"]=r.exports},a474:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-overlay",{attrs:{show:e.showOverlayP,rounded:"sm"}},[i("b-row",[i("b-col",[i("b-form-group",{attrs:{label:"Montant",description:"à combien s'élève la dépense éffectuée?"}},[i("b-form-input",{attrs:{placeholder:"Ex: 45000",type:"number",trim:""},model:{value:e.depense.montant,callback:function(t){e.$set(e.depense,"montant",t)},expression:"depense.montant"}})],1)],1),i("b-col",[i("b-form-group",{attrs:{label:"Date à laquelle la dépense a été éffectuée"}},[i("date-picker",{staticClass:"w-100",attrs:{placeholder:"Selectionnez une date",format:"dddd, DD MMMM YYYY",valueType:"YYYY-MM-DD",clearable:!1},model:{value:e.depense.date,callback:function(t){e.$set(e.depense,"date",t)},expression:"depense.date"}})],1)],1)],1),i("b-row",[i("b-col",[i("b-form-group",{attrs:{label:"Motif",description:"Pourquoi avez-vous éffectué cette dépense ?"}},[i("b-form-input",{attrs:{placeholder:"Ex: Replacement ampoules cassées",trim:""},model:{value:e.depense.motif,callback:function(t){e.$set(e.depense,"motif",t)},expression:"depense.motif"}})],1)],1),i("b-col",[i("b-form-group",{attrs:{label:"responsable",description:"Qui est celui qui a déclaré la dépense?"}},[i("b-form-input",{attrs:{placeholder:"Ex: Pedro",trim:""},model:{value:e.depense.responsable,callback:function(t){e.$set(e.depense,"responsable",t)},expression:"depense.responsable"}})],1)],1)],1),i("b-row",[i("b-col",{attrs:{cols:"7"}},[i("b-form-group",{attrs:{label:"observations"}},[i("b-form-textarea",{staticClass:"mb-2",attrs:{placeholder:"C'est ici que vou pouvez décrire ce qui a engendré la dépense",rows:"7"},model:{value:e.depense.observation,callback:function(t){e.$set(e.depense,"observation",t)},expression:"depense.observation"}})],1)],1),i("b-col",{attrs:{cols:"5"}},[i("b-form-group",{attrs:{label:"joindre une photo"}},[i("img-inputer",{attrs:{theme:"light",size:"xl","bottom-text":"déposez le fichier ici ou cliquez pour modifier",icon:"img",placeholder:"joindre recu dépense"},on:{onChange:e.onrecuLoad},model:{value:e.depense.photo,callback:function(t){e.$set(e.depense,"photo",t)},expression:"depense.photo"}})],1)],1)],1),i("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[i("b-row",[i("b-col",[i("b-form-group",{attrs:{label:"Votre dépense concerne"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.ariaDescribedby;return[i("b-form-radio-group",{attrs:{id:"radio-slots",options:e.options,"aria-describedby":s,name:"radio-options-slots",disabled:e.disableState},on:{change:e.setAction},model:{value:e.commandeAction,callback:function(t){e.commandeAction=t},expression:"commandeAction"}})]}}])})],1),i("b-col",[i("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[e.showSelectCite?i("div",{staticClass:"form-group"},[i("label",[e._v("Cité concernée")]),i("v-select",{class:{disabled:1==e.disabled},attrs:{label:"nomCite",options:e.cites},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1):e._e(),e.showSelectBatiment?i("div",{staticClass:"form-group"},[i("label",[e._v("Batiment concerné")]),i("v-select",{class:{disabled:1==e.disabled},attrs:{label:"nomBatiment",options:e.batiments},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1):e._e(),e.showSelectLogement?i("div",{staticClass:"form-group"},[i("label",[e._v("Logement concerné")]),i("v-select",{class:{disabled:1==e.disabled},attrs:{label:"refLogement",options:e.logements},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1):e._e()])],1)],1),i("hr"),i("div",{staticClass:"float-right"},["2"==e.provenance?i("b-button",{staticClass:"mr-1",on:{click:function(t){return t.preventDefault(),e.$emit("cancel")}}},[e._v("Annuler")]):e._e(),i("b-button",{attrs:{variant:"danger"},on:{click:function(t){return t.preventDefault(),e.submitModal.apply(null,arguments)}}},[e._v("Valider")])],1)],1)],1)},a=[],o=i("ec45"),n=(i("411c"),i("0edd"),i("2c43")),l=i("2b0e"),r=i("657c");i("2bd9");const c=i("5a6f");l["default"].component("ImgInputer",r["a"]);var d={name:"depense-form",data:()=>({disabled:!1,disableState:!1,options:[{text:"une cité",value:"cite"},{text:"un batiment",value:"batiment"},{text:"un logement",value:"logement"}],depense:{montant:"",date:"",motif:"",responsable:"",obs:"",photo:""},id:"",commandeAction:"",showOverlay:!1,showOverlayP:!1,showSelectCite:!1,showSelectBatiment:!1,showSelectLogement:!1,sendForm:!1,cites:[],batiments:[],logements:[]}),components:{DatePicker:o["default"]},props:{cite:{type:Object},batiment:{type:Object},logement:{type:Object},action:{type:String,required:!0,default:"add"},provenance:{type:String,required:!0,default:"1"}},methods:{async onrecuLoad(e){const t=e;this.depense.photo=await this.getBase64(t)},async setAction(){if(this.showOverlay=!0,"cite"==this.commandeAction){this.showSelectCite=!0,this.showSelectBatiment=!1,this.showSelectLogement=!1;try{this.cites=await(await axios.get("cites").then(e=>e.result))}catch(e){console.log(e)}}if("batiment"==this.commandeAction){this.showSelectBatiment=!0,this.showSelectCite=!1,this.showSelectLogement=!1;try{this.batiments=await(await axios.get("batiments").then(e=>e.result))}catch(e){console.log(e)}}if("logement"==this.commandeAction){this.showSelectLogement=!0,this.showSelectCite=!1,this.showSelectBatiment=!1;try{this.logements=await(await axios.get("logements").then(e=>e.result))}catch(e){console.log(e)}}this.showOverlay=!1},resetModal(){this.depense={montant:"",date:"",motif:"",responsable:"",observation:""},"2"!=this.provenance&&(this.showSelectCite=!1,this.showSelectBatiment=!1,this.showSelectLogement=!1,this.id=null,this.commandeAction=""),setTimeout(()=>{this.$emit("closeDepenseModal")},500)},submitModal(e){return e.preventDefault(),c.empty(this.depense.montant)||c.empty(this.depense.motif)||c.empty(this.id)?App.error("Un montant, un motif et l'entité concernée par la dépense sont obligatoires"):""==this.depense.montant?App.error("Vous devez spécifier un montant"):""==this.depense.motif?App.error("Vous devez spécifier un motif"):""==this.id?App.error("Vous devez spécifier l'entité concernée par la dépense"):void("add"==this.action&&(this.showOverlayP=!0,this.showSelectLogement&&(console.log("dépense",this.depense,"id",this.id.idLogement),axios.post("/logements/"+this.id.idLogement+"/depenses",this.depense).then(e=>(this.resetModal(),this.showOverlayP=!1,this.$emit("depenseAdded",e.result),App.notifySuccess(e.message))).catch(e=>{this.showOverlayP=!1,n["a"].error(e.message)})),this.showSelectCite&&axios.post("/cites/"+this.id.idCite+"/depenses",this.depense).then(e=>(this.resetModal(),this.showOverlayP=!1,this.$emit("depenseAdded",e.result),App.notifySuccess(e.message))).catch(e=>{this.showOverlayP=!1,n["a"].error(e.message)}),this.showSelectBatiment&&axios.post("/batiments/"+this.id.idBatiment+"/depenses",this.depense).then(e=>(this.resetModal(),this.showOverlayP=!1,this.$emit("depenseAdded",e.result),App.notifySuccess(e.message))).catch(e=>{this.showOverlayP=!1,n["a"].error(e.message)})))},getBase64(e){return new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>i(e)})}},mounted(){null!=this.cite&&(this.commandeAction="cite",this.showSelectCite=!0,this.id=this.cite,this.disabled=!0,this.disableState=!0),null!=this.batiment&&(this.commandeAction="batiment",this.showSelectBatiment=!0,this.id=this.batiment,this.disabled=!0,this.disableState=!0),null!=this.logement&&(this.commandeAction="logement",this.showSelectLogement=!0,this.id=this.logement,this.disabled=!0,this.disableState=!0)}},m=d,p=(i("287a"),i("2877")),u=Object(p["a"])(m,s,a,!1,null,"47a744a2",null);t["a"]=u.exports},fb87:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-sm d-inline-block float-md-left mr-1 mb-1 align-top"},[i("form",{attrs:{action:"",onSubmit:"return false"}},[i("b-form-input",{staticStyle:{height:"40px",width:"350px","border-radius":"5px"},attrs:{type:"text",placeholder:e.placeholder},on:{input:function(t){e.$emit("input",t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}),e._m(0)],1)])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"btn btn-icon",staticStyle:{height:"40px",width:"50px"},attrs:{type:"submit"}},[i("i",{staticClass:"ik ik-search"})])}],o={name:"SearchForm",props:{placeholder:{type:String,default:"Rechercher..."},value:{default:null}},data:()=>({val:null}),mounted:()=>{console.log("ldldldld:  this.value"),console.log(JSON.parse(JSON.stringify((void 0).value)))}},n=o,l=i("2877"),r=Object(l["a"])(n,s,a,!1,null,"394c7419",null);t["a"]=r.exports}}]);
//# sourceMappingURL=chunk-06775db1.b164db9a.js.map