{"version":3,"sources":["webpack:///./src/views/patrimoine/patrimoine.vue?ce3a","webpack:///src/views/patrimoine/patrimoine.vue","webpack:///./src/views/patrimoine/patrimoine.vue?dcbc","webpack:///./src/views/patrimoine/patrimoine.vue","webpack:///./src/views/patrimoine/Cites.vue?d789","webpack:///./src/components/_patrimoine/Cite.vue?8f47","webpack:///src/components/_patrimoine/Cite.vue","webpack:///./src/components/_patrimoine/Cite.vue?6a3a","webpack:///./src/components/_patrimoine/Cite.vue","webpack:///./src/components/_patrimoine/DetailsCite.vue?d7a4","webpack:///src/components/_patrimoine/DetailsCite.vue","webpack:///./src/components/_patrimoine/DetailsCite.vue?449e","webpack:///./src/components/_patrimoine/DetailsCite.vue","webpack:///src/views/patrimoine/Cites.vue","webpack:///./src/views/patrimoine/Cites.vue?cb7c","webpack:///./src/views/patrimoine/Cites.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","label","route","directives","name","rawName","value","path","expression","staticRenderFns","components","Cites","data","getPath","methods","$route","replace","component","staticClass","model","callback","$$v","search","on","modal","action","$bvModal","show","showOverlay","cites","length","_l","cite","i","key","idCite","updateCite","removeCite","showDetails","_v","offset","perPage","currentPage","page","limit","_s","nomCite","_m","source","changeBatiments","_e","ref","resetModal","submitModal","scopedSlots","_u","fn","proxy","ok","submitted","$event","$set","$getBase64","photo","preventDefault","apply","arguments","staticStyle","image","refCite","modifiers","$date","createdAt","format","$emit","remove","props","type","Object","required","isSub","Boolean","default","computed","day","dayjs","diff","App","confirm","axios","delete","then","response","success","notifySuccess","message","notifyError","class","section","batiments","batiment","idBatiment","removeBatiment","pushBatiment","depenses","depense","idDepense","removeDepense","provenance","addedDepense","php","Batiment","Depense","DepenseForm","FormBatiment","array_slice","makeRepeater","get","result","push","notif","filter","elt","commandeDepense","AppCite","DetailsCite","SearchForm","trueCites","nom","watch","empty","toLowerCase","includes","getCities","$refs","modalCite","file","reader","FileReader","onload","readAsDataURL","autoAddTarget","formCite","query","showModal","window","history","replaceState","location","href","split","setTimeout","$","e","map","bvModalEvt","error","assign","post","addNewCite","hide","alertError","catch","put","renameCite","exist"],"mappings":"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","file":"js/chunk-0ae779aa.8f595a69.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('page-description',{attrs:{\"path\":[{label: 'Mes cités', route: 'cites',}, {label: 'Mes batiments', route: 'batiments',}, {label: 'Mes logements', route: 'logements',}]}}),_c('Cites',{directives:[{name:\"show\",rawName:\"v-show\",value:( _vm.path == ''),expression:\" path == ''\"}]}),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div >\r\n        <page-description :path=\"[{label: 'Mes cités', route: 'cites',}, {label: 'Mes batiments', route: 'batiments',}, {label: 'Mes logements', route: 'logements',}]\" />\r\n        <Cites v-show=\" path == ''\" />\r\n        <router-view />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Cites from './Cites.vue'\r\nexport default {\r\n    components : {\r\n        Cites\r\n    },\r\n    data: () => ({\r\n        path: \"\"\r\n    }), \r\n    created() {\r\n        this.getPath()\r\n    },\r\n    mounted() {\r\n        this.getPath()\r\n    },\r\n    updated() {\r\n        this.getPath()\r\n    },\r\n    methods: {\r\n        getPath() {\r\n            this.path = this.$route.path.replace('/patrimoine', '')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./patrimoine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./patrimoine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./patrimoine.vue?vue&type=template&id=50fa3b76&\"\nimport script from \"./patrimoine.vue?vue&type=script&lang=js&\"\nexport * from \"./patrimoine.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"mb-2 clearfix\"},[_c('div',{staticClass:\"collapse d-md-block display-options\",attrs:{\"id\":\"displayOptions\"}},[_c('div',{staticClass:\"d-block d-md-inline-block\"},[_c('SearchForm',{model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('div',{staticClass:\"float-md-right\"},[_c('btnAdd',{attrs:{\"message\":\"Ajouter une cité\"},on:{\"click\":function () {_vm.modal.action = 'add'; _vm.$bvModal.show('modal-cite')}}})],1)])]),_c('div',{staticClass:\"separator mb-20\"}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[(!_vm.cites.length)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x\"}),_vm._v(\" \"),_c('br'),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucune cité enregistrée pour le moment\")])]):_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.items),function(cite,i){return _c('b-col',{key:cite.idCite || i,staticClass:\"animated flipInX mb-4\",attrs:{\"xl\":\"3\",\"lg\":\"4\",\"cols\":\"12\",\"sm\":\"6\"}},[_c('app-cite',{attrs:{\"cite\":cite},on:{\"makeUpdate\":_vm.updateCite,\"deleted\":_vm.removeCite,\"showDetails\":_vm.showDetails}})],1)}),1),_c('paginator',{attrs:{\"hr\":\"top\",\"offset\":_vm.offset,\"total\":_vm.cites.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}})],1)],1)]),(_vm.cite)?_c('div',{staticClass:\"modal fade edit-layout-modal\",attrs:{\"id\":\"editLayoutItem\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"editLayoutItemLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"editLayoutItemLabel\"}},[_vm._v(\"Détails de la cité : \"),_c('b',[_vm._v(_vm._s(_vm.cite.nomCite))]),_vm._v(\".\")]),_vm._m(0)]),_c('div',{staticClass:\"modal-body pt-2\"},[_c('details-cite',{attrs:{\"cite\":_vm.cite,\"source\":_vm.source},on:{\"batimentsChanged\":_vm.changeBatiments}})],1)])])]):_vm._e(),_c('b-modal',{ref:\"modalCite\",attrs:{\"id\":\"modal-cite\",\"size\":\"sm\"},on:{\"hidden\":_vm.resetModal,\"ok\":_vm.submitModal},scopedSlots:_vm._u([{key:\"modal-title\",fn:function(){return [(_vm.modal.action == 'add')?_c('span',[_vm._v(\"Ajouter une cité\")]):_vm._e(),(_vm.modal.action == 'edit')?_c('span',[_vm._v(\"Edition de la cité\")]):_vm._e()]},proxy:true},{key:\"modal-footer\",fn:function(ref){\nvar ok = ref.ok;\nreturn [_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"danger\",\"disabled\":_vm.modal.submitted},on:{\"click\":function($event){return ok()}}},[_vm._v(\"Valider \"),(_vm.modal.submitted)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1)]}}])},[_c('b-form-group',{attrs:{\"label\":\"Nom de la cité\"}},[_c('b-form-input',{attrs:{\"placeholder\":\"Ex: Cité de la paix\",\"trim\":\"\"},model:{value:(_vm.modal.nom),callback:function ($$v) {_vm.$set(_vm.modal, \"nom\", $$v)},expression:\"modal.nom\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Reference\"}},[_c('b-form-input',{attrs:{\"placeholder\":\"Ex: CP3\",\"trim\":\"\"},model:{value:(_vm.modal.ref),callback:function ($$v) {_vm.$set(_vm.modal, \"ref\", $$v)},expression:\"modal.ref\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Photo\"}},[_c('img-inputer',{attrs:{\"img-src\":_vm.$getBase64(_vm.modal.photo, false),\"placeholder\":\"Ajouter la photo de la cité\",\"theme\":\"light\",\"size\":\"xl\",\"bottom-text\":\"déposez le fichier ici ou cliquez pour modifier\",\"icon\":\"img\"},model:{value:(_vm.modal.photo),callback:function ($$v) {_vm.$set(_vm.modal, \"photo\", $$v)},expression:\"modal.photo\"}})],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\" list-item list-item-grid\"},[_c('div',{staticClass:\"card d-flex flex-row mb-3\"},[_c('a',{staticClass:\"d-flex card-img\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showDetails.apply(null, arguments)}}},[_c('img',{staticClass:\"list-thumbnail responsive border-0\",staticStyle:{\"height\":\"10em\"},attrs:{\"src\":_vm.cite.image || '/img/bgCity.jpg',\"alt\":\"\"}}),(_vm.isNew)?_c('span',{staticClass:\"badge badge-pill badge-primary position-absolute badge-top-left\"},[_vm._v(\"New\")]):_vm._e()]),_c('div',{staticClass:\"d-flex flex-grow-1 min-width-zero card-content\"},[_c('div',{staticClass:\"card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center\"},[_c('div',{staticClass:\"text-center\"},[_c('h4',{staticClass:\"text-red mt-0 truncate\"},[_vm._v(_vm._s(_vm.cite.nomCite))]),_c('span',{staticClass:\"d-inline-block text-muted\"},[_vm._v(\"Reference: \"),_c('b',[_vm._v(_vm._s(_vm.cite.refCite))])])]),_c('p',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.bottom\",value:(_vm.dateCreation),expression:\"dateCreation\",modifiers:{\"bottom\":true}}],staticClass:\"mt-3 mb-1 text-muted text-small date w-15 w-xs-100\"},[_vm._v(_vm._s(_vm.$date(_vm.cite.createdAt).format(\"DD.MM.YYYY\")))])]),_c('div',{staticClass:\"list-actions\"},[_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.bottom\",value:('Détails'),expression:\"'Détails'\",modifiers:{\"bottom\":true}}],attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showDetails.apply(null, arguments)}}},[_c('i',{staticClass:\"ik ik-eye\"})]),_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.bottom\",value:('Editer'),expression:\"'Editer'\",modifiers:{\"bottom\":true}}],attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.$emit('makeUpdate', _vm.cite)}}},[_c('i',{staticClass:\"ik ik-edit-2\"})]),_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.bottom\",value:('Supprimer'),expression:\"'Supprimer'\",modifiers:{\"bottom\":true}}],staticClass:\"list-delete\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.remove.apply(null, arguments)}}},[_c('i',{staticClass:\"ik ik-trash-2\"})])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\" list-item list-item-grid\">\r\n        <div class=\"card d-flex flex-row mb-3\">\r\n            <a class=\"d-flex card-img\" @click.prevent=\"showDetails\" href=\"#\">\r\n                <img :src=\"cite.image || '/img/bgCity.jpg'\" alt=\"\" style=\"height: 10em\" class=\"list-thumbnail responsive border-0\">\r\n                <span v-if=\"isNew\" class=\"badge badge-pill badge-primary position-absolute badge-top-left\">New</span>\r\n            </a>\r\n            <div class=\"d-flex flex-grow-1 min-width-zero card-content\">\r\n                <div class=\"card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center\">\r\n                    <div class=\"text-center\">\r\n                        <h4 class=\"text-red mt-0 truncate\">{{ cite.nomCite }}</h4>\r\n                        <span class=\"d-inline-block text-muted\">Reference: <b>{{ cite.refCite }}</b></span>\r\n                    </div>\r\n                    <p v-b-tooltip.bottom=\"dateCreation\" class=\"mt-3 mb-1 text-muted text-small date w-15 w-xs-100\">{{ $date(cite.createdAt).format(\"DD.MM.YYYY\") }}</p>\r\n                </div>\r\n                <div class=\"list-actions\">\r\n                    <a href=\"#\" @click.prevent=\"showDetails\" v-b-tooltip.bottom=\"'Détails'\"><i class=\"ik ik-eye\"></i></a>\r\n                    <a href=\"#\" @click.prevent=\"$emit('makeUpdate', cite)\" v-b-tooltip.bottom=\"'Editer'\"><i class=\"ik ik-edit-2\"></i></a>\r\n                    <a href=\"#\" @click.prevent=\"remove\" class=\"list-delete\" v-b-tooltip.bottom=\"'Supprimer'\"><i class=\"ik ik-trash-2\"></i></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        cite: { type: Object, required: true },\r\n        isSub: {type: Boolean, default: false}\r\n    },\r\n    computed: {\r\n        dateCreation() {\r\n            const day = this.$date(this.cite.createdAt)\r\n            return `Créée le ${day.format(\"dddd, DD MMMM YYYY\")} à ${day.format(\"HH:mm\")}`\r\n        },\r\n        /**\r\n         * Verifie si c'est une cité nouvellement ajoutée\r\n         */\r\n        isNew() {\r\n            return dayjs().diff(this.cite.createdAt, 'hour') <= 1\r\n        }\r\n    },\r\n    methods: {\r\n        /**\r\n         * Affiche la modale avec les details de l'element\r\n         */\r\n        showDetails() {\r\n            if (this.isSub) {\r\n                return false\r\n            }\r\n            this.$emit('showDetails', this.cite)\r\n        },\r\n        /**\r\n         * Suppression du cité\r\n         */\r\n        remove() {\r\n            App.confirm(`Voullez vous vraiment supprimer la cité \" <b>${this.cite.nomCite}</b> \" ?`, { confirm: () => {\r\n                axios.delete(`cites/${this.cite.idCite}`).then(response => {\r\n                    if (!response.success) {\r\n                        return App.notifyError(response.message)\r\n                    }\r\n                    this.$emit('deleted', this.cite.idCite)\r\n                    return App.notifySuccess(response.message)\r\n                })\r\n            }})\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cite.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cite.vue?vue&type=template&id=604050bb&\"\nimport script from \"./Cite.vue?vue&type=script&lang=js&\"\nexport * from \"./Cite.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{staticClass:\"nav nav-tabs\"},[_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'batiments'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'batiments'}}},[_vm._v(\"Batiments\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'stats'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'stats'}}},[_vm._v(\"Statistiques générales\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'add-batiments'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'add-batiments'}}},[_vm._v(\"Ajouter des bâtiments\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'depenses'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'depenses'}}},[_vm._v(\"Dépenses liées à la cité\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'add-depense'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'add-depense'}}},[_vm._v(\"Ajouter une dépense\")])])]),_c('div',{staticClass:\"tab-content mt-3\"},[_c('div',{staticClass:\"tab-pane fade show active\"},[(_vm.section == 'stats')?_c('div',{staticClass:\"jumbotron pt-10 pb-10\"},[_c('h3',{staticClass:\"m-0\"},[_vm._v(\"Statistiques générales\")]),_c('p',[_vm._v(\"This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.\")])]):_vm._e(),(_vm.section == 'batiments')?_c('div',[(!_vm.cite.batiments.length)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x float-left\"}),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucun bâtiment enregistré pour le moment\")])]):_c('div',{staticStyle:{\"height\":\"75vh\"}},[_c('paginator',{attrs:{\"no-control\":\"\",\"hr\":\"bottom\",\"total\":_vm.cite.batiments.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}}),_c('div',{staticStyle:{\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.items),function(batiment,i){return _c('b-col',{key:batiment.idBatiment || i,attrs:{\"cols\":\"6\"}},[_c('batiment',{attrs:{\"batiment\":batiment,\"is-sub\":\"\"},on:{\"deleted\":_vm.removeBatiment}})],1)}),1)],1)],1)],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.section == 'add-batiments'),expression:\"section == 'add-batiments'\"}]},[_c('form-batiment',{attrs:{\"cite\":_vm.cite},on:{\"batimentAdded\":_vm.pushBatiment}})],1),(_vm.section == 'depenses')?_c('div',[(!_vm.cite.depenses.length)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x float-left\"}),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucune dépense enregistrée pour le moment\")])]):_vm._e(),(_vm.cite.depenses.length>0)?_c('div',{staticStyle:{\"height\":\"75vh\"}},[_c('b-row',[_c('paginator',{attrs:{\"no-control\":\"\",\"hr\":\"bottom\",\"total\":_vm.cite.depenses.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}})],1),_c('div',{staticStyle:{\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.itemsDepenses),function(depense,i){return _c('b-col',{key:depense.idDepense || i,attrs:{\"cols\":\"6\"}},[_c('depense',{attrs:{\"depense\":depense,\"is-sub\":\"\"},on:{\"deleted\":_vm.removeDepense}})],1)}),1)],1)],1):_vm._e()],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.section == 'add-depense'),expression:\"section == 'add-depense'\"}]},[_c('depense-form',{attrs:{\"cite\":_vm.cite,\"provenance\":_vm.provenance,\"action\":_vm.action},on:{\"depenseAdded\":_vm.addedDepense}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <ul class=\"nav nav-tabs\">\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'batiments'}\" @click.prevent=\"section = 'batiments'\">Batiments</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'stats'}\" @click.prevent=\"section = 'stats'\">Statistiques générales</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'add-batiments'}\" @click.prevent=\"section = 'add-batiments'\">Ajouter des bâtiments</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'depenses'}\" @click.prevent=\"section = 'depenses'\">Dépenses liées à la cité</a></li>\r\n             <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'add-depense'}\" @click.prevent=\"section = 'add-depense'\">Ajouter une dépense</a></li>\r\n        </ul>\r\n        <div class=\"tab-content mt-3\">\r\n            <div class=\"tab-pane fade show active\">\r\n                <div v-if=\"section == 'stats'\" class=\"jumbotron pt-10 pb-10\">\r\n                    <h3 class=\"m-0\">Statistiques générales</h3>\r\n                    <p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>\r\n                </div>\r\n                <div v-if=\"section == 'batiments'\">\r\n                    <b-alert variant=\"info\" show v-if=\"!cite.batiments.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x float-left\"></i> \r\n                        <span class=\"h4 d-inline-flex ml-2\">Aucun bâtiment enregistré pour le moment</span>\r\n                    </b-alert>   \r\n                    <div v-else style=\"height: 75vh;\">\r\n                        <paginator no-control hr=\"bottom\" :total=\"cite.batiments.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />                   \r\n                        <div style=\"height: 90%; overflow-y: auto; overflow-x: hidden\">\r\n                            <b-row class=\"layout-wrap\">\r\n                                <b-col v-for=\"(batiment, i) in items\" :key=\"batiment.idBatiment || i\" cols=\"6\">\r\n                                    <batiment @deleted=\"removeBatiment\" :batiment=\"batiment\" is-sub />\r\n                                </b-col>\r\n                            </b-row>    \r\n                        </div> \r\n                    </div>       \r\n                </div> \r\n                <div v-show=\"section == 'add-batiments'\">\r\n                    <form-batiment :cite=\"cite\" @batimentAdded=\"pushBatiment\"  />\r\n                </div>\r\n                <div v-if=\"section == 'depenses'\">\r\n                    <b-alert variant=\"info\" show v-if=\"!cite.depenses.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x float-left\"></i> \r\n                        <span class=\"h4 d-inline-flex ml-2\">Aucune dépense enregistrée pour le moment</span>\r\n                    </b-alert>   \r\n                    <div v-if=\"cite.depenses.length>0\" style=\"height: 75vh;\">\r\n                        <b-row>\r\n                            <paginator no-control hr=\"bottom\" :total=\"cite.depenses.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />   \r\n                        </b-row>   \r\n                        <!--<paginator no-control hr=\"bottom\" :total=\"cite.depenses.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />-->                   \r\n                        <div style=\"height: 90%; overflow-y: auto; overflow-x: hidden\">\r\n                            <b-row class=\"layout-wrap\">\r\n                                <b-col v-for=\"(depense, i) in itemsDepenses\" :key=\"depense.idDepense || i\" cols=\"6\">\r\n                                    <depense @deleted=\"removeDepense\" :depense=\"depense\" is-sub />\r\n                                </b-col>\r\n                            </b-row>    \r\n                        </div> \r\n                    </div>  \r\n                </div> \r\n                 <div v-show=\"section == 'add-depense'\">\r\n                    <depense-form :cite=\"cite\"  @depenseAdded=\"addedDepense\" :provenance=\"provenance\" :action=\"action\"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Batiment from '@/components/_patrimoine/Batiment.vue'\r\nimport Depense from \"@/views/gestion-immobiliere/depenses/Depense.vue\";\r\nimport DepenseForm from \"@/views/gestion-immobiliere/depenses/DepenseForm.vue\";\r\nimport FormBatiment from './FormBatiment.vue';\r\nconst php = require('phpjs')\r\n\r\nexport default {\r\n    props: {\r\n        cite: {type: Object, required: true}\r\n    },\r\n    components: {\r\n        Batiment,\r\n        Depense,\r\n        DepenseForm,\r\n        FormBatiment\r\n    },\r\n    computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() {\r\n            return php.array_slice(this.cite.batiments || [], this.offset, this.perPage)\r\n        },\r\n        itemsDepenses(){\r\n             return php.array_slice(this.cite.depenses || [], this.offset, this.perPage)\r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        }\r\n    },\r\n    data: () => ({\r\n        section: 'add-batiments',\r\n        submitted: false,\r\n\r\n        currentPage: 1,\r\n        perPage: 10,\r\n        source:\"2\",\r\n        provenance:\"2\",\r\n        \r\n        //données manipulées pour l'ajout d'une dépense\r\n        action:\"add\"\r\n    }),\r\n   mounted() {\r\n        this.section =  'batiments'\r\n        this.makeRepeater()\r\n    },\r\n    methods: {\r\n         /**\r\n         * réponse à l'évènement d'ajout d'une dépense\r\n         * dans le détail de la cité, la réponse consiste juste à mettre à jour la liste des dépenses de la cité\r\n         */\r\n         addedDepense() {\r\n            axios.get(`cites/${this.cite.idCite}/depenses`).then(response => response.result || []).then(depenses => {\r\n                this.cite.depenses = depenses\r\n                this.section = 'depenses'\r\n            })\r\n        },\r\n\r\n        pushBatiment(batiments) {\r\n            this.cite.batiments.push(...batiments)\r\n            this.$emit('batimentsChanged', this.cite.batiments)\r\n            this.section = 'batiments'\r\n            if (!batiments.length) {\r\n                return App.notif('Aucun batiment rajouté', {})\r\n            }\r\n        },\r\n        /**\r\n         * Retire un batiment\r\n         */\r\n        removeBatiment(idBatiment) {\r\n            this.cite.batiments = this.cite.batiments.filter(elt => elt.idBatiment != idBatiment)\r\n            this.$emit('batimentsChanged', this.cite.batiments)\r\n        },\r\n         /**\r\n         * supprimer une dépense\r\n         * ceci à pour but de  la marquer comme traitée en back\r\n         */\r\n        removeDepense(idDepense) {\r\n            this.cite.depenses = this.cite.depenses.filter(elt => elt.idDepense != idDepense)\r\n            this.$emit('depensesChanged', this.cite.depenses)\r\n        },\r\n        /**\r\n         *traitement de l'appel à l'ajout d'une dépense dans le détail de la cité\r\n         */\r\n        defineDepense(){\r\n            this.action=\"add\",\r\n            this.commandeDepense=true;\r\n        },\r\n        onCloseSet() {\r\n            this.commandeDepense = false;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsCite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsCite.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailsCite.vue?vue&type=template&id=f4f7fb9c&\"\nimport script from \"./DetailsCite.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailsCite.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"mb-2 clearfix\">\r\n                    <div class=\"collapse d-md-block display-options\" id=\"displayOptions\">               \r\n                        <div class=\"d-block d-md-inline-block\">\r\n                            <SearchForm v-model=\"search\" />\r\n                        </div>\r\n                        <div class=\"float-md-right\">\r\n                            <btnAdd  message=\"Ajouter une cité\" @click=\"() => {modal.action = 'add'; $bvModal.show('modal-cite')}\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"separator mb-20\"></div>\r\n                <b-overlay :show=\"showOverlay\" rounded=\"sm\">\r\n                    <b-alert variant=\"info\" class=\"text-center\" show v-if=\"!cites.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x\"></i> <br>\r\n                        <span class=\"h4 d-inline-flex ml-2\">Aucune cité enregistrée pour le moment</span>\r\n                    </b-alert> \r\n                    <b-row v-else class=\"layout-wrap\">\r\n                        <b-col v-for=\"(cite, i) in items\" :key=\"cite.idCite || i\" xl=\"3\" lg=\"4\" cols=\"12\" sm=\"6\" class=\"animated flipInX mb-4\">\r\n                            <app-cite @makeUpdate=\"updateCite\" @deleted=\"removeCite\" :cite=\"cite\" @showDetails=\"showDetails\" />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <paginator hr=\"top\" :offset=\"offset\" :total=\"cites.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />                   \r\n                </b-overlay>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- MODALE POUR AFFICHER LES DETAILS D'UNE CITE -->\r\n        <div v-if=\"cite\" class=\"modal fade edit-layout-modal\" id=\"editLayoutItem\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"editLayoutItemLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"editLayoutItemLabel\">Détails de la cité : <b>{{ cite.nomCite }}</b>.</h5>\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\r\n                    </div>\r\n                    <div class=\"modal-body pt-2\">\r\n                        <details-cite @batimentsChanged=\"changeBatiments\" :cite=\"cite\" :source=\"source\"/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- MODALE POUR AJOUTER/MODIFIER UNE CITE -->\r\n        <b-modal id=\"modal-cite\" size=\"sm\" @hidden=\"resetModal\" @ok=\"submitModal\" ref=\"modalCite\">\r\n            <template #modal-title>\r\n                <span v-if=\"modal.action == 'add'\">Ajouter une cité</span>\r\n                <span v-if=\"modal.action == 'edit'\">Edition de la cité</span>\r\n            </template>\r\n            <template #modal-footer=\"{ ok }\">\r\n                <b-button size=\"sm\" variant=\"danger\" @click=\"ok()\" :disabled=\"modal.submitted\">Valider <b-spinner v-if=\"modal.submitted\" small /></b-button>\r\n            </template>\r\n            <b-form-group label=\"Nom de la cité\">\r\n                <b-form-input v-model=\"modal.nom\" placeholder=\"Ex: Cité de la paix\" trim></b-form-input>\r\n            </b-form-group>\r\n            <b-form-group label=\"Reference\">\r\n                <b-form-input v-model=\"modal.ref\" placeholder=\"Ex: CP3\" trim></b-form-input>\r\n            </b-form-group>\r\n            <b-form-group label=\"Photo\">\r\n                <img-inputer v-model=\"modal.photo\" :img-src=\"$getBase64(modal.photo, false)\" placeholder=\"Ajouter la photo de la cité\" theme=\"light\" size=\"xl\" bottom-text=\"déposez le fichier ici ou cliquez pour modifier\" icon=\"img\"  />\r\n            </b-form-group>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// Je renome le composant Cite en AppCite parcequ'il existe une balise <cite>. Du coup le composant n'allait pas etre prise en compte\r\nimport AppCite from '@/components/_patrimoine/Cite.vue'\r\nimport DetailsCite from '@/components/_patrimoine/DetailsCite.vue'\r\nimport SearchForm from \"@/components/parts/SearchForm.vue\";\r\n\r\nconst php  = require ( 'phpjs' ) ; \r\n\r\nexport default {\r\n    name: 'cites',\r\n    components: {\r\n        AppCite,\r\n        DetailsCite,\r\n        SearchForm,\r\n    },\r\n    computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() { \r\n            return php.array_slice(this.cites, this.offset, this.perPage) \r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        }\r\n    },\r\n    data: () => ({\r\n        cites: [],\r\n        trueCites: [],\r\n        showOverlay: true,\r\n        cite: null,\r\n        currentPage: 1,\r\n        perPage: 10,\r\n        search: null,\r\n        modal: {\r\n            action: '', submitted: false,\r\n            nom: '', ref: '', idCite: '', photo: ''\r\n        },\r\n        source:0\r\n\r\n    }),\r\n    watch: {\r\n        search(value) {\r\n            if (!php.empty(value)) {\r\n                this.cites = this.trueCites.filter(elt => elt.nomCite.toLowerCase().includes(value.toLowerCase()))\r\n            }\r\n            else {\r\n                this.cites = this.trueCites\r\n            }\r\n        }\r\n    },\r\n    beforeMount() {\r\n        this.getCities()\r\n    },\r\n    mounted(){\r\n        // this.autoAddTarget();\r\n    },\r\n    methods: {\r\n        showModal(){\r\n            this.modal.action='add'\r\n            this.$refs.modalCite.show(\"modal-cite\");\r\n        },\r\n\r\n        /**\r\n         * Selection de l'image illustrative de la cite\r\n         */\r\n        onFileSelected(file) {\r\n            let reader = new FileReader(),\r\n                    modal = this.modal\r\n                reader.onload = function() {\r\n                    modal.photo = this.result\r\n                }\r\n                reader.readAsDataURL(file)\r\n        },\r\n\r\n        /**\r\n         * Recupere les cites au backend\r\n         */\r\n        getCities() {\r\n            axios.get('cites').then(response => response.result || []).then(cites => {\r\n                this.cites = this.trueCites = cites\r\n                this.autoAddTarget()\r\n                this.showOverlay = false\r\n\r\n            })\r\n        },\r\n\r\n        /**\r\n         * Affiche le modal de création d'une cité directement au chargement de la page\r\n         * ceci est utilisé lorsqu'on est arrivé ici en provenant de la homepage\r\n         */\r\n        autoAddTarget() {\r\n            const formCite = this.$route.query.formCite || null;\r\n            if (formCite) {\r\n                 this.showModal()\r\n                window.history.replaceState(\r\n                    {},\r\n                    \"\",\r\n                    window.location.href.split(\"?\")[0]\r\n                );\r\n                \r\n            }\r\n        },\r\n\r\n        /**\r\n         * Affiche les details d'une cite\r\n         * \r\n         * @param {Object} cite\r\n         */\r\n        showDetails(cite) {\r\n            this.cite = cite\r\n            this.source=2\r\n            setTimeout(() => {\r\n                $('#editLayoutItem').modal('show')\r\n                $('#editLayoutItem').on('hide.bs.modal', (e) => {\r\n                    this.cite = null\r\n                })\r\n                $('#editLayoutItem').on('hidden.bs.modal', (e) => {\r\n                    this.cite = null\r\n                })\r\n            }, 100)          \r\n        },\r\n\r\n        /**\r\n         * Raffraichi la liste des batiments de la cité active\r\n         * \r\n         * @param {Batiment[]} batiments\r\n         */\r\n        changeBatiments(batiments) {\r\n            this.cites = this.cites.map(elt => {\r\n                if (elt.idCite != this.cite.idCite) {\r\n                    return elt\r\n                }\r\n                return {\r\n                    ...elt,\r\n                    batiments\r\n                }\r\n            })\r\n            this.cite.batiments = batiments\r\n        },\r\n        /**\r\n         * Retire une cite\r\n         * \r\n         * @param {Integer} idCite\r\n         */\r\n        removeCite(idCite) {\r\n            this.cites = this.cites.filter(elt => elt.idCite != idCite)\r\n            this.trueCites = this.trueCites.filter(elt => elt.idCite != idCite)\r\n        },\r\n\r\n        resetModal() {\r\n            this.modal = {\r\n                action: '', submitted: false,\r\n                nom: '', ref: '', idCite: '', photo: ''\r\n            }\r\n        },\r\n        /**\r\n         * Validation du formulaire d'ajout/modification de la cite\r\n         */\r\n        async submitModal(bvModalEvt) {\r\n            bvModalEvt.preventDefault()\r\n            if (php.empty(this.modal.nom) || php.empty(this.modal.ref)) {\r\n                return App.error('Veuillez remplir tous les champs du formulaire')\r\n            }\r\n            this.modal.submitted = true\r\n            const data = Object.assign({}, this.modal, {\r\n                photo: await this.$getBase64(this.modal.photo)\r\n            })\r\n\r\n            if (this.modal.action == 'add') {\r\n                axios.post('cites', data).then(response => {\r\n                    this.modal.submitted = false\r\n\r\n                    if (!response.success) {\r\n                        return App.alertError(response.message)\r\n                    }\r\n                    this.cites = this.addNewCite(this.cites, response.result)\r\n                    this.trueCites = this.addNewCite(this.trueCites, response.result)\r\n                    this.$bvModal.hide('modal-cite')\r\n                    return App.notifySuccess(response.message)\r\n                }).catch(error => {\r\n                    this.modal.submitted = false \r\n                    return App.alertError(error.message)\r\n                })\r\n            }\r\n            if (this.modal.action == 'edit') {\r\n                axios.put(`cites/${this.modal.idCite}`, data).then(response => {\r\n                    this.modal.submitted = false\r\n\r\n                    if (!response.success) {\r\n                        return App.alertError(response.message)\r\n                    }\r\n                    this.cites = this.renameCite(this.cites, data)\r\n                    this.trueCites = this.renameCite(this.trueCites, data)\r\n                    this.$bvModal.hide('modal-cite')\r\n                    return App.notifySuccess(response.message)\r\n                }).catch(error => {\r\n                    this.modal.submitted = false \r\n                    return App.alertError(error.message)\r\n                })\r\n            }\r\n        },\r\n        updateCite(cite) {\r\n            this.modal = {\r\n                action: 'edit',\r\n                nom: cite.nomCite, ref: cite.refCite, idCite: cite.idCite, photo: cite.image\r\n            }\r\n            this.$bvModal.show('modal-cite')\r\n        },\r\n\r\n        addNewCite(cites, cite) {\r\n            let exist = false\r\n            for (let i = 0; i < cites.length; i++) {\r\n                if (cites[i].idCite == cite.idCite) {\r\n                    exist = true \r\n                    break\r\n                }\r\n            }\r\n            if (!exist) {\r\n                cites.push(cite)\r\n            }\r\n            return cites\r\n        },\r\n         /**\r\n         * Modifie les info de la cite dans la pile des cites\r\n         */\r\n        renameCite(cites, cite) {\r\n            return cites.map(elt => {\r\n                if (elt.idCite == cite.idCite) {\r\n                    elt.nomCite = cite.nom\r\n                    elt.refCite = cite.ref\r\n                    elt.image = cite.photo\r\n                }\r\n                return elt\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cites.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cites.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cites.vue?vue&type=template&id=ffbe928e&\"\nimport script from \"./Cites.vue?vue&type=script&lang=js&\"\nexport * from \"./Cites.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}