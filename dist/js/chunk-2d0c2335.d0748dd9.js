(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c2335"],{"48fa":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("page-description",{attrs:{title:"Occupation",description:"Details d'occupation",icon:"star",path:["Gestion Immobilière","Mes Occupations"]}}),e("div",{staticClass:"card-deck"},[e("div",{staticClass:"card col-3"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"text-center"},[e("h4",{staticClass:"card-title"},[t._v("Occupation n° "+t._s(t.occupation.idOccupation))]),null==t.occupation.dateFin?e("b-badge",{attrs:{variant:"success"}},[t._v("Bail en cours")]):e("b-badge",{attrs:{variant:"danger"}},[t._v("Bail terminé le "+t._s(t.$date(t.occupation.dateFin).format("DD MMMM YYYY")))])],1)]),e("div",{staticClass:"card-body pt-0"},[t._m(0),e("span",{staticClass:"d-inline-block w-100 mb-1 text-center"},[t._v(t._s(t.occupation.logement.refLogement))]),e("span",{staticClass:"d-inline-block w-100 mb-1 text-center text-muted"},[t._v(t._s(t.occupation.logement.sousTypeLogement.libelleSousType))]),e("div",{staticClass:"jumbotron pt-10 pb-10 px-2"},[e("dl",{staticClass:"row text-muted"},[t._m(1),e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Plage de loyer",expression:"'Plage de loyer'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.logement.prixMin+"F")+" - "+t._s(t.occupation.logement.prixMax+"F"))]),t._m(2),e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Localisation",expression:"'Localisation'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.logement.adresse.ville+" "+t.occupation.logement.adresse.pays))]),t.occupation.logement.batiment?e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fa fa-building"})]):t._e(),t.occupation.logement.batiment?e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Batiment",expression:"'Batiment'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.logement.batiment.nomBatiment))]):t._e(),t.occupation.logement.batiment?e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fas fa-city"})]):t._e(),t.occupation.logement.batiment?e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Cité",expression:"'Cité'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.logement.batiment.cite.nomCite))]):t._e()]),e("b-button",{attrs:{to:{name:"logements",query:{target:t.occupation.logement.idLogement}},size:"sm",block:"",variant:"outline-secondary"}},[t._v("Voir les details")])],1),t._m(3),e("span",{staticClass:"d-inline-block w-100 mb-1 text-center"},[t._v(t._s(t.occupation.locataire.titre+" "+t.occupation.locataire.nomLocataire+" "+t.occupation.locataire.prenomLocataire))]),e("span",{staticClass:"d-inline-block w-100 mb-1 text-center text-muted"},[t._v(t._s(t.occupation.locataire.profession))]),e("div",{staticClass:"jumbotron pt-10 pb-10 px-2"},[e("dl",{staticClass:"row text-muted"},[t._m(4),e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Numéro de CNI",expression:"'Numéro de CNI'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.locataire.cniLocataire))]),t._m(5),e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Numéro de téléphone",expression:"'Numéro de téléphone'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.locataire.tel+" / "+t.occupation.locataire.tel2))]),t._m(6),e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Email",expression:"'Email'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.occupation.locataire.email+" / "+t.occupation.locataire.email2))]),t._m(7),e("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Date de naissance",expression:"'Date de naissance'"}],staticClass:"mt-1 col-10 truncate"},[t._v(t._s(t.$date(t.occupation.locataire.dateNaiss).format("DD MMMM YYYY")))])]),e("b-button",{attrs:{to:"#",size:"sm",block:"",variant:"outline-secondary"}},[t._v("Voir le dossier")])],1)])]),e("div",{staticClass:"card"},[t._m(8),e("div",{staticClass:"tab-content",attrs:{id:"pills-tabContent"}},[e("div",{staticClass:"tab-pane fade show active",attrs:{id:"generalites"}},[e("div",{staticClass:"card-body"},[e("b-row",[e("b-col",{staticClass:"mb-1",attrs:{cols:"12"}},[e("dl",{staticClass:"row text-muted"},[e("dd",{staticClass:"mt-1 col-4"},[t._v("Loyer")]),e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.occupation.loyerBase+" F"))]),e("dd",{staticClass:"mt-1 col-4"},[t._v("Mode de paiement")]),e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.occupation.modePaiement))]),e("dd",{staticClass:"mt-1 col-4"},[t._v("Facturation d'energie")]),e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.occupation.puEnergie+"F")+" par "+t._s("index"==t.occupation.modeEnergie?"kw":"mois"))]),e("dd",{staticClass:"mt-1 col-4"},[t._v("Facturation d'eau")]),e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.occupation.puEau+"F")+" par "),"index"==t.occupation.modeEau?e("span",[t._v("m"),e("sup",[t._v("3")])]):e("span",[t._v("mois")])]),e("dd",{staticClass:"mt-1 col-4"},[t._v("Date de debut du bail")]),e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.$date(t.occupation.dateDeb).format("dddd, DD MMMM YYYY")))]),t.occupation.dateFin?e("dd",{staticClass:"mt-1 col-4"},[t._v("Date de fin du bail")]):t._e(),t.occupation.dateFin?e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.$date(t.occupation.dateFin).format("dddd, DD MMMM YYYY")))]):t._e(),e("dd",{staticClass:"mt-1 col-4"},[t._v("Occupation créée le")]),e("dt",{staticClass:"mt-1 col-8"},[t._v(t._s(t.$date(t.occupation.createdAt).format("dddd, DD MMMM YYYY HH:mm")))])])])],1)],1)]),e("div",{staticClass:"tab-pane fade",attrs:{id:"indexes"}},[e("b-container",{staticClass:"my-3"},[e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"eau"==t.tab_indexe},attrs:{"data-toggle":"pill",href:"#"},on:{click:function(a){a.preventDefault(),t.tab_indexe="eau"}}},[t._v("Indexes d'eau")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"energie"==t.tab_indexe},attrs:{"data-toggle":"pill",href:"#"},on:{click:function(a){a.preventDefault(),t.tab_indexe="energie"}}},[t._v("Indexes d'électricité")])])]),e("div",{staticClass:"tab-content"},[e("div",{staticClass:"tab-pane fade show active mt-1"},[e("b-table",{attrs:{"sticky-header":"600px",striped:"",hover:"",responsive:"",items:t.indexes,fields:[{key:"mois",label:"Mois",sortable:!0},{key:"annees",label:"Année",sortable:!0},{key:"nouveau",label:"Indexe courant",sortable:!0},{key:"ancien",label:"Ancien indexe",sortable:!0},{key:"consommation",label:"Consommation",sortable:!0},{key:"montant",label:"Montant",sortable:!0},{key:"show_details",label:"Details"}]},scopedSlots:t._u([{key:"cell(mois)",fn:function(a){return[t._v(t._s(t.$dayjs(a.item.periode).format("MMMM")))]}},{key:"cell(annees)",fn:function(a){return[t._v(t._s(t.$dayjs(a.item.periode).format("YYYY")))]}},{key:"cell(consommation)",fn:function(a){return[t._v(t._s(a.item.nouveau-a.item.ancien))]}},{key:"cell(montant)",fn:function(a){return[t._v(" "+t._s(t._calcul_consommation_indexe(a.item,t.tab_indexe))+" F")]}},{key:"cell(show_details)",fn:function(a){return[e("b-form-checkbox",{on:{change:a.toggleDetails},model:{value:a.detailsShowing,callback:function(e){t.$set(a,"detailsShowing",e)},expression:"row.detailsShowing"}})]}},{key:"row-details",fn:function(a){return[e("b-card",{staticClass:"m-0"},[e("b-row",[e("b-col",[e("dl",{staticClass:"row text-muted"},[e("dd",{staticClass:"mt-1 col-5"},[t._v("Avance")]),e("dt",{staticClass:"mt-1 col-7"},[t._v(t._s(t.empty(a.item.avance)?"0 F":a.item.avance+" F"))]),e("dd",{staticClass:"mt-1 col-5"},[t._v("Reste")]),e("dt",{staticClass:"mt-1 col-7"},[t._v(t._s(t.empty(a.item.reste)?"0 F":a.item.reste+" F"))])])]),e("b-col",[e("dl",{staticClass:"row text-muted"},[e("dd",{staticClass:"mt-1 col-5"},[t._v("Statut")]),e("dt",{staticClass:"mt-1 col-7"},[t.empty(a.item.avance)?e("b-badge",{attrs:{variant:"danger"}},[t._v("Non payé")]):t._calcul_consommation_indexe(a.item,t.tab_indexe)>a.item.avance?e("b-badge",{attrs:{variant:"warning"}},[t._v("Avancé")]):e("b-badge",{attrs:{variant:"success"}},[t._v("Payé")])],1),e("dd",{staticClass:"mt-1 col-5"},[t._v("Date de paiement")]),e("dt",{staticClass:"mt-1 col-7"},[t._v(t._s(t.empty(a.item.datePaiement)?"Non disponible":t.$date(a.item.datePaiement).format("DDDD MMMM YYYY")))])])])],1)],1)]}}])})],1)])])],1),e("div",{staticClass:"tab-pane fade ",attrs:{id:"previous-month",role:"tabpanel","aria-labelledby":"pills-setting-tab"}})])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("hr",{staticClass:"w-25 bg-danger"}),t._v(" Logement "),e("hr",{staticClass:"w-25 bg-danger"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fa fa-dollar-sign"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fa fa-map-marker-alt"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("hr",{staticClass:"w-25 bg-danger"}),t._v(" Locataire "),e("hr",{staticClass:"w-25 bg-danger"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fa fa-id-card"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fa fa-phone"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("dd",{staticClass:"mt-1 col-1"},[e("i",{staticClass:"fas fa-calendar-alt"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"nav nav-pills custom-pills",attrs:{id:"pills-tab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{"data-toggle":"pill",href:"#generalites"}},[t._v("Généralités")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"pill",href:"#indexes"}},[t._v("Indexes")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"pill",href:"#charges"}},[t._v("Charges")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{"data-toggle":"pill",href:"#loyers"}},[t._v("Loyers")])])])}];const c=e("5a6f");var n={data:()=>({submitted:!1,occupation:{},tab_indexe:"eau"}),components:{},computed:{indexes(){return this.occupation.indexes.filter(t=>t.typeIndexe==this.tab_indexe).sort((t,a)=>this.$dayjs().diff(a.periode)-this.$dayjs().diff(t.periode))}},beforeMount(){axios.get("occupations/"+this.$route.params.id).then(t=>t.result||{}).then(t=>{this.occupation=t})},methods:{empty:t=>c.empty(t),_calcul_consommation_indexe(t,a){let e=this.occupation.modeEau,s=this.occupation.puEau,i=1;return"energie"==a&&(e=this.occupation.modeEnergie,s=this.occupation.puEnergie),"index"==e&&(i=t.nouveau-t.ancien),i*s}}},o=n,l=e("2877"),r=Object(l["a"])(o,s,i,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0c2335.d0748dd9.js.map