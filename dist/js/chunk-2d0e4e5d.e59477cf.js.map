{"version":3,"sources":["webpack:///./src/views/patrimoine/Batiments.vue?f709","webpack:///./src/components/_patrimoine/DetailsBatiment.vue?4c15","webpack:///src/components/_patrimoine/DetailsBatiment.vue","webpack:///./src/components/_patrimoine/DetailsBatiment.vue?b780","webpack:///./src/components/_patrimoine/DetailsBatiment.vue","webpack:///src/views/patrimoine/Batiments.vue","webpack:///./src/views/patrimoine/Batiments.vue?e9e9","webpack:///./src/views/patrimoine/Batiments.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","search","expression","on","action","$bvModal","show","showOverlay","batiments","length","_l","batiment","i","key","idBatiment","updateBatiment","removeBatiment","showDetails","_v","source","_e","offset","perPage","currentPage","page","limit","_s","nomBatiment","_m","changeLogements","ref","$event","scopedSlots","_u","fn","proxy","pushBatiment","editBatiment","staticRenderFns","class","section","preventDefault","logements","staticStyle","logement","idLogement","removeLogement","directives","name","rawName","addedLogement","depenses","depense","idDepense","removeDepense","provenance","addedDepense","php","props","type","Object","required","components","Logement","Depense","DepenseForm","AddLogement","computed","array_slice","data","submitted","commandeDepense","methods","axios","get","then","response","result","newDepense","unshift","filter","elt","$emit","component","DetailsBatiment","Batiment","FormBatiment","SearchForm","trueBatiments","watch","toLowerCase","empty","includes","getBatiments","autoDetailsTarget","autoAddTarget","error","formBatiment","$route","query","$refs","window","history","replaceState","location","href","split","target","setTimeout","$","modal","e","map","addNewBatiment","hide","renameBatiment","exist","push","nom","refBatiment","image","photo","idCite"],"mappings":"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","file":"js/chunk-2d0e4e5d.e59477cf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"mb-2 clearfix\"},[_c('div',{staticClass:\"collapse d-md-block display-options\",attrs:{\"id\":\"displayOptions\"}},[_c('div',{staticClass:\"d-block d-md-inline-block\"},[_c('SearchForm',{model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('div',{staticClass:\"float-md-right\"},[_c('btnAdd',{attrs:{\"message\":\"Ajouter un batiment\"},on:{\"click\":function () {_vm.action = 'add'; _vm.$bvModal.show('modal-batiment')}}})],1)])]),_c('div',{staticClass:\"separator mb-20\"}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[(!_vm.batiments.length)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x\"}),_vm._v(\" \"),_c('br'),(_vm.source == 1)?_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucun batiment enregistré pour le moment\")]):_vm._e(),(_vm.source == 2)?_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucun batiment trouvé\")]):_vm._e()]):_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.items),function(batiment,i){return _c('b-col',{key:batiment.idBatiment || i,staticClass:\"animated flipInX mb-4\",attrs:{\"xl\":\"3\",\"lg\":\"4\",\"cols\":\"12\",\"sm\":\"6\"}},[_c('batiment',{attrs:{\"batiment\":batiment},on:{\"makeUpdate\":_vm.updateBatiment,\"deleted\":_vm.removeBatiment,\"showDetails\":_vm.showDetails}})],1)}),1),_c('paginator',{attrs:{\"hr\":\"top\",\"offset\":_vm.offset,\"total\":_vm.batiments.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}})],1)],1)]),(_vm.batiment)?_c('div',{staticClass:\"modal fade edit-layout-modal\",attrs:{\"id\":\"editLayoutItem\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"editLayoutItemLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"editLayoutItemLabel\"}},[_vm._v(\"Détails du batiment : \"),_c('b',[_vm._v(_vm._s(_vm.batiment.nomBatiment))]),_vm._v(\".\")]),_vm._m(0)]),_c('div',{staticClass:\"modal-body pt-2\"},[_c('details-batiment',{attrs:{\"batiment\":_vm.batiment},on:{\"logementsChanged\":_vm.changeLogements}})],1)])])]):_vm._e(),_c('b-modal',{ref:\"modalBatiment\",attrs:{\"id\":\"modal-batiment\",\"size\":\"lg\",\"hide-footer\":\"\"},on:{\"hidden\":function($event){_vm.batiment = null}},scopedSlots:_vm._u([{key:\"modal-title\",fn:function(){return [(_vm.action == 'add')?_c('span',[_vm._v(\"Ajouter un batiment\")]):_vm._e(),(_vm.action == 'edit')?_c('span',[_vm._v(\"Edition du batiment\")]):_vm._e()]},proxy:true}])},[_c('form-batiment',{attrs:{\"action\":_vm.action,\"batiment\":_vm.batiment},on:{\"batimentAdded\":_vm.pushBatiment,\"batimentUpdated\":_vm.editBatiment}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{staticClass:\"nav nav-tabs\"},[_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'logements'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'logements'}}},[_vm._v(\"Logements\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'stats'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'stats'}}},[_vm._v(\"Statistiques générales\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'add-logement'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'add-logement'}}},[_vm._v(\"Ajouter un logement\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'depenses'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'depenses'}}},[_vm._v(\"Dépenses liées au batiment\")])]),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",class:{'active' : _vm.section == 'add-depense'},attrs:{\"data-toggle\":\"tab\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.section = 'add-depense'}}},[_vm._v(\"Ajouter une dépense\")])])]),_c('div',{staticClass:\"tab-content mt-3\"},[_c('div',{staticClass:\"tab-pane fade show active\"},[(_vm.section == 'stats')?_c('div',{staticClass:\"jumbotron pt-10 pb-10\"},[_c('h3',{staticClass:\"m-0\"},[_vm._v(\"Statistiques générales\")]),_c('p',[_vm._v(\"This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.\")])]):_vm._e(),(_vm.section == 'logements')?_c('div',[(!_vm.batiment.logements.length)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x float-left\"}),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucun logement enregistré pour le moment\")])]):_c('div',{staticStyle:{\"height\":\"75vh\"}},[_c('paginator',{attrs:{\"no-control\":\"\",\"hr\":\"bottom\",\"total\":_vm.batiment.logements.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}}),_c('div',{staticStyle:{\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.items),function(logement,i){return _c('b-col',{key:logement.idLogement || i,attrs:{\"cols\":\"6\"}},[_c('logement',{attrs:{\"logement\":logement,\"is-sub\":\"\"},on:{\"deleted\":_vm.removeLogement}})],1)}),1)],1)],1)],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.section == 'add-logement'),expression:\"section == 'add-logement'\"}]},[_c('add-logement',{attrs:{\"batiment\":_vm.batiment,\"action\":_vm.action},on:{\"logementAdded\":_vm.addedLogement}})],1),(_vm.section == 'depenses')?_c('div',[(!_vm.batiment.depenses.length)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x float-left\"}),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucune dépense enregistrée pour le moment\")])]):_vm._e(),(_vm.batiment.depenses.length>0)?_c('div',{staticStyle:{\"height\":\"75vh\"}},[_c('b-row',[_c('paginator',{attrs:{\"no-control\":\"\",\"hr\":\"bottom\",\"total\":_vm.batiment.depenses.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}})],1),_c('div',{staticStyle:{\"height\":\"90%\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.itemsDepenses),function(depense,i){return _c('b-col',{key:depense.idDepense || i,attrs:{\"cols\":\"6\"}},[_c('depense',{attrs:{\"depense\":depense,\"source\":_vm.source,\"is-sub\":\"\"},on:{\"deleted\":_vm.removeDepense}})],1)}),1)],1)],1):_vm._e()],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.section == 'add-depense'),expression:\"section == 'add-depense'\"}]},[_c('depense-form',{attrs:{\"batiment\":_vm.batiment,\"provenance\":_vm.provenance},on:{\"depenseAdded\":_vm.addedDepense}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <ul class=\"nav nav-tabs\">\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'logements'}\" @click.prevent=\"section = 'logements'\">Logements</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'stats'}\" @click.prevent=\"section = 'stats'\">Statistiques générales</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'add-logement'}\" @click.prevent=\"section = 'add-logement'\">Ajouter un logement</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'depenses'}\" @click.prevent=\"section = 'depenses'\">Dépenses liées au batiment</a></li>\r\n            <li class=\"nav-item\"><a data-toggle=\"tab\" href=\"#\" class=\"nav-link\" :class=\"{'active' : section == 'add-depense'}\" @click.prevent=\"section = 'add-depense'\">Ajouter une dépense</a></li>\r\n        </ul>\r\n        <div class=\"tab-content mt-3\">\r\n            <div class=\"tab-pane fade show active\">\r\n                <div v-if=\"section == 'stats'\" class=\"jumbotron pt-10 pb-10\">\r\n                    <h3 class=\"m-0\">Statistiques générales</h3>\r\n                    <p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>\r\n                </div>\r\n\r\n                <div v-if=\"section == 'logements'\">\r\n                    <b-alert variant=\"info\" show v-if=\"!batiment.logements.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x float-left\"></i> \r\n                        <span class=\"h4 d-inline-flex ml-2\">Aucun logement enregistré pour le moment</span>\r\n                    </b-alert>   \r\n                    <div v-else style=\"height: 75vh;\">\r\n                        <paginator no-control hr=\"bottom\" :total=\"batiment.logements.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />                   \r\n                        <div style=\"height: 90%; overflow-y: auto; overflow-x: hidden\">\r\n                            <b-row class=\"layout-wrap\">\r\n                                <b-col v-for=\"(logement, i) in items\" :key=\"logement.idLogement || i\" cols=\"6\">\r\n                                    <logement @deleted=\"removeLogement\" :logement=\"logement\" is-sub />\r\n                                </b-col>\r\n                            </b-row>    \r\n                        </div> \r\n                    </div>       \r\n                </div> \r\n\r\n                <div v-show=\"section == 'add-logement'\">\r\n                    <add-logement :batiment=\"batiment\"  @logementAdded=\"addedLogement\" :action='action'/>\r\n                </div>\r\n\r\n                <div v-if=\"section == 'depenses'\">\r\n                    <b-alert variant=\"info\" show v-if=\"!batiment.depenses.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x float-left\"></i> \r\n                        <span class=\"h4 d-inline-flex ml-2\">Aucune dépense enregistrée pour le moment</span>\r\n                    </b-alert>   \r\n                    <div v-if=\"batiment.depenses.length>0\" style=\"height: 75vh;\">\r\n                        <b-row>\r\n                            <paginator no-control hr=\"bottom\" :total=\"batiment.depenses.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />   \r\n                        </b-row>                     \r\n                        <div style=\"height: 90%; overflow-y: auto; overflow-x: hidden\">\r\n                            <b-row class=\"layout-wrap\">\r\n                                <b-col v-for=\"(depense, i) in itemsDepenses\" :key=\"depense.idDepense || i\" cols=\"6\">\r\n                                    <depense @deleted=\"removeDepense\" :depense=\"depense\" :source=\"source\" is-sub />\r\n                                </b-col>\r\n                            </b-row>    \r\n                        </div>  \r\n                    </div>\r\n                </div> \r\n                <div v-show=\"section == 'add-depense'\">\r\n                        <depense-form :batiment=\"batiment\"  @depenseAdded=\"addedDepense\" :provenance=\"provenance\"/>\r\n                </div>  \r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Logement from '@/components/_patrimoine/Logement.vue'\r\nimport Depense from \"@/views/gestion-immobiliere/depenses/Depense.vue\";\r\nimport DepenseForm from \"@/views/gestion-immobiliere/depenses/DepenseForm.vue\";\r\nimport AddLogement from \"@/views/logements/LogementForm.vue\";\r\n\r\n\r\nconst php = require('phpjs')\r\n\r\nexport default {\r\n    props: {\r\n        batiment: {type: Object, required: true}\r\n    },\r\n    components: {\r\n        Logement,\r\n        Depense,\r\n        DepenseForm,\r\n        AddLogement\r\n    },\r\n    computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() {\r\n            return php.array_slice(this.batiment.logements, this.offset, this.perPage)\r\n        },\r\n         itemsDepenses(){\r\n             return php.array_slice(this.batiment.depenses || [], this.offset, this.perPage)\r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        }\r\n    },\r\n    data: () => ({\r\n        section: 'logements',\r\n        submitted: false,\r\n\r\n        //données manipulées pour l'ajout d'une dépense\r\n        commandeDepense: false,\r\n        action: \"\",\r\n        currentPage: 1,\r\n        perPage: 10,\r\n        source: 3,\r\n        provenance:\"2\",\r\n        action:'add'\r\n    }),\r\n   mounted() {\r\n    },\r\n    methods: {\r\n              /**\r\n         * réponse à l'évènement d'ajout d'une dépense\r\n         * dans le détail du batiment, la réponse consiste juste à mettre à jour la liste des dépenses du batiment\r\n         */\r\n         addedDepense() {\r\n            axios.get(`batiments/${this.batiment.idBatiment}/depenses`).then(response => response.result || []).then(depenses => {\r\n                this.batiment.depenses = depenses\r\n                this.section = 'depenses'\r\n            })\r\n        },\r\n        addedLogement() {\r\n            axios.get(`batiments/${this.batiment.idBatiment}/logements`).then(response => response.result || []).then(logements => {\r\n                this.batiment.logements = logements\r\n                this.section = 'logements'\r\n            })\r\n        },\r\n\r\n        pushDepense(newDepense) {\r\n            this.batiment.depenses.unshift(newDepense);\r\n            this.commandeDepense =false;\r\n        },\r\n       \r\n        /**\r\n         * Retire un logement\r\n         */\r\n        removeLogement(idLogement) {\r\n            this.batiment.logements = this.batiment.logements.filter(elt => elt.idLogement != idLogement)\r\n            this.$emit('logementsChanged', this.batiment.logements)\r\n        },\r\n        /**\r\n         * supprimer une dépense\r\n         * ceci à pour but de  la marquer comme traitée en back\r\n         */\r\n        removeDepense(idDepense) {\r\n            this.batiment.depenses = this.batiment.depenses.filter(elt => elt.idDepense != idDepense)\r\n            this.$emit('depensesChanged', this.batiment.depenses)\r\n        },\r\n        /**\r\n         *traitement de l'appel à l'ajout d'une dépense dans le détail d'un batiment\r\n         */\r\n        defineDepense(){\r\n            this.action=\"add\",\r\n            this.commandeDepense=true;\r\n        },\r\n        onCloseSet() {\r\n            this.commandeDepense = false;\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsBatiment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailsBatiment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailsBatiment.vue?vue&type=template&id=c1830e2c&\"\nimport script from \"./DetailsBatiment.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailsBatiment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"mb-2 clearfix\">\r\n                    <div class=\"collapse d-md-block display-options\" id=\"displayOptions\">               \r\n                        <div class=\"d-block d-md-inline-block\">\r\n                            <SearchForm v-model=\"search\" />\r\n                        </div>\r\n                        <div class=\"float-md-right\">\r\n                            <btnAdd  message=\"Ajouter un batiment\" @click=\"() => {action = 'add'; $bvModal.show('modal-batiment')}\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"separator mb-20\"></div>\r\n                <b-overlay :show=\"showOverlay\" rounded=\"sm\">\r\n                    <b-alert variant=\"info\" class=\"text-center\" show v-if=\"!batiments.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x\"></i> <br>\r\n                        <span class=\"h4 d-inline-flex ml-2\" v-if=\"source == 1\">Aucun batiment enregistré pour le moment</span>\r\n                        <span class=\"h4 d-inline-flex ml-2\" v-if=\"source == 2\">Aucun batiment trouvé</span>\r\n                    </b-alert> \r\n                    <b-row v-else class=\"layout-wrap\">\r\n                        <b-col v-for=\"(batiment, i) in items\" :key=\"batiment.idBatiment || i\" xl=\"3\" lg=\"4\" cols=\"12\" sm=\"6\" class=\"animated flipInX mb-4\">\r\n                            <batiment @makeUpdate=\"updateBatiment\" @deleted=\"removeBatiment\" @showDetails=\"showDetails\" :batiment=\"batiment\" />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <paginator hr=\"top\" :offset=\"offset\" :total=\"batiments.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />                   \r\n                </b-overlay>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- MODALE POUR AFFICHER LES DETAILS D'UN BATIMENT -->\r\n        <div v-if=\"batiment\" class=\"modal fade edit-layout-modal\" id=\"editLayoutItem\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"editLayoutItemLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"editLayoutItemLabel\">Détails du batiment : <b>{{ batiment.nomBatiment }}</b>.</h5>\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\r\n                    </div>\r\n                    <div class=\"modal-body pt-2\">\r\n                        <details-batiment @logementsChanged=\"changeLogements\" :batiment=\"batiment\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- MODALE POUR AJOUTER/MODIFIER UN BATIMENT -->\r\n        <b-modal id=\"modal-batiment\" size=\"lg\" hide-footer ref=\"modalBatiment\" @hidden=\"batiment = null\">\r\n            <template #modal-title>\r\n                <span v-if=\"action == 'add'\">Ajouter un batiment</span>\r\n                <span v-if=\"action == 'edit'\">Edition du batiment</span>\r\n            </template>\r\n            <form-batiment @batimentAdded=\"pushBatiment\" @batimentUpdated=\"editBatiment\" :action=\"action\" :batiment=\"batiment\" />\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport DetailsBatiment from '@/components/_patrimoine/DetailsBatiment.vue'\r\nimport Batiment from '@/components/_patrimoine/Batiment.vue';\r\nimport FormBatiment from '../../components/_patrimoine/FormBatiment.vue';\r\nimport SearchForm from '@/components/parts/SearchForm.vue';\r\n\r\nconst php  = require ( 'phpjs' ) ; \r\n\r\nexport default {\r\n    name: 'Batiments',\r\n    components: {\r\n        DetailsBatiment,\r\n        Batiment,\r\n        FormBatiment,\r\n        SearchForm,\r\n    },\r\n    computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() { \r\n            return php.array_slice(this.batiments, this.offset, this.perPage) \r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        }\r\n    },\r\n    data: () => ({\r\n        batiments: [],\r\n        trueBatiments: [],\r\n        showOverlay: true,\r\n        batiment: null,\r\n        currentPage: 1,\r\n        perPage: 10,\r\n        search: null,\r\n        action: 'add',\r\n        source:1\r\n    }),\r\n    watch: {\r\n        search(value) {\r\n            value = value.toLowerCase()\r\n            this.source=2\r\n            this.batiments = !php.empty(value) ? this.trueBatiments.filter(elt => elt.nomBatiment.toLowerCase().includes(value)) : this.trueBatiments\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getBatiments()\r\n    },\r\n    methods: {\r\n        /**\r\n         * Recupere les batiments au backend\r\n         */\r\n        async getBatiments() {\r\n            try {\r\n                this.batiments = this.trueBatiments = await axios.get('batiments').then(response => response.result || [])\r\n                this.showOverlay = false\r\n               \r\n                this.autoDetailsTarget()\r\n                this.autoAddTarget()\r\n            } catch (error) {\r\n                \r\n            }\r\n        },\r\n         /**\r\n         * Affiche le modal de création d'une cité directement au chargement de la page\r\n         * ceci est utilisé lorsqu'on est arrivé ici en provenant de la homepage\r\n         */\r\n        autoAddTarget() {\r\n            const formBatiment = this.$route.query.formBatiment || null;\r\n            if (formBatiment) {\r\n                 this.$refs['modalBatiment'].show()\r\n                window.history.replaceState(\r\n                    {},\r\n                    \"\",\r\n                    window.location.href.split(\"?\")[0]\r\n                );\r\n                \r\n            }\r\n        },\r\n\r\n        /**\r\n         * Affiche automatiquement les details d'un batiment au chargement\r\n         * ceci est utilise dans le cas où on a cliqué sur le batiment en etant sur le details d'une cité\r\n         */\r\n        autoDetailsTarget() {\r\n            const target = this.$route.query.target || null;\r\n            if (target) {\r\n                const batiment = this.trueBatiments.filter(elt => elt.idBatiment == target)[0]\r\n                if (batiment) {\r\n                    this.showDetails(batiment)\r\n                    window.history.replaceState({}, '', window.location.href.split('?')[0])\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * Affiche les details d'un batiment\r\n         * \r\n         * @param {Object} batiment\r\n         */\r\n        showDetails(batiment) {\r\n            this.batiment = batiment\r\n            setTimeout(() => {\r\n                $('#editLayoutItem').modal('show')\r\n                $('#editLayoutItem').on('hide.bs.modal', (e) => {\r\n                    this.batiment = null\r\n                })\r\n                $('#editLayoutItem').on('hidden.bs.modal', (e) => {\r\n                    this.batiment = null\r\n                })\r\n            }, 100)          \r\n        },\r\n\r\n        /**\r\n         * Raffraichi la liste des logements du batiment actif\r\n         * \r\n         * @param {Logement[]} logements\r\n         */\r\n        changeLogements(logements) {\r\n            this.batiments = this.batiments.map(elt => {\r\n                if (elt.idBatiment != this.batiment.idBatiment) {\r\n                    return elt\r\n                }\r\n                return {\r\n                    ...elt,\r\n                    logements\r\n                }\r\n            })\r\n            this.batiment.logements = logements\r\n        },\r\n        /**\r\n         * Retire un batiment de la pile des batiments\r\n         * \r\n         * @param {Integer} idBatiment\r\n         */\r\n        removeBatiment(idBatiment) {\r\n            this.batiments = this.batiments.filter(elt => elt.idBatiment != idBatiment)\r\n            this.trueBatiments = this.trueBatiments.filter(elt => elt.idBatiment != idBatiment)\r\n        },\r\n\r\n        /**\r\n         * Declanché lorsqu'on a ajouté un batiment\r\n         */\r\n        pushBatiment(batiment) {\r\n            this.batiments = this.addNewBatiment(this.batiments, batiment)\r\n            this.trueBatiments = this.addNewBatiment(this.trueBatiments, batiment)\r\n            this.$bvModal.hide('modal-batiment')\r\n        },\r\n        /**\r\n         * Declanché lorsqu'on a edité un batiment\r\n         */\r\n        editBatiment(batiment) {\r\n            this.batiments = this.renameBatiment(this.batiments, batiment)\r\n            this.trueBatiments = this.renameBatiment(this.trueBatiments, batiment)    \r\n            this.$bvModal.hide('modal-batiment')\r\n        },\r\n\r\n        /**\r\n         * Lance l'edition d'un batiment\r\n         */\r\n        updateBatiment(batiment) {\r\n            this.action = 'edit'\r\n            this.batiment = batiment\r\n            this.$bvModal.show('modal-batiment')\r\n        },\r\n        /**\r\n         * Ajoute un nouveau batiment a la pile des batiment\r\n         */\r\n        addNewBatiment(batiments, batiment) {\r\n            let exist = false\r\n            for (let i = 0; i < batiments.length; i++) {\r\n                if (batiments[i].idBatiment == batiment.idBatiment) {\r\n                    exist = true \r\n                    break\r\n                }\r\n            }\r\n            if (!exist) {\r\n                batiments.push(batiment)\r\n            }\r\n            return batiments\r\n        },\r\n        /**\r\n         * Modifie les info du batiment dans la pile des batiment\r\n         */\r\n        renameBatiment(batiments, batiment) {\r\n            return batiments.map(elt => {\r\n                if (elt.idBatiment == batiment.idBatiment) {\r\n                    elt.nomBatiment = batiment.nom\r\n                    elt.refBatiment = batiment.ref\r\n                    elt.image = batiment.photo\r\n                    elt.idCite = batiment.idCite\r\n                }\r\n                return elt\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Batiments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Batiments.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Batiments.vue?vue&type=template&id=575853e6&\"\nimport script from \"./Batiments.vue?vue&type=script&lang=js&\"\nexport * from \"./Batiments.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}