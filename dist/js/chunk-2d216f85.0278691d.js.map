{"version":3,"sources":["webpack:///./src/views/gestion-immobiliere/depenses/ListDepenses.vue?9cc2","webpack:///src/views/gestion-immobiliere/depenses/ListDepenses.vue","webpack:///./src/views/gestion-immobiliere/depenses/ListDepenses.vue?cd11","webpack:///./src/views/gestion-immobiliere/depenses/ListDepenses.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","model","value","callback","$$v","filtre_categories","expression","_v","_l","cite","i","key","nomCite","batiment","j","nomBatiment","_s","directives","name","rawName","domProps","on","$event","target","composing","search","_m","modifiers","preventDefault","addDepense","apply","arguments","showOverlay","depenses","length","depense","idDepense","source","updateDepense","removeDepense","showDetails","offset","perPage","currentPage","page","limit","motif","_e","action","logement","pushDepense","onCloseSet","staticRenderFns","php","components","DepenseForm","Depense","data","commandeDepense","trueDepenses","typesLogements","cites","clone","enabled","submitted","error","nbr","idBatiment","computed","array_slice","watch","empty","filter","elt","idSousType","nomLogement","toLowerCase","includes","getDepenses","methods","begin","axios","get","then","response","result","autoDetailsTarget","$route","query","window","history","replaceState","location","href","split","console","log","setTimeout","$","modal","e","component"],"mappings":"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","file":"js/chunk-2d216f85.0278691d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('page-description',{attrs:{\"title\":\"Dépenses\",\"description\":\"Gestion de vos dépenses\",\"icon\":\"home\",\"path\":['Staitstiques', 'Mes Dépenses']}}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"mb-2 clearfix\"},[_c('div',{staticClass:\"collapse d-md-block display-options\",attrs:{\"id\":\"displayOptions\"}},[_c('div',{staticClass:\"d-block d-md-inline-block\"},[_c('div',{staticClass:\"btn-group float-md-left mr-1 mb-1\"},[_c('b-form-select',{staticStyle:{\"box-shadow\":\"none\"},attrs:{\"size\":\"sm\"},model:{value:(_vm.filtre_categories),callback:function ($$v) {_vm.filtre_categories=$$v},expression:\"filtre_categories\"}},[_c('b-form-select-option',{attrs:{\"value\":null}},[_vm._v(\"Filtre de catégories\")]),_vm._l((_vm.cites),function(cite,i){return _c('b-form-select-option-group',{key:i,attrs:{\"label\":cite.nomCite}},_vm._l((cite.batiments),function(batiment,j){return _c('b-form-select-option',{key:j,attrs:{\"value\":batiment.nomBatiment}},[_vm._v(_vm._s(batiment.nomBatiment))])}),1)})],2)],1),_c('div',{staticClass:\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\"},[_c('form',{attrs:{\"action\":\"\",\"onsubmit\":\"return false\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Recherche...\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}}),_vm._m(0)])])]),_c('div',{staticClass:\"float-md-right\"},[_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-lg\",modifiers:{\"modal-lg\":true}}],attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addDepense.apply(null, arguments)}}},[_c('i',{staticClass:\"fa fa-plus-circle\"}),_vm._v(\" Nouvelle dépense \")])],1)])]),_c('div',{staticClass:\"separator mb-20\"}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[(!_vm.depenses.length)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x\"}),_c('br'),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Aucune dépense enregistrée pour le moment\")])]):_c('b-row',{staticClass:\"layout-wrap\"},_vm._l((_vm.depenses),function(depense,i){return _c('b-col',{key:depense.idDepense || i,staticClass:\"animated flipInX mb-4\",attrs:{\"lg\":\"4\",\"cols\":\"12\",\"sm\":\"6\"}},[_c('depense',{attrs:{\"depense\":depense,\"soure\":_vm.source},on:{\"makeUpdate\":_vm.updateDepense,\"deleted\":_vm.removeDepense,\"showDetails\":_vm.showDetails}})],1)}),1),_c('paginator',{attrs:{\"hr\":\"top\",\"offset\":_vm.offset,\"total\":_vm.depenses.length || 0,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}})],1)],1)]),(_vm.depense)?_c('div',{staticClass:\"modal fade edit-layout-modal\",attrs:{\"id\":\"editLayoutItem\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"editLayoutItemLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"editLayoutItemLabel\"}},[_vm._v(\" Détails de la dépense: \"),_c('b',[_vm._v(_vm._s(_vm.depense.motif))]),_vm._v(\". \")]),_vm._m(1)]),_c('div',{staticClass:\"modal-body pt-2\"},[_c('details-depense',{attrs:{\"depense\":_vm.depense}})],1)])])]):_vm._e(),(_vm.commandeDepense)?_c('depense-form',{attrs:{\"action\":_vm.action,\"cite\":_vm.cite,\"batiment\":_vm.batiment,\"logement\":_vm.logement},on:{\"depenseAdded\":_vm.pushDepense,\"resetdepenseForm\":_vm.onCloseSet}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-icon\",attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"ik ik-search\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container-fluid\">\r\n    <!--page header start -->\r\n    <page-description\r\n      title=\"Dépenses\"\r\n      description=\"Gestion de vos dépenses\"\r\n      icon=\"home\"\r\n      :path=\"['Staitstiques', 'Mes Dépenses']\"\r\n    />\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <div class=\"mb-2 clearfix\">\r\n          <div class=\"collapse d-md-block display-options\" id=\"displayOptions\">\r\n            <div class=\"d-block d-md-inline-block\">\r\n              <div class=\"btn-group float-md-left mr-1 mb-1\">\r\n                <b-form-select v-model=\"filtre_categories\" size=\"sm\" style=\"box-shadow: none\">\r\n                  <b-form-select-option :value=\"null\">Filtre de catégories</b-form-select-option>\r\n                  <b-form-select-option-group\r\n                    v-for=\"(cite, i) in cites\"\r\n                    :key=\"i\"\r\n                    :label=\"cite.nomCite\"\r\n                  >\r\n                    <b-form-select-option\r\n                      v-for=\"(batiment, j) in cite.batiments\"\r\n                      :key=\"j\"\r\n                      :value=\"batiment.nomBatiment\"\r\n                    >{{ batiment.nomBatiment }}</b-form-select-option>\r\n                  </b-form-select-option-group>\r\n                </b-form-select>\r\n              </div>\r\n              <div class=\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\">\r\n                <form action onsubmit=\"return false\">\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"Recherche...\"\r\n                    v-model=\"search\"\r\n                  />\r\n                  <button type=\"submit\" class=\"btn btn-icon\">\r\n                    <i class=\"ik ik-search\"></i>\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"float-md-right\">\r\n              <b-button variant=\"danger\" @click.prevent=\"addDepense\" v-b-modal.modal-lg>\r\n                <i class=\"fa fa-plus-circle\"></i> Nouvelle dépense\r\n              </b-button>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"separator mb-20\"></div>\r\n        <b-overlay :show=\"showOverlay\" rounded=\"sm\">\r\n          <b-alert variant=\"info\" class=\"text-center\" show v-if=\"!depenses.length\">\r\n            <i class=\"fa fa-exclamation-triangle fa-3x\"></i>\r\n            <br />\r\n            <span class=\"h4 d-inline-flex ml-2\">Aucune dépense enregistrée pour le moment</span>\r\n          </b-alert>\r\n          <b-row v-else class=\"layout-wrap\">\r\n            <b-col\r\n              v-for=\"(depense, i) in depenses\"\r\n              :key=\"depense.idDepense || i\"\r\n              lg=\"4\"\r\n              cols=\"12\"\r\n              sm=\"6\"\r\n              class=\"animated flipInX mb-4\"\r\n            >\r\n              <depense\r\n                @makeUpdate=\"updateDepense\"\r\n                @deleted=\"removeDepense\"\r\n                :depense=\"depense\"\r\n                :soure=\"source\"\r\n                @showDetails=\"showDetails\"\r\n              />\r\n            </b-col>\r\n          </b-row>\r\n          <paginator\r\n            hr=\"top\"\r\n            :offset=\"offset\"\r\n            :total=\"depenses.length || 0\"\r\n            :limit=\"perPage\"\r\n            :page=\"currentPage\"\r\n            @pageChanged=\"(page) => {currentPage = page}\"\r\n            @limitChanged=\"(limit) => {perPage = limit}\"\r\n          />\r\n        </b-overlay>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- MODALE POUR AFFICHER LES DETAILS D'UNE  DEPENSE -->\r\n    <div\r\n      v-if=\"depense\"\r\n      class=\"modal fade edit-layout-modal\"\r\n      id=\"editLayoutItem\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-labelledby=\"editLayoutItemLabel\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"editLayoutItemLabel\">\r\n              Détails de la dépense:\r\n              <b>{{ depense.motif }}</b>.\r\n            </h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body pt-2\">\r\n            <details-depense :depense=\"depense\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <depense-form @depenseAdded=\"pushDepense\" v-if=\"commandeDepense\" :action=\"action\" :cite=\"cite\" :batiment=\"batiment\" :logement=\"logement\" @resetdepenseForm=\"onCloseSet\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport DepenseForm from \"@/views/gestion-immobiliere/depenses/DepenseForm.vue\";\r\nimport Depense from \"@/views/gestion-immobiliere/depenses/Depense.vue\";\r\n/*import DetailsLogement from \"@/components/_patrimoine/DetailsLogement.vue\";*/\r\n\r\nconst php = require(\"phpjs\");\r\n\r\nexport default {\r\n  name: \"depenses\",\r\n  components: {\r\n    DepenseForm,\r\n    Depense\r\n  },\r\n  data: () => ({\r\n    //données liées au composant dépense\r\n    commandeDepense: false,\r\n    cite:null,\r\n    batiment:null,\r\n    logement:null,\r\n    source:0,\r\n\r\n    search: null,\r\n    showOverlay: true,\r\n    currentPage: 1,\r\n    perPage: 10,\r\n    action:'',\r\n    depenses: [],\r\n    trueDepenses: [],\r\n    depense: null,\r\n\r\n    typesLogements: [],\r\n    filtre_categories: null,\r\n\r\n    cites: [],\r\n    clone: {\r\n      enabled: false,\r\n      submitted: false,\r\n      error: false,\r\n      nbr: null,\r\n      idBatiment: null\r\n    },\r\n\r\n  }),\r\n  computed: {\r\n    /**\r\n     * Elements affichés avec prise en charge de la pagination\r\n     */\r\n    items() {\r\n      return php.array_slice(this.depenses, this.offset, this.perPage);\r\n    },\r\n    offset() {\r\n      return this.currentPage * this.perPage - this.perPage;\r\n    }\r\n  },\r\n  watch: {\r\n    /**\r\n     * Filtre les logements en fonction du type de logement selectionné\r\n     */\r\n    filtre_categories(value) {\r\n      this.depenses = !php.empty(value)\r\n        ? this.trueDepenses.filter(elt => elt.idSousType == value)\r\n        : this.trueDepenses;\r\n    },\r\n    search(value) {\r\n      this.depenses = !php.empty(value)\r\n        ? this.trueDepenses.filter(elt =>\r\n            elt.nomLogement.toLowerCase().includes(value.toLowerCase())\r\n          )\r\n        : this.trueDepenses;\r\n    }\r\n  },\r\n  beforeMount() {\r\n    this.getDepenses();\r\n  },\r\n  mounted() {\r\n\r\n    /*this.$root.$on(\"depenseAdded\", newDepense => {\r\n      this.depenses.unshift(newDepense);\r\n    });*/\r\n  },\r\n  methods: {\r\n    pushDepense(){\r\n      this.getDepenses();\r\n    },\r\n    /**\r\n     * reception de l'évènement émis de fermeture du modal d'ajout d'un logement\r\n     * ceci permet de re-initialiser le composant(formwizard) d'ajout d'un logement de manière appropriée\r\n     */\r\n    onCloseSet() {\r\n      this.commandeDepense = false;\r\n    },\r\n    //recupération de la liste des logements\r\n    async getDepenses(begin) {\r\n      this.showOverlay = true;\r\n      this.depenses = this.trueDepenses = await axios\r\n        .get(\"depenses\")\r\n        .then(response => response.result || []);\r\n      this.showOverlay = false;\r\n      if (begin !== false) {\r\n        this.cites = await axios.get(\"cites\").then(response => response.result || [])\r\n        \r\n      }\r\n      this.autoDetailsTarget();\r\n    },\r\n    /**\r\n     * Affiche automatiquement les details d'une dépense au chargement\r\n     * ceci est utilise dans le cas où on a cliqué sur la dépense en etant sur le details d'une cité, d'un batiment ou d'un logement\r\n     */\r\n    autoDetailsTarget() {\r\n      const target = this.$route.query.target || null;\r\n      if (target) {\r\n        const depense = this.trueDepenses.filter(\r\n          elt => elt.idDepense == target\r\n        )[0];\r\n        if (depense) {\r\n          this.showDetails(depense);\r\n          window.history.replaceState(\r\n            {},\r\n            \"\",\r\n            window.location.href.split(\"?\")[0]\r\n          );\r\n        }\r\n      }\r\n    },\r\n\r\n\r\n    addDepense() {\r\n      this.action=\"add\";\r\n      this.commandeDepense = true;\r\n    },\r\n    updateDepense(depense) {\r\n      console.log(\"depense\", depense);\r\n    },\r\n    removeDepense(depense) {\r\n      console.log(\"depense\", depense);\r\n    },\r\n\r\n    /**\r\n     * Affiche les details d'un logement\r\n     *\r\n     * @param {Object} depense\r\n     */\r\n    showDetails(depense) {\r\n      this.depense = depense;\r\n      setTimeout(() => {\r\n        $(\"#editLayoutItem\").modal(\"show\");\r\n        $(\"#editLayoutItem\").on(\"hide.bs.modal\", e => {\r\n          this.depense = null;\r\n        });\r\n        $(\"#editLayoutItem\").on(\"hidden.bs.modal\", e => {\r\n          this.depense = null;\r\n        });\r\n      }, 100);\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListDepenses.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListDepenses.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListDepenses.vue?vue&type=template&id=f03d4acc&\"\nimport script from \"./ListDepenses.vue?vue&type=script&lang=js&\"\nexport * from \"./ListDepenses.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}