{"version":3,"sources":["webpack:///./node_modules/vue-html-to-paper/dist/index.js","webpack:///./src/views/finances/Loyers.vue?8594","webpack:///./src/views/finances/Loyers.vue?7959","webpack:///./src/components/Printer.vue?05f3","webpack:///src/components/Printer.vue","webpack:///./src/components/Printer.vue?a9b9","webpack:///./src/components/Printer.vue","webpack:///src/views/finances/Loyers.vue","webpack:///./src/views/finances/Loyers.vue?6887","webpack:///./src/views/finances/Loyers.vue","webpack:///./src/components/Printer.vue?99be","webpack:///./src/components/parts/SearchForm.vue?a393","webpack:///src/components/parts/SearchForm.vue","webpack:///./src/components/parts/SearchForm.vue?d005","webpack:///./src/components/parts/SearchForm.vue"],"names":["Object","defineProperty","exports","value","addStyles","win","styles","forEach","style","link","document","createElement","setAttribute","getElementsByTagName","appendChild","VueHtmlToPaper","Vue","options","prototype","$htmlToPaper","el","localOptions","cb","defaultName","defaultSpecs","defaultStyles","defaultTimeout","defaultAutoClose","defaultWindowTitle","window","title","name","specs","timeout","autoClose","windowTitle","length","join","element","String","getElementById","alert","url","open","write","innerHTML","promise","Promise","resolve","setTimeout","focus","print","close","default","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","callback","$$v","search","expression","mois","periode","$set","annees","showOverlay","occupations","_v","_l","occupation","key","idOccupation","_s","logement","refLogement","sousTypeLogement","libelleSousType","batiment","nomBatiment","_e","locataire","titre","nomLocataire","prenomLocataire","tel","email","domProps","_display_loyer","_display_consommation","scopedSlots","_u","fn","proxy","params","id","on","$event","preventDefault","doPayment","correspondance","offset","perPage","currentPage","page","limit","submitted","autoPay","apply","arguments","printList","runPaiement","resetForm","ref","ok","totalPayerFacture","paiement","avance","disabled","buy","loyer","eau","energie","bvtEvt","printSingle","$dayjs","dateFin","format","_find_periode_loyer","adresse","ville","pays","quartier","loyerBase","hasBuyLoyer","_calcul_consommation","_check_if_buy_consommation","_calcul_total_quitance_facture","periodeCourante","staticRenderFns","class","display","_m","_t","staticStyle","use","props","type","Boolean","required","watch","v","proceced","runPrint","data","methods","$emit","component","php","components","SearchForm","Printer","trueOccupations","annee","payer","computed","array_slice","filter","elt","diff","dateDeb","empty","current","i","push","sort","a","b","date","Date","getMonth","setMonth","text","ucfirst","total","_check_if_buy_loyer","parseInt","getOccupations","axios","get","then","response","result","a_payer_loyer","totalPayer","a_payer_eau","consommation_eau","indexeMois_eau","a_payer_energie","consommation_energie","indexeMois_energie","$bvModal","show","App","error","montant","post","alertSuccess","message","hide","catch","alertError","indexes","typeIndexe","mode","modeEau","modeEnergie","pu","puEau","puEnergie","indexeMois","getIndexesPeriode","consommation","nouveau","ancien","a_payer","variant","loyers","e","reduce","accumulator","curr","montantPayer","consoEau","consoEnergie","modePaiement","add","placeholder","val","mounted","console","log","JSON","parse","stringify"],"mappings":"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","file":"js/chunk-3502e4fb.ebab4691.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nconst addStyles = (win, styles) => {\n  styles.forEach((style) => {\n    let link = win.document.createElement('link');\n    link.setAttribute('rel', 'stylesheet');\n    link.setAttribute('type', 'text/css');\n    link.setAttribute('href', style);\n    win.document.getElementsByTagName('head')[0].appendChild(link);\n  });\n};\n\nconst VueHtmlToPaper = {\n  install (Vue, options = {}) {\n    Vue.prototype.$htmlToPaper = (el, localOptions = {}, cb = () => true) => {\n      let defaultName = '_blank', \n        defaultSpecs = ['fullscreen=yes','titlebar=yes', 'scrollbars=yes'],\n        defaultStyles = [],\n        defaultTimeout = 1000,\n        defaultAutoClose = true,\n        defaultWindowTitle = window.document.title;\n      let {\n        name = defaultName,\n        specs = defaultSpecs,\n        styles = defaultStyles,\n        timeout = defaultTimeout,\n        autoClose = defaultAutoClose,\n        windowTitle = defaultWindowTitle,\n      } = options;\n      \n      if (localOptions.name) name = localOptions.name;\n      if (localOptions.specs) specs = localOptions.specs;\n      if (localOptions.styles) styles = localOptions.styles;\n      if (localOptions.timeout) timeout = localOptions.timeout;\n      if (localOptions.autoClose) autoClose = localOptions.autoClose;\n      if (localOptions.windowTitle) windowTitle = localOptions.windowTitle;\n\n      specs = !!specs.length ? specs.join(',') : '';\n\n      let element = el;\n      if (typeof el === 'string' || el instanceof String) {\n        element = window.document.getElementById(el);\n      }\n      if (!element) {\n        alert(`Element to print #${el} not found!`);\n        return;\n      }\n\n      const url = '';\n      const win = window.open(url, name, specs);\n\n      win.document.write(`\n        <html>\n          <head>\n            <title>${windowTitle}</title>\n          </head>\n          <body>\n            ${element.innerHTML}\n          </body>\n        </html>\n      `);\n\n      addStyles(win, styles);\n\n      const promise = new Promise((resolve) => {\n        setTimeout(() => {\n          win.focus();\n          win.print();\n          autoClose && win.document.close();\n          autoClose && win.close();\n          if (cb) cb();\n          resolve();\n        }, timeout);\n      });\n\n      return cb ? true : promise;\n    };\n  },\n};\n\nexports.default = VueHtmlToPaper;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loyers.vue?vue&type=style&index=0&id=7fdd5301&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"mb-2 clearfix\"},[_c('div',{staticClass:\"collapse d-md-block display-options\",attrs:{\"id\":\"displayOptions\"}},[_c('div',{staticClass:\"d-block d-md-inline-block\"},[_c('SearchForm',{model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('div',{staticClass:\"float-md-right\"},[_c('div',{staticClass:\"d-flex \"},[_c('b-form-select',{staticClass:\"form-control\",attrs:{\"size\":\"sm\",\"options\":_vm.mois},model:{value:(_vm.periode.mois),callback:function ($$v) {_vm.$set(_vm.periode, \"mois\", $$v)},expression:\"periode.mois\"}}),_c('b-form-select',{staticClass:\"form-control\",attrs:{\"size\":\"sm\",\"options\":_vm.annees},model:{value:(_vm.periode.annee),callback:function ($$v) {_vm.$set(_vm.periode, \"annee\", $$v)},expression:\"periode.annee\"}})],1)])])]),_c('div',{staticClass:\"separator mb-20\"}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[(!_vm.occupations.length)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x\"}),_vm._v(\" \"),_c('br'),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Vous n'avez défini aucune occupation pour le moment\")])]):_c('b-row',[_c('div',{staticClass:\"card-body\"},[_c('b-table-simple',{attrs:{\"hover\":\"\",\"small\":\"\",\"responsive\":\"\"}},[_c('b-thead',{attrs:{\"head-variant\":\"light\"}},[_c('b-tr',{staticClass:\"text-center\"},[_c('b-th',[_vm._v(\"Logement\")]),_c('b-th',[_vm._v(\"Locataire\")]),_c('b-th',[_vm._v(\"Loyer de base\")]),_c('b-th',[_vm._v(\"Consommation en eau\")]),_c('b-th',[_vm._v(\"Consommation en lumière\")]),_c('b-th',[_vm._v(\"Action\")])],1)],1),_c('b-tbody',_vm._l((_vm.items),function(occupation){return _c('b-tr',{key:occupation.idOccupation},[_c('b-td',{staticClass:\"px-2 py-1\"},[_c('span',{staticClass:\"d-inline-block w-100 mb-1 font-weight-bold\"},[_vm._v(_vm._s(occupation.logement.refLogement))]),_c('span',{staticClass:\"d-inline-block w-100 mt-1 text-muted\"},[_vm._v(\" \"+_vm._s(occupation.logement.sousTypeLogement.libelleSousType)+\" \"),(occupation.logement.batiment)?_c('span',[_vm._v(\" / Batiment : \"+_vm._s(occupation.logement.batiment.nomBatiment))]):_vm._e()])]),_c('b-td',{staticClass:\"p-1\"},[_c('span',{staticClass:\"d-inline-block w-100 mb-1 font-weight-bold\"},[_vm._v(_vm._s(occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire))]),_c('span',{staticClass:\"d-inline-block w-100 mt-1 text-muted\"},[_vm._v(_vm._s(occupation.locataire.tel + ' / ' + occupation.locataire.email))])]),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_loyer(occupation))}}),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_consommation(occupation, 'eau'))}}),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_consommation(occupation, 'energie'))}}),_c('b-td',[_c('b-dropdown',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('i',{staticClass:\"fa fa-ellipsis-h\"})]},proxy:true}],null,true)},[_c('b-dropdown-item',{attrs:{\"to\":{name: 'occupation', params: {id: occupation.idOccupation}}}},[_vm._v(\"Détails de l'occupation\")]),_c('b-dropdown-item',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.doPayment(occupation)}}},[_vm._v(\"Effectuer un paiement\")]),_c('b-dropdown-item',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.correspondance(occupation)}}},[_vm._v(\"Correspondance\")])],1)],1)],1)}),1)],1)],1)]),_c('hr'),_c('div',{staticClass:\"d-flex justify-content-between align-items-start\"},[_c('paginator',{attrs:{\"offset\":_vm.offset,\"total\":_vm.occupations.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}}),_c('b-button',{staticClass:\"position-fixed validate btn-icon\",attrs:{\"id\":\"popover-options\",\"variant\":\"danger\"}},[_c('i',{staticClass:\"fa fa-bars fa-lg\"})]),_c('b-popover',{attrs:{\"title\":\"Options\",\"target\":\"popover-options\",\"triggers\":\"click blur\",\"placement\":\"topleft\"}},[_c('div',{staticClass:\"py-2\"},[_c('b-button',{attrs:{\"block\":\"\",\"variant\":\"outline-secondary\",\"disabled\":_vm.submitted},on:{\"click\":function($event){$event.preventDefault();return _vm.autoPay.apply(null, arguments)}}},[_vm._v(\"Lancer le paiement automatique \"),(_vm.submitted)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1),_c('b-button',{attrs:{\"block\":\"\",\"variant\":\"outline-secondary\"},on:{\"click\":function($event){$event.preventDefault();_vm.printList = true}}},[_vm._v(\"Générer le listing des factures\")])],1)])],1)],1)],1)]),(_vm.occupation)?_c('div',[_c('b-modal',{attrs:{\"id\":\"paiement\",\"title\":\"Ajout de paiement\",\"no-close-on-backdrop\":\"\",\"ok-only\":\"\"},on:{\"ok\":_vm.runPaiement,\"hidden\":_vm.resetForm},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(ref){\nvar ok = ref.ok;\nreturn [_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"danger\",\"disabled\":_vm.submitted || _vm.totalPayerFacture <= 0},on:{\"click\":function($event){return ok()}}},[_vm._v(\"Valider \"),(_vm.submitted)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1)]}}],null,false,3392060351)},[_c('div',{staticClass:\"jumbotron pt-10 pb-10 px-2\"},[_c('h5',{staticClass:\"text-center mb-2\"},[_vm._v(\"Effectuer un versement pour:\")]),_c('b-row',[_c('b-col',[_c('dl',[_c('dt',[_vm._v(\"Logement\")]),_c('dd',[_vm._v(_vm._s(_vm.occupation.logement.refLogement)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.occupation.logement.sousTypeLogement.libelleSousType)+\" \"),_c('br'),_vm._v(\" \"),(_vm.occupation.logement.batiment)?_c('span',[_vm._v(\"Batiment : \"+_vm._s(_vm.occupation.logement.batiment.nomBatiment))]):_vm._e()])])]),_c('b-col',[_c('dl',[_c('dt',[_vm._v(\"Locataire\")]),_c('dd',[_vm._v(_vm._s(_vm.occupation.locataire.titre + ' ' + _vm.occupation.locataire.nomLocataire + ' ' + _vm.occupation.locataire.prenomLocataire)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.occupation.locataire.tel)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.occupation.locataire.email))])])])],1)],1),_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Loyer\",\"description\":'Avance: ' + _vm.paiement.avance[0]}},[_c('b-form-checkbox',{attrs:{\"disabled\":_vm.paiement.disabled[0]},model:{value:(_vm.paiement.buy[0]),callback:function ($$v) {_vm.$set(_vm.paiement.buy, 0, $$v)},expression:\"paiement.buy[0]\"}},[_vm._v(\"Payer \"),_c('b',[_vm._v(_vm._s(_vm.paiement.loyer + ' F'))])])],1)],1),_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Eau\",\"description\":'Avance: ' + _vm.paiement.avance[1]}},[_c('b-form-checkbox',{attrs:{\"disabled\":_vm.paiement.disabled[1]},model:{value:(_vm.paiement.buy[1]),callback:function ($$v) {_vm.$set(_vm.paiement.buy, 1, $$v)},expression:\"paiement.buy[1]\"}},[_vm._v(\"Payer \"),_c('b',[_vm._v(_vm._s(_vm.paiement.eau + ' F'))])])],1)],1),_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Lumière\",\"description\":'Avance: ' + _vm.paiement.avance[2]}},[_c('b-form-checkbox',{attrs:{\"disabled\":_vm.paiement.disabled[2]},model:{value:(_vm.paiement.buy[2]),callback:function ($$v) {_vm.$set(_vm.paiement.buy, 2, $$v)},expression:\"paiement.buy[2]\"}},[_vm._v(\"Payer \"),_c('b',[_vm._v(_vm._s(_vm.paiement.energie + ' F'))])])],1)],1)],1),_c('hr'),_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Total à payer\",\"description\":\"Ce prix soustrait les montants avancés par le locataire pour cette facture\"}},[_c('b-form-input',{attrs:{\"disabled\":\"\",\"value\":_vm.totalPayerFacture}})],1)],1),_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Montant à préléver\",\"description\":\"Entrez le montant versé pour cette facture. Il sera débité du compte de l'occupation\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.totalPayerFacture <= 0},model:{value:(_vm.paiement.payer),callback:function ($$v) {_vm.$set(_vm.paiement, \"payer\", $$v)},expression:\"paiement.payer\"}})],1)],1)],1)],1)],1):_vm._e(),(_vm.occupation)?_c('div',[_c('b-modal',{attrs:{\"id\":\"correspondance\",\"title\":\"Correspondance\",\"no-close-on-backdrop\":\"\",\"cancel-title\":\"Fermer\",\"ok-title\":\"Imprimer\",\"ok-variant\":\"danger\"},on:{\"ok\":function (bvtEvt) {bvtEvt.preventDefault(); _vm.printSingle = true}}},[(_vm.occupation.dateFin)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"show\":\"\",\"variant\":\"info\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-5x\"}),_vm._v(\" \"),_c('br'),_c('p',{staticClass:\"fa-2x mt-5 pt-2\"},[_vm._v(\"Bail terminé le \"+_vm._s(_vm.$dayjs(_vm.occupation.dateFin).format('dddd, DD MMMM YYYY')))])]):_c('printer',{attrs:{\"display\":true,\"id\":\"print-correspondance\"},on:{\"input\":function($event){_vm.printSingle = false}},model:{value:(_vm.printSingle),callback:function ($$v) {_vm.printSingle=$$v},expression:\"printSingle\"}},[_c('b-card',{staticClass:\"border\"},[_c('span',{staticClass:\"float-right d-inline-block mb-5\"},[_vm._v(\"Yaoundé le \"+_vm._s(_vm.$dayjs().format('DD MMMM YYYY'))+\" \")]),_c('br'),_c('div',{staticClass:\"clearfix my-3\"},[_c('span',{staticClass:\"text-underline\"},[_vm._v(\"Object: \")]),_c('b',{staticClass:\"fa-lg\"},[_vm._v(\"Loyer du mois de : \"+_vm._s(_vm._find_periode_loyer(_vm.occupation)))])]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.occupation.locataire.titre + ' ' + _vm.occupation.locataire.nomLocataire + ' ' + _vm.occupation.locataire.prenomLocataire)+\" (\"+_vm._s(_vm.occupation.locataire.tel)+\")\")]),_vm._v(\", vous occupez le logement \"),_c('b',[_vm._v(_vm._s(_vm.occupation.logement.refLogement)+\" / \"+_vm._s(_vm.occupation.logement.sousTypeLogement.libelleSousType))]),_vm._v(\" situé à \"),_c('b',[_vm._v(_vm._s(_vm.occupation.logement.adresse.ville + ' ' + _vm.occupation.logement.adresse.pays + ', ' + _vm.occupation.logement.adresse.quartier))]),_vm._v(\". \"),_c('br'),_vm._v(\" Ci-dessous, votre loyer du mois de \"+_vm._s(_vm._find_periode_loyer(_vm.occupation))+\" \")]),_c('b-table-simple',[_c('b-tbody',[_c('b-tr',[_c('b-th',[_vm._v(\"Loyer de base\")]),_c('b-td',[_vm._v(_vm._s(_vm.occupation.loyerBase)+\" F\")]),_c('b-td',[(_vm.hasBuyLoyer[0] == 1)?_c('i',{staticClass:\"fa fa-check-circle fa-lg text-success\"}):_vm._e(),(_vm.hasBuyLoyer[0] == 2)?_c('b-badge',{attrs:{\"variant\":\"warning\"}},[_vm._v(_vm._s(_vm.hasBuyLoyer[1]))]):_vm._e()],1)],1),_c('b-tr',[_c('b-th',[_vm._v(\"Consommation en eau\")]),_c('b-td',[_vm._v(_vm._s(_vm._calcul_consommation(_vm.occupation, 'eau'))+\" F\")]),_c('b-td',[(_vm._check_if_buy_consommation(_vm.occupation, 'eau')[0] == 1)?_c('i',{staticClass:\"fa fa-check-circle fa-lg text-success\"}):_vm._e()])],1),_c('b-tr',[_c('b-th',[_vm._v(\"Consommation en lumière\")]),_c('b-td',[_vm._v(_vm._s(_vm._calcul_consommation(_vm.occupation, 'energie'))+\" F\")]),_c('b-td',[(_vm._check_if_buy_consommation(_vm.occupation, 'energie')[0] == 1)?_c('i',{staticClass:\"fa fa-check-circle fa-lg text-success\"}):_vm._e()])],1),_c('b-tr',[_c('b-th',[_vm._v(\"Total\")]),_c('b-td',{attrs:{\"colspan\":\"2\"}},[_c('b',{staticClass:\"fa-2x text-primary\"},[_vm._v(_vm._s(_vm._calcul_total_quitance_facture(_vm.occupation))+\" F\")])])],1)],1)],1)],1)],1)],1)],1):_vm._e(),_c('printer',{attrs:{\"id\":\"print-liste\"},on:{\"input\":function($event){_vm.printList = false}},model:{value:(_vm.printList),callback:function ($$v) {_vm.printList=$$v},expression:\"printList\"}},[_c('h3',{staticClass:\"text-center mb-3\"},[_vm._v(\"Loyers du mois de \"),_c('b',[_vm._v(_vm._s(_vm.$dayjs(this.periodeCourante).format('MMMM YYYY')))])]),_c('b-table-simple',{staticClass:\"mt-4\",attrs:{\"hover\":\"\",\"small\":\"\",\"responsive\":\"\"}},[_c('b-thead',{staticClass:\"border mb-5\"},[_c('b-tr',{staticClass:\"text-center\"},[_c('b-th',{attrs:{\"valign\":\"middle\"}},[_vm._v(\"Logement\")]),_c('b-th',{attrs:{\"valign\":\"middle\"}},[_vm._v(\"Locataire\")]),_c('b-th',{attrs:{\"valign\":\"middle\"}},[_vm._v(\"Loyer de base\")]),_c('b-th',{attrs:{\"valign\":\"middle\"}},[_vm._v(\"Consommation en eau\")]),_c('b-th',{attrs:{\"valign\":\"middle\"}},[_vm._v(\"Consommation en lumière\")])],1)],1),_c('b-tbody',[_c('b-tr',[_c('td',{attrs:{\"colspan\":\"5\"}},[_vm._v(\" \")])]),_vm._l((_vm.trueOccupations),function(occupation){return _c('b-tr',{key:occupation.idOccupation,staticClass:\"pt-2\"},[_c('b-td',{staticClass:\"px-2 py-1\"},[_c('span',{staticClass:\"d-inline-block w-100 mb-1 font-weight-bold\"},[_vm._v(_vm._s(occupation.logement.refLogement))]),_c('span',{staticClass:\"d-inline-block w-100 mt-1 text-muted\"},[_vm._v(\" \"+_vm._s(occupation.logement.sousTypeLogement.libelleSousType)+\" \"),(occupation.logement.batiment)?_c('span',[_vm._v(\" / Batiment : \"+_vm._s(occupation.logement.batiment.nomBatiment))]):_vm._e()])]),_c('b-td',{staticClass:\"p-1\"},[_c('span',{staticClass:\"d-inline-block w-100 mb-1 font-weight-bold\"},[_vm._v(_vm._s(occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire))]),_c('span',{staticClass:\"d-inline-block w-100 mt-1 text-muted\"},[_vm._v(_vm._s(occupation.locataire.tel + ' / ' + occupation.locataire.email))])]),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_loyer(occupation))}}),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_consommation(occupation, 'eau'))}}),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_consommation(occupation, 'energie'))}})],1)})],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'displayed' : _vm.display == true },attrs:{\"id\":\"print-area\"}},[_c('div',{attrs:{\"id\":_vm.id}},[_vm._m(0),_c('div',{staticClass:\"my-3\"},[_vm._t(\"default\")],2),_c('footer')])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"d-flex border rounded px-3 py-1 align-items-center\"},[_c('img',{staticClass:\"header-brand-img\",staticStyle:{\"height\":\"5em\",\"width\":\"5em\"},attrs:{\"src\":\"/img/logo-m0.png\",\"alt\":\"lavalite\"}}),_c('div',{staticClass:\"ml-1 text-center\",staticStyle:{\"flex\":\"1\"}},[_c('h2',{staticClass:\"text-danger\"},[_vm._v(\"Maisonier\")]),_c('p',{staticClass:\"text-muted\"},[_vm._v(\"Application de gestion immobilière\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"print-area\" :class=\"{'displayed' : display == true }\">\r\n        <div :id=\"id\">\r\n            <header class=\"d-flex border rounded px-3 py-1 align-items-center\">\r\n                <img src=\"/img/logo-m0.png\" class=\"header-brand-img\" alt=\"lavalite\" style=\"height: 5em; width: 5em\">\r\n                <div style=\"flex: 1;\" class=\"ml-1 text-center\">\r\n                    <h2 class=\"text-danger\">Maisonier</h2>   \r\n                    <p class=\"text-muted\">Application de gestion immobilière</p>\r\n                </div> \r\n            </header>\r\n            <div class=\"my-3\">\r\n                <slot />\r\n            </div>\r\n            <footer></footer>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue';\r\nimport VueHtmlToPaper from 'vue-html-to-paper';\r\n\r\nconst options = {\r\n  name: '_blank',\r\n  specs: [\r\n    'fullscreen=yes',\r\n    'titlebar=no',\r\n    'scrollbars=no'\r\n  ],\r\n  styles: [\r\n    'https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css',\r\n    'https://unpkg.com/kidlat-css/css/kidlat.css'\r\n  ],\r\n  timeout: 1000, // default timeout before the print window appears\r\n  autoClose: true, // if false, the window will not close after printing\r\n  windowTitle: window.document.title, // override the window title\r\n}\r\n\r\nVue.use(VueHtmlToPaper, options);\r\n\r\nexport default {\r\n    name: 'Printer',\r\n    props: {\r\n        value: {type: Boolean, default: false},\r\n        display: {type: Boolean, default: false},\r\n        id: {type: String, required: true}\r\n    },\r\n    watch: {\r\n        value(v) {\r\n            if (v == true && this.proceced == false) {\r\n                this.runPrint()\r\n            }\r\n        }\r\n    }, \r\n    data: () => ({\r\n        proceced: false\r\n    }),\r\n    methods: {\r\n        async runPrint() {\r\n            this.proceced = true\r\n            await this.$htmlToPaper(this.id);\r\n            this.proceced = false\r\n            this.$emit('input')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#print-area {\r\n    display: none;\r\n}\r\n#print-area header, #print-area footer {\r\n    display: none !important;\r\n}\r\n#print-area.displayed {\r\n    display: block;\r\n}\r\n@media print {\r\n    #print-area {\r\n        display: block;\r\n    }\r\n    #print-area header, #print-area footer {\r\n        display: flex !important;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Printer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Printer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Printer.vue?vue&type=template&id=00a30cea&scoped=true&\"\nimport script from \"./Printer.vue?vue&type=script&lang=js&\"\nexport * from \"./Printer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Printer.vue?vue&type=style&index=0&id=00a30cea&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00a30cea\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"container-fluid\">\r\n        <!--page header start -->\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"mb-2 clearfix\">\r\n                    <div class=\"collapse d-md-block display-options\" id=\"displayOptions\">               \r\n                        <div class=\"d-block d-md-inline-block\">\r\n                            <SearchForm v-model=\"search\" />\r\n                        </div>\r\n                        <div class=\"float-md-right\">\r\n                            <div class=\"d-flex \">\r\n                                <b-form-select class=\"form-control\" size=\"sm\" v-model=\"periode.mois\" :options=\"mois\" />\r\n                                <b-form-select class=\"form-control\" size=\"sm\" v-model=\"periode.annee\" :options=\"annees\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"separator mb-20\"></div>\r\n                <b-overlay :show=\"showOverlay\" rounded=\"sm\">\r\n                    <b-alert variant=\"info\" class=\"text-center\" show v-if=\"!occupations.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x\"></i> <br>\r\n                        <span class=\"h4 d-inline-flex ml-2\">Vous n'avez défini aucune occupation pour le moment</span>\r\n                    </b-alert> \r\n                    <b-row v-else>\r\n                        <div class=\"card-body\">\r\n                            <b-table-simple hover small responsive>\r\n                                <b-thead head-variant=\"light\">\r\n                                    <b-tr class=\"text-center\">\r\n                                        <b-th>Logement</b-th>\r\n                                        <b-th>Locataire</b-th>\r\n                                        <b-th>Loyer de base</b-th>\r\n                                        <b-th>Consommation en eau</b-th>\r\n                                        <b-th>Consommation en lumière</b-th>\r\n                                        <b-th>Action</b-th>\r\n                                    </b-tr>\r\n                                </b-thead>\r\n                                <b-tbody>\r\n                                    <b-tr v-for=\"occupation in items\" :key=\"occupation.idOccupation\">\r\n                                       <b-td class=\"px-2 py-1\">\r\n                                            <span class=\"d-inline-block w-100 mb-1 font-weight-bold\">{{ occupation.logement.refLogement }}</span>    \r\n                                            <span class=\"d-inline-block w-100 mt-1 text-muted\">\r\n                                                {{ occupation.logement.sousTypeLogement.libelleSousType  }}\r\n                                                <span v-if=\"occupation.logement.batiment\"> / Batiment : {{ occupation.logement.batiment.nomBatiment }}</span>\r\n                                            </span>    \r\n                                        </b-td>\r\n                                        <b-td class=\"p-1\">\r\n                                            <span class=\"d-inline-block w-100 mb-1 font-weight-bold\">{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }}</span>    \r\n                                            <span class=\"d-inline-block w-100 mt-1 text-muted\">{{ occupation.locataire.tel + ' / ' + occupation.locataire.email }}</span>    \r\n                                        </b-td>\r\n                                        <b-td class=\"p-1\" v-html=\"_display_loyer(occupation)\"></b-td>\r\n                                        <b-td class=\"p-1\" v-html=\"_display_consommation(occupation, 'eau')\"></b-td>\r\n                                        <b-td class=\"p-1\" v-html=\"_display_consommation(occupation, 'energie')\"></b-td>\r\n                                        <b-td>\r\n                                            <b-dropdown right >\r\n                                                <template #button-content><i class=\"fa fa-ellipsis-h\"></i></template>\r\n                                                <b-dropdown-item :to=\"{name: 'occupation', params: {id: occupation.idOccupation}}\">Détails de l'occupation</b-dropdown-item>\r\n                                                <b-dropdown-item href=\"#\" @click.prevent=\"doPayment(occupation)\">Effectuer un paiement</b-dropdown-item>\r\n                                                <b-dropdown-item href=\"#\" @click.prevent=\"correspondance(occupation)\">Correspondance</b-dropdown-item>\r\n                                            </b-dropdown>                                            \r\n                                        </b-td>\r\n                                    </b-tr>\r\n                                </b-tbody>\r\n                            </b-table-simple>\r\n                        </div>\r\n                    </b-row>\r\n                    <hr>\r\n                    <div class=\"d-flex justify-content-between align-items-start\">\r\n                        <paginator :offset=\"offset\" :total=\"occupations.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />                   \r\n                        <b-button class=\"position-fixed validate btn-icon\" id=\"popover-options\" variant=\"danger\"><i class=\"fa fa-bars fa-lg\"></i></b-button>\r\n                        <b-popover title=\"Options\" target=\"popover-options\" triggers=\"click blur\" placement=\"topleft\">\r\n                            <div class=\"py-2\">\r\n                                <b-button block variant=\"outline-secondary\" @click.prevent=\"autoPay\" :disabled=\"submitted\">Lancer le paiement automatique <b-spinner v-if=\"submitted\" small /></b-button>\r\n                                <b-button block variant=\"outline-secondary\" @click.prevent=\"printList = true\">Générer le listing des factures</b-button>\r\n                            </div>\r\n                        </b-popover>\r\n                    </div>\r\n                </b-overlay>\r\n            </div>\r\n        </div>\r\n\r\n        <!--MODAL POUR PAYER UNE FACTURE -->\r\n        <div v-if=\"occupation\"><b-modal id=\"paiement\" title=\"Ajout de paiement\" @ok=\"runPaiement\" no-close-on-backdrop ok-only @hidden=\"resetForm\">\r\n            <template #modal-footer=\"{ ok }\">\r\n                <b-button size=\"sm\" variant=\"danger\" @click=\"ok()\" :disabled=\"submitted || totalPayerFacture <= 0\">Valider <b-spinner v-if=\"submitted\" small /></b-button>\r\n            </template>\r\n            <div class=\"jumbotron pt-10 pb-10 px-2\">\r\n                <h5 class=\"text-center mb-2\">Effectuer un versement pour:</h5>\r\n                <b-row>\r\n                    <b-col><dl>\r\n                        <dt>Logement</dt>\r\n                        <dd>{{ occupation.logement.refLogement }} <br> {{ occupation.logement.sousTypeLogement.libelleSousType  }} <br> <span v-if=\"occupation.logement.batiment\">Batiment : {{ occupation.logement.batiment.nomBatiment }}</span></dd>\r\n                    </dl></b-col>\r\n                    <b-col><dl>\r\n                        <dt>Locataire</dt>\r\n                        <dd>{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }} <br> {{ occupation.locataire.tel }} <br> {{ occupation.locataire.email }}</dd>\r\n                    </dl></b-col>\r\n                </b-row>\r\n            </div>\r\n            <b-row>\r\n                <b-col><b-form-group label=\"Loyer\" :description=\"'Avance: ' + paiement.avance[0]\">\r\n                    <b-form-checkbox v-model=\"paiement.buy[0]\" :disabled=\"paiement.disabled[0]\">Payer <b>{{ paiement.loyer + ' F' }}</b></b-form-checkbox>\r\n                </b-form-group></b-col>\r\n                <b-col><b-form-group label=\"Eau\" :description=\"'Avance: ' + paiement.avance[1]\">\r\n                    <b-form-checkbox v-model=\"paiement.buy[1]\" :disabled=\"paiement.disabled[1]\">Payer <b>{{ paiement.eau + ' F' }}</b></b-form-checkbox>\r\n                </b-form-group></b-col>\r\n                <b-col><b-form-group label=\"Lumière\" :description=\"'Avance: ' + paiement.avance[2]\">\r\n                    <b-form-checkbox v-model=\"paiement.buy[2]\" :disabled=\"paiement.disabled[2]\">Payer <b>{{ paiement.energie + ' F' }}</b></b-form-checkbox>\r\n                </b-form-group></b-col>\r\n            </b-row>\r\n            <hr>\r\n            <b-row>\r\n                <b-col><b-form-group label=\"Total à payer\" description=\"Ce prix soustrait les montants avancés par le locataire pour cette facture\">\r\n                    <b-form-input disabled :value=\"totalPayerFacture\" />\r\n                </b-form-group></b-col>\r\n                <b-col><b-form-group label=\"Montant à préléver\" description=\"Entrez le montant versé pour cette facture. Il sera débité du compte de l'occupation\">\r\n                    <b-form-input v-model=\"paiement.payer\" :disabled=\"totalPayerFacture <= 0\" />\r\n                </b-form-group></b-col>\r\n            </b-row>\r\n        </b-modal></div>\r\n\r\n        <div v-if=\"occupation\"><b-modal id=\"correspondance\" title=\"Correspondance\" no-close-on-backdrop cancel-title=\"Fermer\" ok-title=\"Imprimer\" ok-variant=\"danger\" @ok=\"(bvtEvt) => {bvtEvt.preventDefault(); printSingle = true}\">\r\n            <b-alert v-if=\"occupation.dateFin\" show variant=\"info\" class=\"text-center\">\r\n                <i class=\"fa fa-exclamation-triangle fa-5x\"></i> <br />\r\n                <p class=\"fa-2x mt-5 pt-2\">Bail terminé le {{ $dayjs(occupation.dateFin).format('dddd, DD MMMM YYYY') }}</p>\r\n            </b-alert>\r\n            <printer :display=\"true\" v-else v-model=\"printSingle\" @input=\"printSingle = false\" id=\"print-correspondance\">\r\n                <b-card class=\"border\" >\r\n                    <span class=\"float-right d-inline-block mb-5\">Yaoundé le {{ $dayjs().format('DD MMMM YYYY')}} </span>\r\n                    <br>\r\n                    <div class=\"clearfix my-3\">\r\n                        <span class=\"text-underline\">Object: </span>\r\n                        <b class=\"fa-lg\">Loyer du mois de : {{ _find_periode_loyer(occupation) }}</b>\r\n                    </div>\r\n                    <p>\r\n                        <b>{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }} ({{ occupation.locataire.tel}})</b>,\r\n                        vous occupez le logement <b>{{ occupation.logement.refLogement }} / {{ occupation.logement.sousTypeLogement.libelleSousType  }}</b> situé à \r\n                        <b>{{ occupation.logement.adresse.ville + ' ' + occupation.logement.adresse.pays + ', ' + occupation.logement.adresse.quartier }}</b>. \r\n                        <br>\r\n                        Ci-dessous, votre loyer du mois de {{ _find_periode_loyer(occupation) }}\r\n                    </p>\r\n                    <b-table-simple>\r\n                        <b-tbody>\r\n                            <b-tr>\r\n                                <b-th>Loyer de base</b-th>\r\n                                <b-td>{{ occupation.loyerBase }} F</b-td>\r\n                                <b-td>\r\n                                    <i class=\"fa fa-check-circle fa-lg text-success\" v-if=\"hasBuyLoyer[0] == 1\"></i>\r\n                                    <b-badge variant=\"warning\" v-if=\"hasBuyLoyer[0] == 2\">{{ hasBuyLoyer[1] }}</b-badge>\r\n                                </b-td>\r\n                            </b-tr>\r\n                            <b-tr>\r\n                                <b-th>Consommation en eau</b-th>\r\n                                <b-td>{{ _calcul_consommation(occupation, 'eau') }} F</b-td>\r\n                                <b-td><i class=\"fa fa-check-circle fa-lg text-success\" v-if=\"_check_if_buy_consommation(occupation, 'eau')[0] == 1\"></i></b-td>\r\n                            </b-tr>\r\n                            <b-tr>\r\n                                <b-th>Consommation en lumière</b-th>\r\n                                <b-td>{{ _calcul_consommation(occupation, 'energie') }} F</b-td>\r\n                                <b-td><i class=\"fa fa-check-circle fa-lg text-success\" v-if=\"_check_if_buy_consommation(occupation, 'energie')[0] == 1\"></i></b-td>\r\n                            </b-tr>\r\n                            <b-tr>\r\n                                <b-th>Total</b-th>\r\n                                <b-td colspan=\"2\">\r\n                                    <b class=\"fa-2x text-primary\">{{ _calcul_total_quitance_facture(occupation) }} F</b>\r\n                                </b-td>\r\n                            </b-tr>\r\n                        </b-tbody>\r\n                    </b-table-simple>\r\n                </b-card>\r\n            </printer>\r\n        </b-modal></div>\r\n\r\n        <!-- IMPRESSIONS -->   \r\n        <printer v-model=\"printList\" @input=\"printList = false\" id=\"print-liste\">\r\n            <h3 class=\"text-center mb-3\">Loyers du mois de <b>{{ $dayjs(this.periodeCourante).format('MMMM YYYY') }}</b></h3>\r\n            <b-table-simple class=\"mt-4\" hover small responsive>\r\n                <b-thead class=\"border mb-5\">\r\n                    <b-tr class=\"text-center\">\r\n                        <b-th valign=\"middle\">Logement</b-th>\r\n                        <b-th valign=\"middle\">Locataire</b-th>\r\n                        <b-th valign=\"middle\">Loyer de base</b-th>\r\n                        <b-th valign=\"middle\">Consommation en eau</b-th>\r\n                        <b-th valign=\"middle\">Consommation en lumière</b-th>\r\n                    </b-tr>\r\n                </b-thead>\r\n                <b-tbody>\r\n                    <b-tr><td colspan=\"5\">&nbsp;</td></b-tr>\r\n                    <b-tr v-for=\"occupation in trueOccupations\" :key=\"occupation.idOccupation\" class=\"pt-2\">\r\n                        <b-td class=\"px-2 py-1\">\r\n                            <span class=\"d-inline-block w-100 mb-1 font-weight-bold\">{{ occupation.logement.refLogement }}</span>    \r\n                            <span class=\"d-inline-block w-100 mt-1 text-muted\">\r\n                                {{ occupation.logement.sousTypeLogement.libelleSousType  }}\r\n                                <span v-if=\"occupation.logement.batiment\"> / Batiment : {{ occupation.logement.batiment.nomBatiment }}</span>\r\n                            </span>    \r\n                        </b-td>\r\n                        <b-td class=\"p-1\">\r\n                            <span class=\"d-inline-block w-100 mb-1 font-weight-bold\">{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }}</span>    \r\n                            <span class=\"d-inline-block w-100 mt-1 text-muted\">{{ occupation.locataire.tel + ' / ' + occupation.locataire.email }}</span>    \r\n                        </b-td>\r\n                        <b-td class=\"p-1\" v-html=\"_display_loyer(occupation)\"></b-td>\r\n                        <b-td class=\"p-1\" v-html=\"_display_consommation(occupation, 'eau')\"></b-td>\r\n                        <b-td class=\"p-1\" v-html=\"_display_consommation(occupation, 'energie')\"></b-td>\r\n                    </b-tr>\r\n                </b-tbody>\r\n            </b-table-simple>\r\n        </printer>   \r\n    </div>\r\n</template>\r\n<script>\r\nimport Printer from '@/components/Printer.vue'\r\nimport SearchForm from \"@/components/parts/SearchForm.vue\";\r\nconst php  = require ( 'phpjs' ) ; \r\n\r\nexport default {\r\n  name: \"loyers\",\r\n  components: {\r\n      SearchForm,\r\n      Printer\r\n  },\r\n  data: () => ({\r\n     search: null,\r\n     showOverlay: true,\r\n     currentPage: 1,\r\n     perPage: 10,\r\n     occupations:[],\r\n     trueOccupations:[],\r\n\r\n     periode: {annee: null, mois: null},\r\n     paiement: { payer: 0, loyer: 0, eau: 0, energie: 0, buy: [true, false, false], disabled: [false, false, false], avance: [0, 0, 0] },\r\n     occupation: null,\r\n\r\n     submitted: false,\r\n     printList: false,\r\n     printSingle: false\r\n  }),\r\n  computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() { \r\n            return php.array_slice(this.occupations.filter(elt => {\r\n                return (this.$dayjs(this.periodeCourante).diff(elt.dateDeb, 'month') >= 0 && (php.empty(elt.dateFin) || this.$dayjs(elt.dateFin).diff(this.periodeCourante, 'month') <= 0))\r\n            }), this.offset, this.perPage) \r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        },\r\n\r\n        annees() {\r\n            const current = this.$dayjs().format('YYYY')\r\n            let annees = [current]\r\n\r\n            for (let i = current; i > (current - 5); i--) {\r\n                if (i != current) {\r\n                    annees.push(i)\r\n                }\r\n            }\r\n            \r\n            return annees.sort((a, b) => a - b)\r\n        },\r\n        mois() {\r\n            const date = new Date, mois = [], \r\n                current = this.$dayjs().format('YYYY'),\r\n                limit = current == this.periode.annee ? date.getMonth() : 11\r\n            for (let i = 0; i <= limit; i++) {\r\n                date.setMonth(i)\r\n                mois.push({ value: i, text: php.ucfirst(this.$dayjs(date).format('MMMM')) })\r\n            }\r\n\r\n            return mois\r\n        },\r\n        periodeCourante() {\r\n            let periodeCourante = this.periode.mois + 1\r\n            if (periodeCourante < 10) {\r\n                periodeCourante = '0'+periodeCourante\r\n            }\r\n            return this.periode.annee + '-' +  periodeCourante + '-01'\r\n        },\r\n        \r\n        totalPayerFacture() {\r\n            let total = 0\r\n            if (this.paiement.buy[0] == true) {\r\n                total += (this.paiement.loyer - this.paiement.avance[0])\r\n            }\r\n            if (this.paiement.buy[1] == true) {\r\n                total += (this.paiement.eau - this.paiement.avance[1])\r\n            }\r\n            if (this.paiement.buy[2] == true) {\r\n                total += (this.paiement.energie - this.paiement.avance[2])\r\n            }\r\n            return total\r\n        },\r\n\r\n        hasBuyLoyer() {\r\n            return this._check_if_buy_loyer(this.occupation)\r\n        }\r\n    },\r\n\r\n    beforeMount() {\r\n        this.periode = {\r\n            mois: parseInt(this.$dayjs().format('M')) - 1,\r\n            annee: parseInt(this.$dayjs().format('YYYY'))\r\n        }\r\n        this.getOccupations()\r\n    },\r\n    methods: {\r\n        sendData(){\r\n            \r\n        },\r\n        \r\n    //recupération de la liste des logements\r\n     getOccupations() {\r\n         this.showOverlay = true\r\n            axios.get('occupations').then(response => response.result || []).then(occupations => {\r\n                this.occupations = this.trueOccupations = occupations\r\n                this.showOverlay = false\r\n            })\r\n     },\r\n     \r\n        doPayment(occupation) {\r\n            this.occupation = occupation \r\n\r\n            let [a_payer_loyer, totalPayer] = this._check_if_buy_loyer(occupation)\r\n            this.paiement.loyer = occupation.loyerBase\r\n            this.paiement.disabled[0] = a_payer_loyer == 1\r\n            this.paiement.avance[0] = totalPayer\r\n            if (totalPayer >= occupation.loyerBase) {\r\n                this.paiement.buy[0] = false\r\n            }\r\n\r\n            let [a_payer_eau, consommation_eau, indexeMois_eau] = this._check_if_buy_consommation(occupation, 'eau')\r\n            this.paiement.eau = consommation_eau\r\n            this.paiement.disabled[1] = a_payer_eau == 1\r\n            this.paiement.avance[1] = !php.empty(indexeMois_eau) ? indexeMois_eau.avance : 0\r\n\r\n            let [a_payer_energie, consommation_energie, indexeMois_energie] = this._check_if_buy_consommation(occupation, 'energie')\r\n            this.paiement.energie = consommation_energie\r\n            this.paiement.disabled[2] = a_payer_energie == 1\r\n            this.paiement.avance[2] = !php.empty(indexeMois_energie) ? indexeMois_energie.avance : 0\r\n\r\n            setTimeout(() => {\r\n                this.$bvModal.show('paiement')\r\n            }, 50);\r\n        },\r\n        runPaiement(bvtEvt) {\r\n            bvtEvt.preventDefault()\r\n            if (php.empty(this.paiement.payer) || this.paiement.payer < 1) {\r\n                return App.error('Veuillez entrer un montant valide');\r\n            }\r\n            if (this.paiement.disabled[0] && this.paiement.disabled[1] && this.paiement.buy[2]) {\r\n                return App.error('Tous les éléments de cette facture ont déjà été payés')\r\n            }\r\n            if (this.paiement.buy[0] == false && this.paiement.buy[1] == false && this.paiement.buy[2] == false) {\r\n                return App.error('Veuillez selectionnez au moins élément à payer')\r\n            }\r\n            if (this.paiement.payer > this.totalPayerFacture) {\r\n                return App.error('Vous ne pouvez pas débiter une somme supérieure au total de la facture')\r\n            }\r\n            const data = {\r\n                montant: this.paiement.payer,\r\n                periode: this.periodeCourante,\r\n                loyer: this.paiement.buy[0],\r\n                eau: this.paiement.buy[1],\r\n                energie: this.paiement.buy[2],\r\n            }\r\n            this.submitted = true \r\n\r\n            axios.post('occupations/' + this.occupation.idOccupation + '/pay-facture', data).then(response => {\r\n                this.submitted = false \r\n                return App.alertSuccess(response.message, {callback: () => {\r\n                    this.getOccupations()\r\n                    this.$bvModal.hide('paiement')\r\n                }})\r\n            }).catch(error => {\r\n                this.submitted = false\r\n                return App.alertError(error.message)\r\n            })\r\n        },\r\n\r\n        correspondance(occupation) {\r\n            this.occupation = occupation\r\n            \r\n            setTimeout(() => {\r\n                this.$bvModal.show('correspondance')\r\n            }, 50);\r\n        },\r\n\r\n        /**\r\n         * Lance le paiement automatique des facture\r\n         */\r\n        autoPay() {\r\n            this.submitted = true \r\n            axios.post('loyers/auto-pay', {periode: this.periodeCourante}).then(response => {\r\n                this.submitted = false \r\n                return App.alertSuccess(response.message, {callback: () => {\r\n                    this.getOccupations()\r\n                }})\r\n            }).catch(error => {\r\n                this.submitted = false\r\n                return App.alertError(error.message)\r\n            })\r\n        },\r\n\r\n        /**\r\n         * calcule et renvoi la consommation mensuelle d'une occupation\r\n         */\r\n        _calcul_consommation(occupation, type)\r\n        {\r\n            const indexes = occupation.indexes.filter(elt => elt.typeIndexe == type),\r\n                mode = { eau: occupation.modeEau, energie: occupation.modeEnergie },\r\n                pu = { eau: occupation.puEau, energie: occupation.puEnergie }\r\n            \r\n            let indexeMois = this.getIndexesPeriode(this.periodeCourante, indexes)[0], consommation = 1        \r\n\r\n            if (!indexeMois) {\r\n                consommation = 0\r\n            }\r\n            else if (mode[type] == 'index') {\r\n                consommation = indexeMois.nouveau  - indexeMois.ancien\r\n            }\r\n\r\n            return consommation * pu[type]\r\n        },\r\n        _display_consommation(occupation, type) \r\n        {\r\n            const [a_payer, consommation, indexeMois] = this._check_if_buy_consommation(occupation, type)\r\n            let variant = 'danger', title = 'Impayé'\r\n\r\n            if (a_payer == -1) {\r\n                variant = 'secondary'\r\n                title = 'Non consommé'\r\n            }\r\n            else if (a_payer == 2) {\r\n                variant = 'warning'\r\n                title = 'Avancé '\r\n            }\r\n            else if (a_payer == 1) {\r\n                variant = 'success'\r\n                title = 'Payé'\r\n            }\r\n\r\n            return `<span class=\"badge w-100 badge-${variant}\">\r\n                <b>${consommation}</b> F <br>\r\n                <span class=\"small\">${title}</span>\r\n            </span>`\r\n        },\r\n        _check_if_buy_consommation(occupation, type) {\r\n            const consommation = this._calcul_consommation(occupation, type)\r\n            if (consommation == 0) {\r\n                return [-1, consommation, null]\r\n            }\r\n            const indexes = occupation.indexes.filter(elt => elt.typeIndexe == type)\r\n            if (!php.empty(indexes)) {\r\n                let indexeMois = this.getIndexesPeriode(this.periodeCourante, indexes)[0]\r\n                if (!php.empty(indexeMois)) {\r\n                    if (consommation > indexeMois.avance) {\r\n                        return [2, consommation, indexeMois]\r\n                    }\r\n                    if (consommation <= indexeMois.avance) {\r\n                        return [1, consommation, indexeMois]\r\n                    }   \r\n                }\r\n            }\r\n            return [0, consommation, null]\r\n        },\r\n\r\n        _display_loyer(occupation) {\r\n            const [a_payer, totalPayer] = this._check_if_buy_loyer(occupation)\r\n            let variant = 'danger', title = 'Impayé'\r\n            \r\n            if (a_payer == 2) {\r\n                variant = 'warning'\r\n                title = 'Avancé : ' + totalPayer + ' F'\r\n            }\r\n            else if (a_payer == 1) {\r\n                variant = 'success'\r\n                    title = 'Payé'\r\n            }\r\n            \r\n            return `<span class=\"badge w-100 badge-${variant}\">\r\n                <b>${occupation.loyerBase}</b> F <br>\r\n                <span class=\"small\">${title}</span>\r\n            </span>`\r\n        },\r\n        _check_if_buy_loyer(occupation) {\r\n            const loyers = occupation.loyers.filter(e => this.$dayjs(this.periodeCourante).diff(e.periode, 'month') == 0)\r\n            if (loyers.length) {\r\n                const totalPayer = loyers.reduce((accumulator, curr) => accumulator + curr.montantPayer, 0)\r\n                if (totalPayer != 0) {\r\n                    if (totalPayer < occupation.loyerBase) {\r\n                        return [2, totalPayer]\r\n                    }\r\n                    return [1, totalPayer]\r\n                }\r\n            }\r\n            return [0, 0]\r\n        },\r\n\r\n        _calcul_total_quitance_facture(occupation) {\r\n            const loyer = parseInt(occupation.loyerBase),\r\n                [a_payer_eau, consoEau] = this._check_if_buy_consommation(occupation, 'eau'),\r\n                [a_payer_energie, consoEnergie] = this._check_if_buy_consommation(occupation, 'energie'),\r\n                [a_payer_loyer, totalPayer] = this._check_if_buy_loyer(occupation)\r\n\r\n            let total = loyer + consoEnergie + consoEau\r\n\r\n            if (a_payer_loyer != 0) {\r\n                total -= totalPayer\r\n            }\r\n            if (a_payer_energie != 0) {\r\n                total -= consoEnergie\r\n            }\r\n            if (a_payer_eau != 0) {\r\n                total -= consoEau\r\n            }\r\n            return total\r\n        },\r\n\r\n        _find_periode_loyer(occupation) {\r\n            if (occupation.modePaiement == 'prepayer') {\r\n                return this.$dayjs(this.periodeCourante).add(1, 'month').format('MMMM YYYY')\r\n            }\r\n            return this.$dayjs(this.periodeCourante).format('MMMM YYYY')\r\n        },\r\n\r\n\r\n        getIndexesPeriode(periode, indexes) {\r\n            return indexes.filter(e => this.$dayjs(periode).diff(e.periode, 'month') == 0)\r\n        },\r\n\r\n        resetForm() {\r\n            this.paiement = { a_payer: 0, payer: 0, loyer: 0, eau: 0, buy: [true, false, false], disabled: [false, false, false], avance: [0, 0, 0] }\r\n        },\r\n    }\r\n\r\n};\r\n</script>\r\n<style scoped>\r\n    .text-form-occupation {\r\n        font-size: 1.3em;\r\n        color: #212121ef;\r\n        font-weight: 800;\r\n        text-align: center;\r\n        margin-top: 2px;\r\n    }\r\nbutton.validate{\r\n    bottom: 1em;\r\n    right: 1em;\r\n    width: 3em;\r\n    height: 3em;\r\n    box-shadow: 3px 1px 1px gray;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loyers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loyers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loyers.vue?vue&type=template&id=7fdd5301&scoped=true&\"\nimport script from \"./Loyers.vue?vue&type=script&lang=js&\"\nexport * from \"./Loyers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loyers.vue?vue&type=style&index=0&id=7fdd5301&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7fdd5301\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Printer.vue?vue&type=style&index=0&id=00a30cea&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\"},[_c('form',{attrs:{\"action\":\"\",\"onSubmit\":\"return false\"}},[_c('b-form-input',{staticStyle:{\"height\":\"40px\",\"width\":\"350px\",\"border-radius\":\"5px\"},attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder},on:{\"input\":function (data) { _vm.$emit('input', data) }},model:{value:(_vm.val),callback:function ($$v) {_vm.val=$$v},expression:\"val\"}}),_vm._m(0)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-icon\",staticStyle:{\"height\":\"40px\",\"width\":\"50px\"},attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"ik ik-search\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\">\r\n        <form action=\"\" onSubmit=\"return false\">\r\n            <b-form-input type=\"text\" :placeholder=\"placeholder\" @input=\"(data) => { $emit('input', data) }\" style=\"height: 40px; width: 350px; border-radius: 5px;\" v-model=\"val\" />\r\n            <button type=\"submit\" class=\"btn btn-icon\" style=\"height: 40px; width:50px;\"><i class=\"ik ik-search\"></i></button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: \"SearchForm\",\r\n    props: {\r\n        placeholder: { type: String, default: \"Rechercher...\"},\r\n        value: { default: null, },\r\n    },\r\n    data: () => ({\r\n        val: null,\r\n    }),\r\n    mounted: () => {\r\n        console.log(\"ldldldld: \"+ \" this.value\")\r\n        console.log(JSON.parse(JSON.stringify(this.value)))\r\n        \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchForm.vue?vue&type=template&id=394c7419&scoped=true&\"\nimport script from \"./SearchForm.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"394c7419\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}