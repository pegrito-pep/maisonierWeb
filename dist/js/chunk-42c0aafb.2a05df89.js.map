{"version":3,"sources":["webpack:///./src/views/finances/Loyers.vue?1a38","webpack:///./src/views/finances/Loyers.vue?3f5b","webpack:///src/views/finances/Loyers.vue","webpack:///./src/views/finances/Loyers.vue?6887","webpack:///./src/views/finances/Loyers.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","expression","domProps","on","$event","target","composing","search","_m","mois","setIndexesMois","periode","annee","model","callback","$$v","$set","annees","showOverlay","occupations","length","_v","_l","occupation","key","idOccupation","_s","logement","refLogement","sousTypeLogement","libelleSousType","batiment","nomBatiment","_e","locataire","titre","nomLocataire","prenomLocataire","tel","email","_display_loyer","_display_consommation","scopedSlots","_u","fn","proxy","params","id","preventDefault","doPayment","correspondance","offset","perPage","currentPage","page","limit","text","disabled","paiement","$dayjs","dateFin","format","_find_periode_loyer","adresse","ville","pays","quartier","loyerBase","_calcul_consommation","parseInt","staticRenderFns","php","data","trueOccupations","type","loyer","eau","computed","array_slice","filter","elt","dateDeb","diff","periodeCourante","empty","current","i","push","sort","a","b","date","Date","getMonth","setMonth","ucfirst","getOccupations","methods","axios","get","then","response","result","energie","setTimeout","$bvModal","show","indexes","typeIndexe","mode","modeEau","modeEnergie","pu","puEau","puEnergie","indexeMois","getIndexesPeriode","consommation","nouveau","ancien","variant","title","loyers","e","totalPayer","reduce","accumulator","curr","montantPayer","modePaiement","add","component"],"mappings":"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","file":"js/chunk-42c0aafb.2a05df89.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loyers.vue?vue&type=style&index=0&id=a2d975c8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('page-description',{attrs:{\"title\":\"Loyers\",\"description\":\"Fiche de loyers\",\"icon\":\"list\",\"path\":['Finances', 'Loyers']}}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"mb-2 clearfix\"},[_c('div',{staticClass:\"collapse d-md-block display-options\",attrs:{\"id\":\"displayOptions\"}},[_c('div',{staticClass:\"d-block d-md-inline-block\"},[_c('div',{staticClass:\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\"},[_c('form',{attrs:{\"action\":\"\",\"onSubmit\":\"return false\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Recherche...\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}}),_vm._m(0)])])]),_c('div',{staticClass:\"float-md-right\"},[_c('div',{staticClass:\"d-flex \"},[_c('b-form-select',{staticClass:\"form-control\",attrs:{\"size\":\"sm\",\"options\":_vm.mois},on:{\"input\":function (value) { return _vm.setIndexesMois(value, _vm.periode.annee); }},model:{value:(_vm.periode.mois),callback:function ($$v) {_vm.$set(_vm.periode, \"mois\", $$v)},expression:\"periode.mois\"}}),_c('b-form-select',{staticClass:\"form-control\",attrs:{\"size\":\"sm\",\"options\":_vm.annees},on:{\"input\":function (value) { return _vm.setIndexesMois(_vm.periode.mois, value); }},model:{value:(_vm.periode.annee),callback:function ($$v) {_vm.$set(_vm.periode, \"annee\", $$v)},expression:\"periode.annee\"}})],1)])])]),_c('div',{staticClass:\"separator mb-20\"}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[(!_vm.occupations.length)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x\"}),_vm._v(\" \"),_c('br'),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Vous n'avez défini aucune occupation pour le moment\")])]):_c('b-row',[_c('div',{staticClass:\"card-body\"},[_c('b-table-simple',{attrs:{\"hover\":\"\",\"small\":\"\",\"responsive\":\"\"}},[_c('b-thead',{attrs:{\"head-variant\":\"light\"}},[_c('b-tr',{staticClass:\"text-center\"},[_c('b-th',[_vm._v(\"Logement\")]),_c('b-th',[_vm._v(\"Locataire\")]),_c('b-th',[_vm._v(\"Loyer de base\")]),_c('b-th',[_vm._v(\"Consommation en eau\")]),_c('b-th',[_vm._v(\"Consommation en lumière\")]),_c('b-th',[_vm._v(\"Action\")])],1)],1),_c('b-tbody',_vm._l((_vm.items),function(occupation){return _c('b-tr',{key:occupation.idOccupation},[_c('b-td',{staticClass:\"px-2 py-1\"},[_c('span',{staticClass:\"d-inline-block w-100 mb-1 font-weight-bold\"},[_vm._v(_vm._s(occupation.logement.refLogement))]),_c('span',{staticClass:\"d-inline-block w-100 mt-1 text-muted\"},[_vm._v(\" \"+_vm._s(occupation.logement.sousTypeLogement.libelleSousType)+\" \"),(occupation.logement.batiment)?_c('span',[_vm._v(\" / Batiment : \"+_vm._s(occupation.logement.batiment.nomBatiment))]):_vm._e()])]),_c('b-td',{staticClass:\"p-1\"},[_c('span',{staticClass:\"d-inline-block w-100 mb-1 font-weight-bold\"},[_vm._v(_vm._s(occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire))]),_c('span',{staticClass:\"d-inline-block w-100 mt-1 text-muted\"},[_vm._v(_vm._s(occupation.locataire.tel + ' / ' + occupation.locataire.email))])]),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_loyer(occupation))}}),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_consommation(occupation, 'eau'))}}),_c('b-td',{staticClass:\"p-1\",domProps:{\"innerHTML\":_vm._s(_vm._display_consommation(occupation, 'energie'))}}),_c('b-td',[_c('b-dropdown',{attrs:{\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('i',{staticClass:\"fa fa-ellipsis-h\"})]},proxy:true}],null,true)},[_c('b-dropdown-item',{attrs:{\"to\":{name: 'details-occupation', params: {id: occupation.idOccupation}}}},[_vm._v(\"Détails de l'occupation\")]),_c('b-dropdown-item',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.doPayment(occupation)}}},[_vm._v(\"Effectuer un paiement\")]),_c('b-dropdown-item',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.correspondance(occupation)}}},[_vm._v(\"Correspondance\")])],1)],1)],1)}),1)],1)],1)]),_c('paginator',{attrs:{\"hr\":\"top\",\"offset\":_vm.offset,\"total\":_vm.occupations.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}})],1)],1)]),(_vm.occupation)?_c('div',[_c('b-modal',{attrs:{\"id\":\"paiement\",\"title\":\"Ajout de paiement\",\"size\":\"lg\",\"no-close-on-backdrop\":\"\",\"ok-only\":\"\",\"ok-title\":\"Valider\",\"ok-variant\":\"danger\"}},[_c('div',{staticClass:\"jumbotron pt-10 pb-10 px-2\"},[_c('h4',{staticClass:\"text-center\"},[_vm._v(\"Effectuer un versement pour:\")]),_c('b-row',[_c('b-col',[_c('dl',[_c('dt',[_vm._v(\"Logement\")]),_c('dd',[_vm._v(_vm._s(_vm.occupation.logement.refLogement)+\" / \"+_vm._s(_vm.occupation.logement.sousTypeLogement.libelleSousType)+\" \"),_c('br'),_vm._v(\" \"),(_vm.occupation.logement.batiment)?_c('span',[_vm._v(\"Batiment : \"+_vm._s(_vm.occupation.logement.batiment.nomBatiment))]):_vm._e()])])]),_c('b-col',[_c('dl',[_c('dt',[_vm._v(\"Locataire\")]),_c('dd',[_vm._v(_vm._s(_vm.occupation.locataire.titre + ' ' + _vm.occupation.locataire.nomLocataire + ' ' + _vm.occupation.locataire.prenomLocataire)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.occupation.locataire.tel + ' / ' + _vm.occupation.locataire.email))])])])],1)],1),_c('b-row',[_c('b-col',[_c('h5',{staticClass:\"border-bottom mb-3\"},[_vm._v(\"Paiement du loyer\")]),_c('b-form-group',{attrs:{\"label\":\"Type de paiement\",\"description\":\"Par quel canal doit-on effectuer le paiement\"}},[_c('b-form-select',{attrs:{\"options\":[\n                          {text: 'Selectionnez une méthode', value: null, disabled: true},\n                          {text: 'Payer en espèce', value: 'espece'},\n                          {text: 'Payer à partir du compte loyer', value: 'loyer'} ]},model:{value:(_vm.paiement.type),callback:function ($$v) {_vm.$set(_vm.paiement, \"type\", $$v)},expression:\"paiement.type\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Montant\",\"description\":\"Combien doit-on verser\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"disabled\":\"\"},model:{value:(_vm.paiement.loyer),callback:function ($$v) {_vm.$set(_vm.paiement, \"loyer\", $$v)},expression:\"paiement.loyer\"}})],1)],1),_c('b-col',[_c('h5',{staticClass:\"border-bottom mb-3\"},[_vm._v(\"Paiement de l'eau\")]),_c('b-form-group',{attrs:{\"label\":\"Type de paiement\",\"description\":\"Par quel canal doit-on effectuer le paiement\"}},[_c('b-form-select',{attrs:{\"options\":[\n                          {text: 'Selectionnez une méthode', value: null, disabled: true},\n                          {text: 'Payer en espèce', value: 'espece'},\n                          {text: 'Payer à partir de compte eau', value: 'eau'} ]},model:{value:(_vm.paiement.type),callback:function ($$v) {_vm.$set(_vm.paiement, \"type\", $$v)},expression:\"paiement.type\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Montant\",\"description\":\"Combien doit-on verser\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"disabled\":\"\"},model:{value:(_vm.paiement.eau),callback:function ($$v) {_vm.$set(_vm.paiement, \"eau\", $$v)},expression:\"paiement.eau\"}})],1)],1),_c('b-col',[_c('h5',{staticClass:\"border-bottom mb-3\"},[_vm._v(\"Paiement de la lumière\")]),_c('b-form-group',{attrs:{\"label\":\"Type de paiement\",\"description\":\"Par quel canal doit-on effectuer le paiement\"}},[_c('b-form-select',{attrs:{\"options\":[\n                          {text: 'Selectionnez une méthode', value: null, disabled: true},\n                          {text: 'Payer en espèce', value: 'espece'},\n                          {text: 'Payer à partir de compte lumière', value: 'energie'} ]},model:{value:(_vm.paiement.type),callback:function ($$v) {_vm.$set(_vm.paiement, \"type\", $$v)},expression:\"paiement.type\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Montant\",\"description\":\"Combien doit-on verser\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"disabled\":\"\"},model:{value:(_vm.paiement.energie),callback:function ($$v) {_vm.$set(_vm.paiement, \"energie\", $$v)},expression:\"paiement.energie\"}})],1)],1)],1)],1)],1):_vm._e(),(_vm.occupation)?_c('div',[_c('b-modal',{attrs:{\"id\":\"correspondance\",\"title\":\"Correspondance\",\"no-close-on-backdrop\":\"\",\"ok-only\":\"\",\"ok-title\":\"Fermer\",\"ok-variant\":\"secondary\"}},[(_vm.occupation.dateFin)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"show\":\"\",\"variant\":\"info\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-5x\"}),_vm._v(\" \"),_c('br'),_c('p',{staticClass:\"fa-2x mt-5 pt-2\"},[_vm._v(\"Bail terminé le \"+_vm._s(_vm.$dayjs(_vm.occupation.dateFin).format('dddd, DD MMMM YYYY')))])]):_c('div',[_c('b-card',{staticClass:\"border\"},[_c('span',{staticClass:\"float-right d-inline-block mb-5\"},[_vm._v(\"Yaoundé le \"+_vm._s(_vm.$dayjs().format('DD MMMM YYYY'))+\" \")]),_c('br'),_c('div',{staticClass:\"clearfix my-3\"},[_c('span',{staticClass:\"text-underline\"},[_vm._v(\"Object: \")]),_c('b',{staticClass:\"fa-lg\"},[_vm._v(\"Loyer du mois de : \"+_vm._s(_vm._find_periode_loyer(_vm.occupation)))])]),_c('p',[_c('b',[_vm._v(_vm._s(_vm.occupation.locataire.titre + ' ' + _vm.occupation.locataire.nomLocataire + ' ' + _vm.occupation.locataire.prenomLocataire)+\" (\"+_vm._s(_vm.occupation.locataire.tel)+\")\")]),_vm._v(\", vous occupez le logement \"),_c('b',[_vm._v(_vm._s(_vm.occupation.logement.refLogement)+\" / \"+_vm._s(_vm.occupation.logement.sousTypeLogement.libelleSousType))]),_vm._v(\" situé à \"),_c('b',[_vm._v(_vm._s(_vm.occupation.logement.adresse.ville + ' ' + _vm.occupation.logement.adresse.pays + ', ' + _vm.occupation.logement.adresse.quartier))]),_vm._v(\". \"),_c('br'),_vm._v(\" Ci-dessous, votre loyer du mois de \"+_vm._s(_vm._find_periode_loyer(_vm.occupation))+\" \")]),_c('b-table-simple',[_c('b-tbody',[_c('b-tr',[_c('b-th',[_vm._v(\"Loyer de base\")]),_c('b-td',[_vm._v(_vm._s(_vm.occupation.loyerBase)+\" F\")])],1),_c('b-tr',[_c('b-th',[_vm._v(\"Consommation en eau\")]),_c('b-td',[_vm._v(_vm._s(_vm._calcul_consommation(_vm.occupation, 'eau'))+\" F\")])],1),_c('b-tr',[_c('b-th',[_vm._v(\"Consommation en lumière\")]),_c('b-td',[_vm._v(_vm._s(_vm._calcul_consommation(_vm.occupation, 'energie'))+\" F\")])],1),_c('b-tr',[_c('b-th',[_vm._v(\"Total\")]),_c('b-td',[_c('b',{staticClass:\"fa-2x text-primary\"},[_vm._v(\" \"+_vm._s(parseInt(_vm.occupation.loyerBase) + _vm._calcul_consommation(_vm.occupation, 'energie') + _vm._calcul_consommation(_vm.occupation, 'eau'))+\" F \")])])],1)],1)],1)],1)],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-icon\",attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"ik ik-search\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container-fluid\">\r\n        <!--page header start -->\r\n        <page-description title=\"Loyers\" description=\"Fiche de loyers\" icon=\"list\" :path=\"['Finances', 'Loyers']\" />\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"mb-2 clearfix\">\r\n                    <div class=\"collapse d-md-block display-options\" id=\"displayOptions\">               \r\n                        <div class=\"d-block d-md-inline-block\">\r\n                            <div class=\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\">\r\n                                <form action=\"\" onSubmit=\"return false\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Recherche...\" v-model=\"search\">\r\n                                    <button type=\"submit\" class=\"btn btn-icon\"><i class=\"ik ik-search\"></i></button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"float-md-right\">\r\n                            <div class=\"d-flex \">\r\n                                <b-form-select class=\"form-control\" size=\"sm\" @input=\"(value) => setIndexesMois(value, periode.annee)\" v-model=\"periode.mois\" :options=\"mois\"></b-form-select>\r\n                                <b-form-select class=\"form-control\" size=\"sm\" @input=\"(value) => setIndexesMois(periode.mois, value)\" v-model=\"periode.annee\" :options=\"annees\"></b-form-select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"separator mb-20\"></div>\r\n                <b-overlay :show=\"showOverlay\" rounded=\"sm\">\r\n                    <b-alert variant=\"info\" class=\"text-center\" show v-if=\"!occupations.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x\"></i> <br>\r\n                        <span class=\"h4 d-inline-flex ml-2\">Vous n'avez défini aucune occupation pour le moment</span>\r\n                    </b-alert> \r\n                    <b-row v-else>\r\n                        <div class=\"card-body\">\r\n                            <b-table-simple hover small responsive>\r\n                                <b-thead head-variant=\"light\">\r\n                                    <b-tr class=\"text-center\">\r\n                                        <b-th>Logement</b-th>\r\n                                        <b-th>Locataire</b-th>\r\n                                        <b-th>Loyer de base</b-th>\r\n                                        <b-th>Consommation en eau</b-th>\r\n                                        <b-th>Consommation en lumière</b-th>\r\n                                        <b-th>Action</b-th>\r\n                                    </b-tr>\r\n                                </b-thead>\r\n                                <b-tbody>\r\n                                    <b-tr v-for=\"occupation in items\" :key=\"occupation.idOccupation\">\r\n                                       <b-td class=\"px-2 py-1\">\r\n                                            <span class=\"d-inline-block w-100 mb-1 font-weight-bold\">{{ occupation.logement.refLogement }}</span>    \r\n                                            <span class=\"d-inline-block w-100 mt-1 text-muted\">\r\n                                                {{ occupation.logement.sousTypeLogement.libelleSousType  }}\r\n                                                <span v-if=\"occupation.logement.batiment\"> / Batiment : {{ occupation.logement.batiment.nomBatiment }}</span>\r\n                                            </span>    \r\n                                        </b-td>\r\n                                        <b-td class=\"p-1\">\r\n                                            <span class=\"d-inline-block w-100 mb-1 font-weight-bold\">{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }}</span>    \r\n                                            <span class=\"d-inline-block w-100 mt-1 text-muted\">{{ occupation.locataire.tel + ' / ' + occupation.locataire.email }}</span>    \r\n                                        </b-td>\r\n                                        <b-td class=\"p-1\" v-html=\"_display_loyer(occupation)\"></b-td>\r\n                                        <b-td class=\"p-1\" v-html=\"_display_consommation(occupation, 'eau')\"></b-td>\r\n                                        <b-td class=\"p-1\" v-html=\"_display_consommation(occupation, 'energie')\"></b-td>\r\n                                        <b-td>\r\n                                            <b-dropdown right >\r\n                                                <template #button-content><i class=\"fa fa-ellipsis-h\"></i></template>\r\n                                                <b-dropdown-item :to=\"{name: 'details-occupation', params: {id: occupation.idOccupation}}\">Détails de l'occupation</b-dropdown-item>\r\n                                                <b-dropdown-item href=\"#\" @click.prevent=\"doPayment(occupation)\">Effectuer un paiement</b-dropdown-item>\r\n                                                <b-dropdown-item href=\"#\" @click.prevent=\"correspondance(occupation)\">Correspondance</b-dropdown-item>\r\n                                            </b-dropdown>                                            \r\n                                        </b-td>\r\n                                    </b-tr>\r\n                                </b-tbody>\r\n                            </b-table-simple>\r\n                        </div>\r\n                    </b-row>\r\n                    <paginator hr=\"top\" :offset=\"offset\" :total=\"occupations.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" />                   \r\n                </b-overlay>\r\n            </div>\r\n        </div>\r\n\r\n        <!--MODAL POUR AJOUTER OU MODIFIER UNE OCCUPATION-->\r\n        <div v-if=\"occupation\"><b-modal id=\"paiement\" title=\"Ajout de paiement\" size=\"lg\" no-close-on-backdrop ok-only ok-title=\"Valider\" ok-variant=\"danger\">\r\n            <div class=\"jumbotron pt-10 pb-10 px-2\">\r\n                <h4 class=\"text-center\">Effectuer un versement pour:</h4>\r\n                <b-row>\r\n                    <b-col><dl>\r\n                        <dt>Logement</dt>\r\n                        <dd>{{ occupation.logement.refLogement }} / {{ occupation.logement.sousTypeLogement.libelleSousType  }} <br> <span v-if=\"occupation.logement.batiment\">Batiment : {{ occupation.logement.batiment.nomBatiment }}</span></dd>\r\n                    </dl></b-col>\r\n                    <b-col><dl>\r\n                        <dt>Locataire</dt>\r\n                        <dd>{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }} <br> {{ occupation.locataire.tel + ' / ' + occupation.locataire.email }}</dd>\r\n                    </dl></b-col>\r\n                </b-row>\r\n             \r\n            </div>\r\n            <b-row>\r\n                <b-col>\r\n                    <h5 class=\"border-bottom mb-3\">Paiement du loyer</h5>\r\n                    <b-form-group label=\"Type de paiement\" description=\"Par quel canal doit-on effectuer le paiement\">\r\n                        <b-form-select :options=\"[\r\n                            {text: 'Selectionnez une méthode', value: null, disabled: true},\r\n                            {text: 'Payer en espèce', value: 'espece'},\r\n                            {text: 'Payer à partir du compte loyer', value: 'loyer'},\r\n                        ]\" v-model=\"paiement.type\" />\r\n                    </b-form-group>\r\n                    <b-form-group label=\"Montant\" description=\"Combien doit-on verser\">\r\n                        <b-form-input type=\"number\" v-model=\"paiement.loyer\" disabled />\r\n                    </b-form-group>\r\n                </b-col>\r\n                <b-col>\r\n                    <h5 class=\"border-bottom mb-3\">Paiement de l'eau</h5>\r\n                    <b-form-group label=\"Type de paiement\" description=\"Par quel canal doit-on effectuer le paiement\">\r\n                        <b-form-select :options=\"[\r\n                            {text: 'Selectionnez une méthode', value: null, disabled: true},\r\n                            {text: 'Payer en espèce', value: 'espece'},\r\n                            {text: 'Payer à partir de compte eau', value: 'eau'},\r\n                        ]\" v-model=\"paiement.type\" />\r\n                    </b-form-group>\r\n                    <b-form-group label=\"Montant\" description=\"Combien doit-on verser\">\r\n                        <b-form-input type=\"number\" v-model=\"paiement.eau\" disabled />\r\n                    </b-form-group>\r\n                </b-col>\r\n                <b-col>\r\n                    <h5 class=\"border-bottom mb-3\">Paiement de la lumière</h5>\r\n                    <b-form-group label=\"Type de paiement\" description=\"Par quel canal doit-on effectuer le paiement\">\r\n                        <b-form-select :options=\"[\r\n                            {text: 'Selectionnez une méthode', value: null, disabled: true},\r\n                            {text: 'Payer en espèce', value: 'espece'},\r\n                            {text: 'Payer à partir de compte lumière', value: 'energie'},\r\n                        ]\" v-model=\"paiement.type\" />\r\n                    </b-form-group>\r\n                    <b-form-group label=\"Montant\" description=\"Combien doit-on verser\">\r\n                        <b-form-input type=\"number\" v-model=\"paiement.energie\" disabled />\r\n                    </b-form-group>\r\n                </b-col>\r\n            </b-row>\r\n        </b-modal></div>\r\n\r\n        <div v-if=\"occupation\"><b-modal id=\"correspondance\" title=\"Correspondance\" no-close-on-backdrop ok-only ok-title=\"Fermer\" ok-variant=\"secondary\">\r\n            <b-alert v-if=\"occupation.dateFin\" show variant=\"info\" class=\"text-center\">\r\n                <i class=\"fa fa-exclamation-triangle fa-5x\"></i> <br />\r\n                <p class=\"fa-2x mt-5 pt-2\">Bail terminé le {{ $dayjs(occupation.dateFin).format('dddd, DD MMMM YYYY') }}</p>\r\n            </b-alert>\r\n            <div v-else>\r\n                <b-card class=\"border\" >\r\n                    <span class=\"float-right d-inline-block mb-5\">Yaoundé le {{ $dayjs().format('DD MMMM YYYY')}} </span>\r\n                    <br>\r\n                    <div class=\"clearfix my-3\">\r\n                        <span class=\"text-underline\">Object: </span>\r\n                        <b class=\"fa-lg\">Loyer du mois de : {{ _find_periode_loyer(occupation) }}</b>\r\n                    </div>\r\n                    <p>\r\n                        <b>{{ occupation.locataire.titre + ' ' + occupation.locataire.nomLocataire + ' ' + occupation.locataire.prenomLocataire }} ({{ occupation.locataire.tel}})</b>,\r\n                        vous occupez le logement <b>{{ occupation.logement.refLogement }} / {{ occupation.logement.sousTypeLogement.libelleSousType  }}</b> situé à \r\n                        <b>{{ occupation.logement.adresse.ville + ' ' + occupation.logement.adresse.pays + ', ' + occupation.logement.adresse.quartier }}</b>. \r\n                        <br>\r\n                        Ci-dessous, votre loyer du mois de {{ _find_periode_loyer(occupation) }}\r\n                    </p>\r\n                    <b-table-simple>\r\n                        <b-tbody>\r\n                            <b-tr><b-th>Loyer de base</b-th><b-td>{{ occupation.loyerBase }} F</b-td></b-tr>\r\n                            <b-tr><b-th>Consommation en eau</b-th><b-td>{{ _calcul_consommation(occupation, 'eau') }} F</b-td></b-tr>\r\n                            <b-tr><b-th>Consommation en lumière</b-th><b-td>{{ _calcul_consommation(occupation, 'energie') }} F</b-td></b-tr>\r\n                            <b-tr><b-th>Total</b-th><b-td><b class=\"fa-2x text-primary\">\r\n                                {{ parseInt(occupation.loyerBase) + _calcul_consommation(occupation, 'energie') + _calcul_consommation(occupation, 'eau') }} F    \r\n                            </b></b-td>\r\n                        </b-tr>\r\n                        </b-tbody>\r\n                        \r\n                    </b-table-simple>\r\n                </b-card>\r\n            </div>\r\n        </b-modal></div>\r\n        \r\n  </div>\r\n</template>\r\n<script>\r\n\r\n  const php  = require ( 'phpjs' ) ; \r\n\r\nexport default {\r\n  name: \"list-occupations\",\r\n  data: () => ({\r\n     search: null,\r\n     showOverlay: true,\r\n     currentPage: 1,\r\n     perPage: 10,\r\n     occupations:[],\r\n     trueOccupations:[],\r\n\r\n     periode: {annee: null, mois: null},\r\n     paiement: { type: null, loyer: 0, eau: 0 },\r\n     occupation: null,\r\n  }),\r\n  computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() { \r\n            return php.array_slice(this.occupations.filter(elt => {\r\n                return (this.$dayjs(elt.dateDeb).diff(this.periodeCourante, 'month') >= 0 && (php.empty(elt.dateFin) || this.$dayjs(elt.dateFin).diff(this.periodeCourante, 'month') <= 0))\r\n            }), this.offset, this.perPage) \r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        },\r\n\r\n        annees() {\r\n            const current = this.$dayjs().format('YYYY')\r\n            let annees = [current]\r\n\r\n            for (let i = current; i > (current - 5); i--) {\r\n                if (i != current) {\r\n                    annees.push(i)\r\n                }\r\n            }\r\n            \r\n            return annees.sort((a, b) => a - b)\r\n        },\r\n        mois() {\r\n            const date = new Date, mois = [], \r\n                current = this.$dayjs().format('YYYY'),\r\n                limit = current == this.periode.annee ? date.getMonth() : 11\r\n            for (let i = 0; i <= limit; i++) {\r\n                date.setMonth(i)\r\n                mois.push({ value: i, text: php.ucfirst(this.$dayjs(date).format('MMMM')) })\r\n            }\r\n\r\n            return mois\r\n        },\r\n        periodeCourante() {\r\n            let periodeCourante = this.periode.mois + 1\r\n            if (periodeCourante < 10) {\r\n                periodeCourante = '0'+periodeCourante\r\n            }\r\n            return this.periode.annee + '-' +  periodeCourante + '-01'\r\n        },\r\n    },\r\n\r\n    beforeMount() {\r\n        this.periode = {\r\n            mois: parseInt(this.$dayjs().format('M')) - 1,\r\n            annee: parseInt(this.$dayjs().format('YYYY'))\r\n        }\r\n        this.getOccupations()\r\n    },\r\n    methods: {\r\n        sendData(){\r\n            \r\n        },\r\n        \r\n    //recupération de la liste des logements\r\n     getOccupations() {\r\n            axios.get('occupations').then(response => response.result || []).then(occupations => {\r\n                this.occupations = this.trueOccupations = occupations\r\n                this.showOverlay = false\r\n            })\r\n     },\r\n     \r\n        doPayment(occupation) {\r\n            this.occupation = occupation\r\n            this.paiement.loyer = occupation.loyerBase\r\n            this.paiement.eau = this._calcul_consommation(occupation, 'eau')\r\n            this.paiement.energie = this._calcul_consommation(occupation, 'energie')\r\n\r\n            setTimeout(() => {\r\n                this.$bvModal.show('paiement')\r\n            }, 50);\r\n        },\r\n        correspondance(occupation) {\r\n            this.occupation = occupation\r\n            \r\n            setTimeout(() => {\r\n                this.$bvModal.show('correspondance')\r\n            }, 50);\r\n        },\r\n\r\n        /**\r\n         * calcule et renvoi la consommation mensuelle d'une occupation\r\n         */\r\n        _calcul_consommation(occupation, type)\r\n        {\r\n            const indexes = occupation.indexes.filter(elt => elt.typeIndexe == type),\r\n                mode = { eau: occupation.modeEau, energie: occupation.modeEnergie },\r\n                pu = { eau: occupation.puEau, energie: occupation.puEnergie }\r\n            \r\n            let indexeMois = this.getIndexesPeriode(this.periodeCourante, indexes)[0], consommation = 1        \r\n\r\n            if (!indexeMois) {\r\n                consommation = 0\r\n            }\r\n            else if (mode[type] == 'index') {\r\n                consommation = indexeMois.nouveau  - indexeMois.ancien\r\n            }\r\n\r\n            return consommation * pu[type]\r\n        },\r\n        _display_consommation(occupation, type) \r\n        {\r\n            const consommation = this._calcul_consommation(occupation, type)\r\n\r\n            let variant = 'danger', title = 'Impayé'\r\n            if (consommation == 0) {\r\n                variant = 'secondary'\r\n                title = 'Non consommé'\r\n            }\r\n\r\n            return `<span class=\"badge w-100 badge-${variant}\">\r\n                <b>${consommation}</b> F <br>\r\n                <span class=\"small\">${title}</span>\r\n            </span>`\r\n        },\r\n        _display_loyer(occupation) {\r\n            const loyers = occupation.loyers.filter(e => this.$dayjs(this.periodeCourante).diff(e.periode, 'month') == 0)\r\n\r\n            let variant = 'danger', title = 'Impayé'\r\n            if (loyers.length) {\r\n                const totalPayer = loyers.reduce((accumulator, curr) => accumulator + curr.montantPayer)\r\n                if (totalPayer != 0) {\r\n                    if (totalPayer < occupation.loyerBase) {\r\n                        variant = 'warning'\r\n                        title = 'Avancé : ' + totalPayer + ' F'\r\n                    }\r\n                    else {\r\n                        variant = 'success'\r\n                        title = 'Payé'\r\n                    }\r\n                }\r\n            }\r\n\r\n            return `<span class=\"badge w-100 badge-${variant}\">\r\n                <b>${occupation.loyerBase}</b> F <br>\r\n                <span class=\"small\">${title}</span>\r\n            </span>`\r\n        },\r\n\r\n        _find_periode_loyer(occupation) {\r\n            if (occupation.modePaiement == 'prepayer') {\r\n                return this.$dayjs(this.periodeCourante).add(1, 'month').format('MMMM YYYY')\r\n            }\r\n            return this.$dayjs(this.periodeCourante).format('MMMM YYYY')\r\n        },\r\n\r\n\r\n        getIndexesPeriode(periode, indexes) {\r\n            return indexes.filter(e => this.$dayjs(periode).diff(e.periode, 'month') == 0)\r\n        }\r\n    }\r\n\r\n};\r\n</script>\r\n<style scoped>\r\n    .text-form-occupation {\r\n        font-size: 1.3em;\r\n        color: #212121ef;\r\n        font-weight: 800;\r\n        text-align: center;\r\n        margin-top: 2px;\r\n    }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loyers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loyers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loyers.vue?vue&type=template&id=a2d975c8&scoped=true&\"\nimport script from \"./Loyers.vue?vue&type=script&lang=js&\"\nexport * from \"./Loyers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loyers.vue?vue&type=style&index=0&id=a2d975c8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a2d975c8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}