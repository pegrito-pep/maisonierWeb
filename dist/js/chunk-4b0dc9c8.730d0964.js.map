{"version":3,"sources":["webpack:///./src/views/finances/Indexes.vue?b173","webpack:///./src/views/finances/Indexes.vue?4ffe","webpack:///src/views/finances/Indexes.vue","webpack:///./src/views/finances/Indexes.vue?3c93","webpack:///./src/views/finances/Indexes.vue","webpack:///./src/components/parts/SearchForm.vue?a393","webpack:///src/components/parts/SearchForm.vue","webpack:///./src/components/parts/SearchForm.vue?d005","webpack:///./src/components/parts/SearchForm.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","search","expression","mois","on","setIndexesMois","periode","annee","$set","annees","showOverlay","logements","length","_l","logement","key","idLogement","refLogement","sousTypeLogement","libelleSousType","indexeMois","staticStyle","indexe","i","_v","_s","$dayjs","format","nouveau","ancien","indexePassee","offset","perPage","currentPage","page","limit","directives","name","rawName","modifiers","submitted","$event","preventDefault","submitForm","apply","arguments","staticRenderFns","php","components","SearchForm","data","trueLogements","watch","empty","filter","elt","toLowerCase","includes","computed","array_slice","current","push","sort","a","b","date","Date","getMonth","setMonth","text","ucfirst","parseInt","getLogements","methods","popoverShow","axios","get","then","response","result","indexes","forEach","eau","energie","post","App","notifySuccess","message","catch","error","alertError","periodeCourante","setIndexesPeriode","periodePassee","subtract","map","indexesCourants","e","diff","idIndexe","iEau","find","typeIndexe","iEnergie","component","placeholder","$emit","val","_m","props","type","String","default","mounted","console","log","JSON","parse","stringify"],"mappings":"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","file":"js/chunk-4b0dc9c8.730d0964.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Indexes.vue?vue&type=style&index=0&id=cee59f2e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"mb-2 clearfix\"},[_c('div',{staticClass:\"collapse d-md-block display-options\",attrs:{\"id\":\"displayOptions\"}},[_c('div',{staticClass:\"d-block d-md-inline-block\"},[_c('SearchForm',{model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('div',{staticClass:\"float-md-right\"},[_c('div',{staticClass:\"d-flex \"},[_c('b-form-select',{staticClass:\"form-control\",attrs:{\"size\":\"sm\",\"options\":_vm.mois},on:{\"input\":function (value) { return _vm.setIndexesMois(value, _vm.periode.annee); }},model:{value:(_vm.periode.mois),callback:function ($$v) {_vm.$set(_vm.periode, \"mois\", $$v)},expression:\"periode.mois\"}}),_c('b-form-select',{staticClass:\"form-control\",attrs:{\"size\":\"sm\",\"options\":_vm.annees},on:{\"input\":function (value) { return _vm.setIndexesMois(_vm.periode.mois, value); }},model:{value:(_vm.periode.annee),callback:function ($$v) {_vm.$set(_vm.periode, \"annee\", $$v)},expression:\"periode.annee\"}})],1)])])]),_c('div',{staticClass:\"separator mb-20\"}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[(!_vm.logements.length)?_c('b-alert',{staticClass:\"text-center\",attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('i',{staticClass:\"fa fa-exclamation-triangle fa-3x\"}),_vm._v(\" \"),_c('br'),_c('span',{staticClass:\"h4 d-inline-flex ml-2\"},[_vm._v(\"Vous n'avez enregistré aucun index pour le moment\")])]):_c('b-row',_vm._l((_vm.items),function(logement){return _c('b-col',{key:logement.idLogement,attrs:{\"cols\":\"3\"}},[_c('b-card',{attrs:{\"title\":logement.refLogement,\"sub-title\":logement.sousTypeLogement.libelleSousType}},[_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Indexe eau\"}},[_c('b-input-group',[_c('b-form-input',{attrs:{\"size\":\"sm\",\"type\":\"number\",\"min\":\"0\"},model:{value:(logement.indexeMois.eau),callback:function ($$v) {_vm.$set(logement.indexeMois, \"eau\", $$v)},expression:\"logement.indexeMois.eau\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-danger\",\"id\":'popover-eau-'+logement.idLogement}},[_c('i',{staticClass:\"fa fa-list\"})])],1)],1)],1),_c('b-form-group',{attrs:{\"label\":\"Indexe électricité\"}},[_c('b-input-group',[_c('b-form-input',{attrs:{\"type\":\"number\",\"min\":\"0\"},model:{value:(logement.indexeMois.energie),callback:function ($$v) {_vm.$set(logement.indexeMois, \"energie\", $$v)},expression:\"logement.indexeMois.energie\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"outline-danger\",\"id\":'popover-energie-'+logement.idLogement}},[_c('i',{staticClass:\"fa fa-list\"})])],1)],1)],1),_c('b-popover',{attrs:{\"title\":\"Indexes précedents\",\"target\":'popover-eau-'+logement.idLogement,\"triggers\":\"click blur\",\"placement\":\"auto\"}},[_c('div',{staticStyle:{\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\",\"max-height\":\"15em\"}},_vm._l((logement.iEau),function(indexe,i){return _c('div',{key:i,staticClass:\"text-muted mb-1\"},[_c('h6',{staticClass:\"border-bottom small\"},[_vm._v(_vm._s(_vm.$dayjs(indexe.periode).format('MMMM YYYY')))]),_c('b-row',[_c('b-col',{staticClass:\"truncate\"},[_vm._v(\"N: \"),_c('b',[_vm._v(_vm._s(indexe.nouveau))]),_vm._v(\" m\"),_c('sup',[_vm._v(\"3\")])]),_c('b-col',{staticClass:\"truncate\"},[_vm._v(\"A: \"),_c('b',[_vm._v(_vm._s(indexe.ancien))]),_vm._v(\" m\"),_c('sup',[_vm._v(\"3\")])])],1)],1)}),0),_c('div',{staticClass:\"jumbotron pt-10 pb-1 px-2 mb-0 mt-2\"},[_c('b-form-group',{attrs:{\"label\":'Mois passé ('+_vm.$dayjs(logement.indexePassee.periode).format('MMMM YYYY')+')'}},[_c('b-form-input',{attrs:{\"size\":\"sm\",\"min\":\"0\",\"type\":\"number\"},model:{value:(logement.indexePassee.eau),callback:function ($$v) {_vm.$set(logement.indexePassee, \"eau\", $$v)},expression:\"logement.indexePassee.eau\"}})],1)],1)]),_c('b-popover',{attrs:{\"title\":\"Indexes précedents\",\"target\":'popover-energie-'+logement.idLogement,\"triggers\":\"click blur\",\"placement\":\"auto\"}},[_c('div',{staticStyle:{\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\",\"max-height\":\"15em\"}},_vm._l((logement.iEnergie),function(indexe,i){return _c('div',{key:i,staticClass:\"text-muted mb-1\"},[_c('h6',{staticClass:\"border-bottom small\"},[_vm._v(_vm._s(_vm.$dayjs(indexe.periode).format('MMMM YYYY')))]),_c('b-row',[_c('b-col',{staticClass:\"truncate\"},[_vm._v(\"N: \"),_c('b',[_vm._v(_vm._s(indexe.nouveau))]),_vm._v(\" kw\")]),_c('b-col',{staticClass:\"truncate\"},[_vm._v(\"A: \"),_c('b',[_vm._v(_vm._s(indexe.ancien))]),_vm._v(\" kw\")])],1)],1)}),0),_c('div',{staticClass:\"jumbotron pt-10 pb-1 px-2 mb-0 mt-2\"},[_c('b-form-group',{attrs:{\"label\":'Mois passé ('+_vm.$dayjs(logement.indexePassee.periode).format('MMMM YYYY')+')'}},[_c('b-form-input',{attrs:{\"size\":\"sm\",\"min\":\"0\",\"type\":\"number\"},model:{value:(logement.indexePassee.energie),callback:function ($$v) {_vm.$set(logement.indexePassee, \"energie\", $$v)},expression:\"logement.indexePassee.energie\"}})],1)],1)])],1)],1)}),1),_c('hr'),_c('div',{staticClass:\"d-flex justify-content-between align-items-start\"},[_c('paginator',{attrs:{\"offset\":_vm.offset,\"total\":_vm.logements.length,\"limit\":_vm.perPage,\"page\":_vm.currentPage},on:{\"pageChanged\":function (page) {_vm.currentPage = page},\"limitChanged\":function (limit) {_vm.perPage = limit}}}),_c('b-button',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.left\",value:('Valider'),expression:\"'Valider'\",modifiers:{\"left\":true}}],staticClass:\"position-fixed validate btn-icon\",attrs:{\"variant\":\"danger\",\"disabled\":_vm.submitted},on:{\"click\":function($event){$event.preventDefault();return _vm.submitForm.apply(null, arguments)}}},[(_vm.submitted)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_c('i',{staticClass:\"fa fa-check fa-lg\"})],1)],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container-fluid\">\r\n    <!--page header start -->\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"mb-2 clearfix\">\r\n                    <div class=\"collapse d-md-block display-options\" id=\"displayOptions\">               \r\n                        <div class=\"d-block d-md-inline-block\">\r\n                            <SearchForm v-model=\"search\" />\r\n                        </div>\r\n                        <div class=\"float-md-right\">\r\n                            <div class=\"d-flex \">\r\n                                <b-form-select class=\"form-control\" size=\"sm\" @input=\"(value) => setIndexesMois(value, periode.annee)\" v-model=\"periode.mois\" :options=\"mois\"></b-form-select>\r\n                                <b-form-select class=\"form-control\" size=\"sm\" @input=\"(value) => setIndexesMois(periode.mois, value)\" v-model=\"periode.annee\" :options=\"annees\"></b-form-select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"separator mb-20\"></div>\r\n                <b-overlay :show=\"showOverlay\" rounded=\"sm\">\r\n                    <b-alert variant=\"info\" class=\"text-center\" show v-if=\"!logements.length\">\r\n                        <i class=\"fa fa-exclamation-triangle fa-3x\"></i> <br>\r\n                        <span class=\"h4 d-inline-flex ml-2\">Vous n'avez enregistré aucun index pour le moment</span>\r\n                    </b-alert> \r\n                    <b-row v-else>\r\n                        <b-col cols=\"3\" v-for=\"logement in items\" :key=\"logement.idLogement\"> \r\n                            <b-card :title=\"logement.refLogement\" :sub-title=\"logement.sousTypeLogement.libelleSousType\">\r\n                                <hr>\r\n                                <b-form-group label=\"Indexe eau\">\r\n                                    <b-input-group>\r\n                                        <b-form-input size=\"sm\" type=\"number\" min=\"0\" v-model=\"logement.indexeMois.eau\" />\r\n                                        <b-input-group-append>\r\n                                            <b-button size=\"sm\" variant=\"outline-danger\" :id=\"'popover-eau-'+logement.idLogement\"><i class=\"fa fa-list\"></i></b-button>\r\n                                        </b-input-group-append>\r\n                                    </b-input-group>\r\n                                </b-form-group>\r\n                                <b-form-group label=\"Indexe électricité\">\r\n                                    <b-input-group>\r\n                                        <b-form-input type=\"number\" min=\"0\" v-model=\"logement.indexeMois.energie\" />\r\n                                        <b-input-group-append>\r\n                                            <b-button variant=\"outline-danger\" :id=\"'popover-energie-'+logement.idLogement\"><i class=\"fa fa-list\"></i></b-button>\r\n                                        </b-input-group-append>\r\n                                    </b-input-group>\r\n                                </b-form-group>\r\n\r\n                                <b-popover title=\"Indexes précedents\" :target=\"'popover-eau-'+logement.idLogement\" triggers=\"click blur\" placement=\"auto\">\r\n                                    <div style=\"overflow-y:auto; overflow-x: hidden; max-height: 15em\">\r\n                                        <div v-for=\"(indexe, i) in logement.iEau\" :key=\"i\" class=\"text-muted mb-1\">\r\n                                            <h6 class=\"border-bottom small\">{{ $dayjs(indexe.periode).format('MMMM YYYY') }}</h6>\r\n                                            <b-row>\r\n                                                <b-col class=\"truncate\">N: <b>{{ indexe.nouveau }}</b> m<sup>3</sup></b-col>\r\n                                                <b-col class=\"truncate\">A: <b>{{ indexe.ancien }}</b> m<sup>3</sup></b-col>\r\n                                            </b-row>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"jumbotron pt-10 pb-1 px-2 mb-0 mt-2\">\r\n                                        <b-form-group :label=\"'Mois passé ('+$dayjs(logement.indexePassee.periode).format('MMMM YYYY')+')'\">\r\n                                            <b-form-input size=\"sm\" min=\"0\" type=\"number\" v-model=\"logement.indexePassee.eau\" />\r\n                                        </b-form-group>\r\n                                    </div>\r\n                                </b-popover>\r\n                                <b-popover title=\"Indexes précedents\" :target=\"'popover-energie-'+logement.idLogement\" triggers=\"click blur\" placement=\"auto\">\r\n                                    <div style=\"overflow-y:auto; overflow-x: hidden; max-height: 15em\">\r\n                                        <div v-for=\"(indexe, i) in logement.iEnergie\" :key=\"i\" class=\"text-muted mb-1\">\r\n                                            <h6 class=\"border-bottom small\">{{ $dayjs(indexe.periode).format('MMMM YYYY') }}</h6>\r\n                                            <b-row>\r\n                                                <b-col class=\"truncate\">N: <b>{{ indexe.nouveau }}</b> kw</b-col>\r\n                                                <b-col class=\"truncate\">A: <b>{{ indexe.ancien }}</b> kw</b-col>\r\n                                            </b-row>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"jumbotron pt-10 pb-1 px-2 mb-0 mt-2\">\r\n                                        <b-form-group :label=\"'Mois passé ('+$dayjs(logement.indexePassee.periode).format('MMMM YYYY')+')'\">\r\n                                            <b-form-input size=\"sm\" min=\"0\" type=\"number\" v-model=\"logement.indexePassee.energie\" />\r\n                                        </b-form-group>\r\n                                    </div>\r\n                                </b-popover>\r\n                            </b-card>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <hr>\r\n                    <div class=\"d-flex justify-content-between align-items-start\">\r\n                        <paginator :offset=\"offset\" :total=\"logements.length\" :limit=\"perPage\" :page=\"currentPage\" @pageChanged=\"(page) => {currentPage = page}\" @limitChanged=\"(limit) => {perPage = limit}\" /> \r\n                        <b-button class=\"position-fixed validate btn-icon\" variant=\"danger\" :disabled=\"submitted\" @click.prevent=\"submitForm\" v-b-tooltip.left=\"'Valider'\"><b-spinner small v-if=\"submitted\" /><i v-else class=\"fa fa-check fa-lg\"></i></b-button>\r\n                    </div>\r\n                </b-overlay>\r\n            </div>\r\n        </div>\r\n        \r\n  </div>\r\n</template>\r\n<script>\r\n    import SearchForm from \"@/components/parts/SearchForm.vue\";\r\n    const php  = require ( 'phpjs' ) ; \r\n\r\nexport default {\r\n  name: \"releves-indexes\",\r\n  components: {\r\n      SearchForm,\r\n  },\r\n  data: () => ({\r\n    search: null,\r\n    showOverlay: true,\r\n    submitted: false,\r\n    currentPage: 1,\r\n    perPage: 10,\r\n    logements:[],\r\n    trueLogements:[],\r\n\r\n    periode: {annee: null, mois: null}\r\n  }),\r\n    watch: {\r\n        search(value) {\r\n            this.logements = !php.empty(value) ? this.trueLogements.filter(elt => elt.refLogement.toLowerCase().includes(value.toLowerCase())) : this.trueLogements\r\n        }\r\n    },\r\n  computed: {\r\n        /**\r\n         * Elements affichés avec prise en charge de la pagination\r\n         */\r\n        items() { \r\n            return php.array_slice(this.logements, this.offset, this.perPage) \r\n        },\r\n        offset() {\r\n            return (this.currentPage * this.perPage) - this.perPage\r\n        },\r\n\r\n\r\n        annees() {\r\n            const current = this.$dayjs().format('YYYY')\r\n            let annees = [current]\r\n\r\n            for (let i = current; i > (current - 5); i--) {\r\n                if (i != current) {\r\n                    annees.push(i)\r\n                }\r\n            }\r\n            \r\n            return annees.sort((a, b) => a - b)\r\n        },\r\n        mois() {\r\n            const date = new Date, mois = [], \r\n                current = this.$dayjs().format('YYYY'),\r\n                limit = current == this.periode.annee ? date.getMonth() : 11\r\n            for (let i = 0; i <= limit; i++) {\r\n                date.setMonth(i)\r\n                mois.push({ value: i, text: php.ucfirst(this.$dayjs(date).format('MMMM')) })\r\n            }\r\n\r\n            return mois\r\n        }\r\n    },\r\n\r\n    beforeMount() {\r\n        this.periode = {\r\n            mois: parseInt(this.$dayjs().format('M')) - 1,\r\n            annee: parseInt(this.$dayjs().format('YYYY'))\r\n        }\r\n        this.getLogements()\r\n    },\r\n    methods: {\r\n        onClose() {\r\n            this.popoverShow = false\r\n        },\r\n\r\n        //recupération de la liste des logements\r\n        getLogements() {\r\n            axios.get('logements').then(response => response.result || []).then(logements => {\r\n                \r\n                this.logements = this.trueLogements = logements\r\n                \r\n                this.setIndexesMois(this.periode.mois, this.periode.annee)\r\n                this.showOverlay = false\r\n            })\r\n        },\r\n\r\n        submitForm() {\r\n            this.submitted = true \r\n\r\n            let periode = this.periode.mois + 1\r\n            if (periode < 10) {\r\n                periode = '0' + periode\r\n            }\r\n            periode = this.periode.annee + '-' + periode + '-01'\r\n            let data = { periode, indexes: [] }\r\n\r\n            this.trueLogements.forEach(elt => {\r\n                if (null != elt.indexeMois.eau || null != elt.indexeMois.energie) {\r\n                    data.indexes.push({\r\n                        idLogement: elt.idLogement,\r\n                        eau: [elt.indexeMois.eau, elt.indexePassee.eau],\r\n                        energie: [elt.indexeMois.energie, elt.indexePassee.energie]\r\n                    })\r\n                }\r\n            })\r\n\r\n            axios.post('indexes/add-multiple', data).then(response => {\r\n                App.notifySuccess(response.message)\r\n                this.showOverlay = true \r\n                this.submitted = false\r\n                this.getLogements()\r\n            }).catch(error => {\r\n                this.submitted = false\r\n                return App.alertError(error.message || 'Impossible de joindre le serveur')\r\n            })\r\n        },\r\n        \r\n        \r\n        setIndexesMois(mois, annee) {\r\n            let periodeCourante = mois + 1\r\n            if (periodeCourante < 10) {\r\n                periodeCourante = '0'+periodeCourante\r\n            }\r\n            periodeCourante = annee + '-' +  periodeCourante + '-01'\r\n\r\n            this.trueLogements = this.setIndexesPeriode(periodeCourante, this.trueLogements)\r\n            this.logements = this.setIndexesPeriode(periodeCourante, this.logements)\r\n        },\r\n        setIndexesPeriode(periode, logements) {\r\n            let periodePassee = this.$dayjs(periode).subtract(1, 'month').format('YYYY-MM')+'-01'\r\n\r\n            return logements.map(elt => {\r\n                let indexesCourants = elt.indexes.filter(e => this.$dayjs(periode).diff(e.periode, 'month') == 0).sort((a, b) => b.idIndexe - a.idIndexe),\r\n                    iEau = indexesCourants.find(e => e.typeIndexe == 'eau'),\r\n                    iEnergie = indexesCourants.find(e => e.typeIndexe == 'energie')\r\n                elt.indexeMois = {\r\n                    eau: php.empty(iEau) ? null : iEau.nouveau,\r\n                    energie: php.empty(iEnergie) ? null: iEnergie.nouveau\r\n                }\r\n\r\n                indexesCourants = elt.indexes.filter(e => this.$dayjs(periodePassee).diff(e.periode, 'month') == 0)\r\n                iEau = indexesCourants.find(e => e.typeIndexe == 'eau')\r\n                iEnergie = indexesCourants.find(e => e.typeIndexe == 'energie')\r\n                    \r\n                elt.indexePassee = {\r\n                    eau: php.empty(iEau) ? null : iEau.nouveau,\r\n                    energie: php.empty(iEnergie) ? null: iEnergie.nouveau,\r\n                    periode: periodePassee\r\n                }\r\n\r\n                indexesCourants = elt.indexes.filter(e => (this.$dayjs(periodePassee).diff(e.periode, 'month') > 0 && e.nouveau > 0))\r\n                elt.iEau = indexesCourants.filter(e => e.typeIndexe == 'eau')\r\n                elt.iEnergie = indexesCourants.filter(e => e.typeIndexe == 'energie')\r\n\r\n                return elt\r\n            })\r\n        }\r\n    }\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton.validate{\r\n    bottom: 1em;\r\n    right: 1em;\r\n    width: 3em;\r\n    height: 3em;\r\n    box-shadow: 3px 1px 1px gray;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Indexes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Indexes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Indexes.vue?vue&type=template&id=cee59f2e&scoped=true&\"\nimport script from \"./Indexes.vue?vue&type=script&lang=js&\"\nexport * from \"./Indexes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Indexes.vue?vue&type=style&index=0&id=cee59f2e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cee59f2e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\"},[_c('form',{attrs:{\"action\":\"\",\"onSubmit\":\"return false\"}},[_c('b-form-input',{staticStyle:{\"height\":\"40px\",\"width\":\"350px\",\"border-radius\":\"5px\"},attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder},on:{\"input\":function (data) { _vm.$emit('input', data) }},model:{value:(_vm.val),callback:function ($$v) {_vm.val=$$v},expression:\"val\"}}),_vm._m(0)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-icon\",staticStyle:{\"height\":\"40px\",\"width\":\"50px\"},attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"ik ik-search\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"search-sm d-inline-block float-md-left mr-1 mb-1 align-top\">\r\n        <form action=\"\" onSubmit=\"return false\">\r\n            <b-form-input type=\"text\" :placeholder=\"placeholder\" @input=\"(data) => { $emit('input', data) }\" style=\"height: 40px; width: 350px; border-radius: 5px;\" v-model=\"val\" />\r\n            <button type=\"submit\" class=\"btn btn-icon\" style=\"height: 40px; width:50px;\"><i class=\"ik ik-search\"></i></button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: \"SearchForm\",\r\n    props: {\r\n        placeholder: { type: String, default: \"Rechercher...\"},\r\n        value: { default: null, },\r\n    },\r\n    data: () => ({\r\n        val: null,\r\n    }),\r\n    mounted: () => {\r\n        console.log(\"ldldldld: \"+ \" this.value\")\r\n        console.log(JSON.parse(JSON.stringify(this.value)))\r\n        \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchForm.vue?vue&type=template&id=394c7419&scoped=true&\"\nimport script from \"./SearchForm.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"394c7419\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}