(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53da441c"],{1418:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"mb-2 clearfix"},[a("div",{staticClass:"collapse d-md-block display-options",attrs:{id:"displayOptions"}},[a("div",{staticClass:"d-block d-md-inline-block"},[a("SearchForm",{model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"float-md-right"},[a("btnAdd",{directives:[{name:"b-modal",rawName:"v-b-modal.habitantForm",modifiers:{habitantForm:!0}}],ref:"buttonAdd",attrs:{message:"Ajouter un habitant"}})],1)])]),a("div",{staticClass:"separator mb-20"}),a("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm"}},[t.habitants.length?a("b-row",t._l(t.habitants,(function(e){return a("b-col",{key:e.idLocataire,attrs:{xs:"12",sm:"6",md:"3"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"card-body pb-0"},[a("b-avatar",{attrs:{src:e.avatar,size:"8em"}})],1),a("div",{staticClass:"card-body mt-0 px-0"},[a("h4",{staticClass:"truncate card-title blue"},[t._v(t._s(e.nomLocataire+" "+e.prenomLocataire))]),a("h6",{staticClass:"truncate card-subtitle text-muted"},[t._v(t._s(e.tel))]),a("h6",{staticClass:"truncate small card-subtitle text-muted"},[t._v(t._s(e.profession))]),a("div",{staticClass:"mt-3 d-flex justify-content-center"},[a("b-button-group",[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Détails",expression:"'Détails'",modifiers:{top:!0}}],attrs:{size:"sm"},on:{click:function(a){return a.preventDefault(),t.showDetails(e)}}},[a("i",{staticClass:"ik f-16 ik-eye"})]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Modifier",expression:"'Modifier'",modifiers:{top:!0}}],attrs:{size:"sm"}},[a("i",{staticClass:"ik f-16 ik-edit"})]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Supprimer",expression:"'Supprimer'",modifiers:{top:!0}}],attrs:{size:"sm"}},[a("i",{staticClass:"ik f-16 ik-trash-2"})])],1)],1)])])])])})),1):a("b-alert",{staticClass:"text-center",attrs:{variant:"info",show:""}},[a("i",{staticClass:"fa fa-exclamation-triangle fa-3x"}),t._v(" "),a("br"),a("span",{staticClass:"h4 d-inline-flex ml-2"},[t._v("Aucun habitant crée pour l'instant")])]),a("paginator",{attrs:{hr:"top",offset:t.offset,total:t.habitants.length,limit:t.perPage,page:t.currentPage},on:{pageChanged:function(e){t.currentPage=e},limitChanged:function(e){t.perPage=e}}})],1)],1)]),t.locataire?a("div",{staticClass:"modal fade edit-layout-modal",attrs:{id:"editLayoutItem",tabindex:"-1",role:"dialog","aria-labelledby":"editLayoutItemLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"editLayoutItemLabel"}},[t._v("Dossier de "),a("b",[t._v(t._s(t.locataire.titre))]),t._v(" "),a("b",[t._v(t._s(t.locataire.nomLocataire))])]),t._m(0)]),a("div",{staticClass:"modal-body pt-2"},[a("details-habitant",{attrs:{locataire:t.locataire},on:{showDetail:t.showOccupation}})],1)])])]):t._e(),a("b-modal",{ref:"habitant-form",attrs:{id:"habitantForm",size:"lg",title:t.title,"ok-title":"Fermer","ok-only":"","ok-variant":"secondary","no-close-on-backdrop":"","hide-header-close":""}},[a("div",[a("habitant-form",{attrs:{action:t.action},on:{habitantAdded:t.addedHabitant}})],1)])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm"}},[a("form-wizard",{attrs:{title:"",subtitle:"",nextButtonText:"suivant",backButtonText:"Précedent",finishButtonText:"Enregistrer","aria-labelledby":"demoModalLabel",shape:"circle",color:"#e74c3c"},on:{"on-complete":t.onComplete,"on-loading":t.setLoading}},[a("tab-content",{attrs:{title:"Données personnelles",icon:"fa fa-user","before-change":t.validateAsync}},[a("b-row",[a("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.alreadyset,expression:"!alreadyset"}]},[a("b-form-group",{attrs:{label:"Veuillez choisir le mode de création"}},[a("b-form-select",{attrs:{options:t.modeCreations},on:{change:t.changeForm},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1),a("b-col",{directives:[{name:"show",rawName:"v-show",value:t.isCodeUtilisateur,expression:"isCodeUtilisateur"}]},[a("b-row",{staticClass:"mt-20"},[a("b-col",{attrs:{cols:"11",sm:"10"}},[a("b-form-input",{staticClass:"hightPadding",attrs:{id:"input-large",size:"lg",placeholder:"Ex: Veuillez entrer le code de l'utilisateur",trim:""},model:{value:t.habitant.code,callback:function(e){t.$set(t.habitant,"code",e)},expression:"habitant.code"}})],1),a("b-col",{attrs:{cols:"1"}},[a("b-button",{staticClass:"btn btn-icon btn-success mt-2",attrs:{id:"button-submit-habitant"},on:{click:function(e){return e.preventDefault(),t.getHabitantData.apply(null,arguments)}}},[a("i",{staticClass:"fa fa-paper-plane"})]),a("b-tooltip",{attrs:{target:"button-submit-habitant",noninteractive:"",variant:"success"}},[a("span",[t._v(" Envoyer")])])],1)],1)],1)],1),a("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[1==t.step?a("div",[a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Nom(s) *"}},[a("b-form-input",{attrs:{placeholder:"Ex: TAGNE SIPEUWO",trim:"",disabled:1==t.validated,type:"text"},model:{value:t.habitant.nom,callback:function(e){t.$set(t.habitant,"nom",e)},expression:"habitant.nom"}}),t.requiredNom?t._e():a("span",{staticStyle:{color:"red"}},[t._v("Nom Obligatoire")])],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Prénoms(s)"}},[a("b-form-input",{attrs:{placeholder:"Ex: Miguel Pedro",trim:"",disabled:1==t.validated},model:{value:t.habitant.prenom,callback:function(e){t.$set(t.habitant,"prenom",e)},expression:"habitant.prenom"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Date de Naissance"}},[a("date-picker",{staticClass:"w-100",attrs:{placeholder:"Selectionnez une date",format:"dddd, DD MMMM YYYY",valueType:"YYYY-MM-DD",clearable:!1},model:{value:t.habitant.dateNaiss,callback:function(e){t.$set(t.habitant,"dateNaiss",e)},expression:"habitant.dateNaiss"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Lieu de Naissance"}},[a("b-form-input",{attrs:{trim:""},model:{value:t.habitant.lieuNaiss,callback:function(e){t.$set(t.habitant,"lieuNaiss",e)},expression:"habitant.lieuNaiss"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Numéro de Téléphone *"}},[a("b-form-input",{attrs:{placeholder:"Ex: 699716645",trim:"",disabled:1==t.validated,type:"number"},model:{value:t.habitant.tel,callback:function(e){t.$set(t.habitant,"tel",e)},expression:"habitant.tel"}}),t.requiredTel?t._e():a("span",{staticStyle:{color:"red"}},[t._v("Numéro de Téléphone obligatoire")])],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Email"}},[a("b-form-input",{attrs:{placeholder:"Ex: tagnemiguel@gmail.com",trim:"",disabled:1==t.validated,type:"email"},model:{value:t.habitant.email,callback:function(e){t.$set(t.habitant,"email",e)},expression:"habitant.email"}})],1)],1)],1)],1):t._e()])],1),a("tab-content",{attrs:{title:"Photo de profil",icon:"fas fa-image","before-change":t.validateSecond}},[a("div",{staticClass:"text-center"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.habitant.avatar,width:"150"}}),a("h4",{staticClass:"card-title mt-10"},[t._v(t._s(t.habitant.nom))]),a("div",{staticClass:"imagesAnnonce border-dotted borderRadius"},[a("label",{staticClass:"mr-2",attrs:{for:"imagesAnnonce"}},[a("b",[t._v("Photo de profil ")])]),a("label",[a("b-img",{staticStyle:{width:"3em",height:"3em"},attrs:{src:"/img/camera.png"}}),a("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:".png, .jpg, .jpeg"},on:{change:t.onFileChange}})],1)])])]),a("tab-content",{attrs:{title:"Autres informations",icon:"fas fa-info-circle"}},[a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Titre honorifique"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.ariaDescribedby;return[a("b-form-radio-group",{attrs:{id:"radio-slots",options:t.options,"aria-describedby":i,name:"radio-options-slots"},model:{value:t.habitant.titre,callback:function(e){t.$set(t.habitant,"titre",e)},expression:"habitant.titre"}})]}}])})],1),a("b-col",[a("b-form-group",{attrs:{label:"Proféssion"}},[a("b-form-input",{attrs:{placeholder:"Ex: Développeur Informatique",trim:""},model:{value:t.habitant.profession,callback:function(e){t.$set(t.habitant,"profession",e)},expression:"habitant.profession"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Autre numéro de télephone"}},[a("b-form-input",{attrs:{placeholder:"Ex: 670142547",trim:"",type:"number"},model:{value:t.habitant.tel2,callback:function(e){t.$set(t.habitant,"tel2",e)},expression:"habitant.tel2"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Autre adresse mail"}},[a("b-form-input",{attrs:{placeholder:"Ex: pedrospi@yahoo.com",trim:"",type:"email"},model:{value:t.habitant.email2,callback:function(e){t.$set(t.habitant,"email2",e)},expression:"habitant.email2"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Numéro Pièce D'identité"}},[a("b-form-input",{attrs:{placeholder:"Ex: 114989895",trim:"",type:"number"},model:{value:t.habitant.cni,callback:function(e){t.$set(t.habitant,"cni",e)},expression:"habitant.cni"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Autre numéro de télephone"}},[a("b-form-input",{attrs:{placeholder:"Ex: 671202344",trim:"",type:"number"},model:{value:t.habitant.tel3,callback:function(e){t.$set(t.habitant,"tel3",e)},expression:"habitant.tel3"}})],1)],1)],1)],1),t.loadingWizard?a("div",{staticClass:"leloader"}):t._e()],1)],1)},r=[],n=a("2ee4"),l=(a("da93"),a("ec45")),c=(a("411c"),a("0edd"),a("2c43")),d={name:"add-habitant",data:()=>({validated:0,options:[{text:"Monsieur",value:"M"},{text:"Mme",value:"Mme"},{text:"Mademoiselle",value:"Mlle"}],time:"",showOverlay:!1,isCodeUtilisateur:!1,alreadyset:!1,habitant:{nom:"",prenom:"",dateNaiss:"",lieuNaiss:"",profession:"",cni:"",email:"",email2:"",tel:"",tel2:"",tel3:"",titre:"M",code:"",avatar:"http://localhost:8080/img/default.png"},step:0,showAddPicture:!1,selected:null,modeCreations:[{value:"2",text:"Utilisateur entidaté"},{value:"1",text:"Code Utilisateur"}],loadingWizard:!1,check:!0,check2:!0,requiredNom:!0,requiredTel:!0}),components:{FormWizard:n["FormWizard"],TabContent:n["TabContent"],DatePicker:l["default"]},props:["action"],methods:{photo_upload:function(t,e){console.log(t,e)},setLoading:function(t){this.loadingWizard=t},validateAsync:function(){return new Promise((t,e)=>{this.habitant.nom&&this.habitant.tel?(this.check=!0,this.alreadyset=!0):(this.habitant.nom?this.requiredNom=!0:this.requiredNom=!1,this.habitant.tel?this.requiredTel=!0:this.requiredTel=!1,this.check=!1),setTimeout(()=>{t(this.check)},1e3)})},validateSecond:function(){return new Promise((t,e)=>{this.habitant.tel?this.check2=!0:this.check2=!1,setTimeout(()=>{t(this.check2)},1e3)})},changeForm(){console.log("entrée ici");let t=this.selected;console.log("valeur sélectionnée",t),"1"===t&&(this.isCodeUtilisateur=!0,this.step=0),"2"===t&&(this.step=1,this.isCodeUtilisateur=!1)},resetModal(){this.habitant={nom:"",prenom:"",profession:"",cni:"",tel:"",email:"",email2:"",code:"",titre:"",dateNaiss:"",lieuNaiss:""},this.$refs["habitantModal"].hide(),setTimeout(()=>{this.$emit("closeModal")},500)},getHabitantData(){this.showOverlay=!0,axios.get("utilisateurs/"+this.habitant.code).then(t=>{t.success&&(this.habitant.avatar=t.result.avatar,this.habitant.nom=t.result.nom,this.habitant.prenom=t.result.prenom,this.habitant.tel=t.result.tel,this.habitant.dateNaiss=t.result.dateNaiss,this.habitant.email=t.result.email,this.habitant.isCertified=t.result.isCertified,this.step=1,this.validated=1,this.alreadyset=!0)}).catch(t=>(console.log("user inexistant"),App.alertError("Utilisateur Inexistant"))),this.showOverlay=!1},getBase64(t){return new Promise((e,a)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>e(i.result),i.onerror=t=>a(t)})},async onFileChange(t){const e=t.target.files[0];this.habitant.avatar=await this.getBase64(e),console.log("avatar",this.habitant.avatar)},onComplete(){this.showOverlay=!0;let t={nom:this.habitant.nom,prenom:this.habitant.prenom,cni:this.habitant.cni,tel:this.habitant.tel,tel2:this.habitant.tel2,tel3:this.habitant.tel3,email:this.habitant.email,email2:this.habitant.email2,profession:this.habitant.profession,titre:this.habitant.titre,dateNaiss:this.habitant.dateNaiss,lieuNaiss:this.habitant.lieuNaiss,code:this.habitant.code,avatar:this.habitant.avatar};axios.post("locataires",t).then(t=>{this.habitant.nom=null,this.habitant.prenom=null,this.habitant.dateNaiss=null,this.habitant.lieuNaiss=null,this.habitant.profession=null,this.habitant.dateNaiss=null,this.habitant.cni=null,this.habitant.email=null,this.habitant.email2=null,this.habitant.tel=null,this.habitant.tel2=null,this.habitant.titre="M",this.habitant.code=null,this.habitant.avatar="http://localhost:8080/img/default.png",this.habitant.titre="M",c["a"].success(t.message),this.$emit("habitantAdded",t.result)}).catch(t=>{c["a"].error(t.message),this.showOverlay=!1})}}},u=d,m=(a("cab1"),a("2877")),b=Object(m["a"])(u,o,r,!1,null,"8632b15a",null),h=b.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card-deck"},[a("div",{staticClass:"card mb-2"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"w-20"},[a("b-card",{staticClass:"mb-3",attrs:{"img-width":"200","img-height":"200","img-src":t.locataire.avatar,"img-alt":"Card image","img-left":""}})],1),a("div",{staticClass:"w-60 ml-4 globalcont2"},[a("dl",{staticClass:"row text-muted"},[t.locataire.cniLocataire?a("dd",{staticClass:"mt-1 mb-2 col-1"},[a("i",{staticClass:"fa fa-id-card"})]):t._e(),t.locataire.cniLocataire?a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Numéro de CNI",expression:"'Numéro de CNI'"}],staticClass:"mt-1 mb-2 col-11 truncate"},[t._v(t._s(t.locataire.cniLocataire))]):t._e(),t._m(0),a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Numéro de téléphone",expression:"'Numéro de téléphone'"}],staticClass:"mt-1 mb-2 col-11 truncate"},[t._v(t._s(t.locataire.tel))]),t._m(1),a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Email",expression:"'Email'"}],staticClass:"mt-1 mb-2 col-11 truncate"},[t._v(t._s(t.locataire.email))]),t.locataire.dateNaiss?a("dd",{staticClass:"mt-1 mb-2 col-1"},[a("i",{staticClass:"fas fa-birthday-cake"})]):t._e(),t.locataire.dateNaiss?a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Date de naissance",expression:"'Date de naissance'"}],staticClass:"mt-1 mb-2 col-11 truncate"},[t._v(t._s(t.$date(t.locataire.dateNaiss).format("DD MMMM YYYY")))]):t._e(),a("dd",{staticClass:"mt-1 mb-2 col-5"},[t._v("Impayés en loyer")]),a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Solde du compte principal",expression:"'Solde du compte principal'"}],staticClass:"mt-1 mb-2 col-3 truncate"},[t._v("198 000 F CFA")]),a("dd",{staticClass:"mt-1 mb-2 col-5"},[t._v("Impayés en eau ")]),a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Impayés en eau",expression:"'Impayés en eau'"}],staticClass:"mt-1 mb-2 col-3 truncate"},[t._v("36 000 F CFA")]),a("dd",{staticClass:"mt-1 mb-2 col-5"},[t._v("Impayés en électricité ")]),a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"impayés en électricité",expression:"'impayés en électricité'"}],staticClass:"mt-1 mb-2 col-3 truncate"},[t._v("70 0000 F CFA")]),a("dd",{staticClass:"mt-1 mb-2 col-5"},[t._v("Total des impayés")]),a("dt",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:"Total impayés",expression:"'Total impayés'"}],staticClass:"mt-1 mb-1 col-3 truncate"},[a("b-badge",{attrs:{variant:"danger"}},[t._v("304 000 F CFA")])],1)])])])]),a("b-modal",{ref:"modal-recharge",attrs:{"hide-footer":"",static:!0,id:"modal_recharge",title:"Recharger du compte de "+t.locataire.nomLocataire},on:{hidden:t.resetRechargeForm},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok;return[a("b-button",{attrs:{size:"sm",variant:"danger",disabled:t.recharge.submitted},on:{click:function(t){return i()}}},[t._v(" Valider "),t.recharge.submitted?a("b-spinner",{attrs:{small:""}}):t._e()],1)]}}]),model:{value:t.recharge.enabled,callback:function(e){t.$set(t.recharge,"enabled",e)},expression:"recharge.enabled"}},[a("b-form-group",{attrs:{description:"Entrez le montant de la recharge",label:"Montant à créditer"}},[a("b-form-input",{class:{"is-invalid":t.recharge.error},attrs:{type:"number",min:1e3},model:{value:t.recharge.montant,callback:function(e){t.$set(t.recharge,"montant",e)},expression:"recharge.montant"}})],1),a("b-form-checkbox",{attrs:{switch:""},model:{value:t.recharge.pay,callback:function(e){t.$set(t.recharge,"pay",e)},expression:"recharge.pay"}},[a("span",{staticClass:"fa-lg"},[t._v("Paiement automatique ?")])]),a("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[t.recharge.pay?a("b-form-group",{attrs:{label:"Occupation concernée"}},[a("v-select",{attrs:{options:t.locataire.occupations,label:"loyerBase"},scopedSlots:t._u([{key:"option",fn:function(e){var i=e.loyerBase,s=e.puEnergie,o=e.puEau;return[a("span",{staticClass:"text-muted"},[t._v("Loyer: "+t._s(i))]),a("br"),a("span",{staticClass:"text-muted"},[t._v("Energie: "+t._s(s))]),a("br"),a("span",{staticClass:"text-muted"},[t._v("Eau: "+t._s(o))]),a("hr",{staticClass:"m-0"})]}}],null,!1,3620839870),model:{value:t.idOccupation,callback:function(e){t.idOccupation=e},expression:"idOccupation"}})],1):t._e()],1),a("hr"),a("div",{staticClass:"float-right"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.validateRecharge.apply(null,arguments)}}},[t._v("Valider"),t.recharge.submitted?a("b-spinner",{attrs:{small:""}}):t._e()],1)],1)],1),a("b-modal",{ref:"modal-transfert",attrs:{"hide-footer":"",static:!0,id:"modal_transfert",title:"Transfert intercomptes"},on:{hidden:t.resetTransfertForm},model:{value:t.transfert.enabled,callback:function(e){t.$set(t.transfert,"enabled",e)},expression:"transfert.enabled"}},[a("b-row",[a("b-col",[a("div",{staticClass:"form-group"},[a("label",[t._v("compte débiteur")]),a("v-select",{class:t.requiredCompteDebiteur?"":"is-red",attrs:{label:"text",options:t.touslesComptes},on:{input:t.filterAccountList},model:{value:t.transfert.compteDebiteur,callback:function(e){t.$set(t.transfert,"compteDebiteur",e)},expression:"transfert.compteDebiteur"}}),t.requiredCompteCrediteur?t._e():a("span",{staticStyle:{color:"red"}},[t._v("Ce champ est obligatoire")])],1)]),a("b-col",[a("div",{staticClass:"form-group"},[a("label",[t._v("Compte crédité")]),a("v-select",{class:t.requiredCompteCrediteur?"":"is-red",attrs:{label:"text",options:t.comptesfiltres},model:{value:t.transfert.compteCredite,callback:function(e){t.$set(t.transfert,"compteCredite",e)},expression:"transfert.compteCredite"}}),t.requiredCompteCrediteur?t._e():a("span",{staticStyle:{color:"red"}},[t._v("Ce champ est obligatoire")])],1)])],1),a("b-form-group",{attrs:{description:"Entrez le montant à transférer",label:"Montant à transferer"}},[a("b-form-input",{class:{"is-invalid":t.transfert.error},attrs:{type:"number",min:1e3},model:{value:t.transfert.montant,callback:function(e){t.$set(t.transfert,"montant",e)},expression:"transfert.montant"}})],1),a("hr"),a("div",{staticClass:"float-right"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.validateTransfert.apply(null,arguments)}}},[t._v("Valider"),t.recharge.submitted?a("b-spinner",{attrs:{small:""}}):t._e()],1)],1)],1)],1)]),a("div",[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"occupations"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(e){e.preventDefault(),t.section="occupations"}}},[t._v("Occupations")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"charges"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(e){e.preventDefault(),t.section="charges"}}},[t._v("Charges")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"loyers"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(e){e.preventDefault(),t.section="loyers"}}},[t._v("Loyers")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"logements"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(e){e.preventDefault(),t.section="Logements"}}},[t._v("Logements")])]),0==t.itemsOccupations.length?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"add-occupation"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(e){e.preventDefault(),t.section="add-occupation"}}},[t._v("Ajouter une occupation")])]):t._e()]),a("div",{staticClass:"tab-content mt-3"},[a("div",{staticClass:"tab-pane fade show active"},["occupations"==t.section?a("b-container",{staticStyle:{height:"75vh","overflow-y":"auto","overflow-x":"hidden"},attrs:{fluid:""}},[t.locataire.occupations.length?a("b-row",[a("div",{staticClass:"card-body"},[a("b-table-simple",{attrs:{hover:"",small:"",responsive:""}},[a("b-thead",{attrs:{"head-variant":"light"}},[a("b-tr",[a("b-th",[t._v("N°")]),a("b-th",[t._v("Logement")]),a("b-th",[t._v("Facture Loyer")]),a("b-th",[t._v("Facture Eau")]),a("b-th",[t._v("Facture électricité")]),a("b-th",{staticClass:"d-flex justify-content-center align-items-center"},[t._v("Action")])],1)],1),a("b-tbody",t._l(t.itemsOccupations,(function(e){return a("b-tr",{key:e.idOccupation},[a("b-td",{staticClass:"p-2"},[t._v(t._s(e.idOccupation))]),a("b-td",{staticClass:"p-2"},["prepayer"==e.modePaiement?a("span",{staticClass:"d-inline-block w-100 mt-1 text-muted"},[t._v(" L-01 "),a("b-badge",{attrs:{pill:"",variant:"secondary"}},[t._v("Prépayé")])],1):t._e(),"postpayer"==e.modePaiement?a("span",{staticClass:"d-inline-block w-100 mt-1 text-muted"},[t._v(" L-01 "),a("b-badge",{attrs:{pill:"",variant:"danger"}},[t._v("Postpayé")])],1):t._e()]),a("b-td",{staticClass:"p-2"},[a("span",{staticClass:"d-inline-block w-100 mb-1 font-weight-bold"},[t._v(t._s(e.loyerBase))]),a("b-badge",{attrs:{variant:"success"}},[t._v("réglé")])],1),a("b-td",{staticClass:"p-2"},[a("span",{staticClass:"d-inline-block w-100 mb-1"},[a("span",{staticClass:"d-inline-block w-100 mb-1 font-weight-bold"},[t._v("2600")]),a("b-badge",{attrs:{variant:"danger"}},[t._v("Non réglé")])],1)]),a("b-td",{staticClass:"p-2"},[a("span",{staticClass:"d-inline-block w-100 mb-1"},[a("span",{staticClass:"d-inline-block w-100 mb-1 font-weight-bold"},[t._v("5000")]),a("b-badge",{attrs:{variant:"danger"}},[t._v("Non réglé")])],1)]),a("b-td",[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Accéder à l'occupation",expression:"'Accéder à l\\'occupation'",modifiers:{bottom:!0}}],attrs:{id:"accessOccupation",to:{name:"occupation",params:{id:e.idOccupation}}},on:{click:function(a){return a.preventDefault(),t.viewOccupationDetail(e)}}},[a("i",{staticClass:"fa fa-eye"})]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",value:"Payer",expression:"'Payer'",modifiers:{bottom:!0}}],staticClass:"ml-1",attrs:{id:"accessOccupation"},on:{click:function(a){return a.preventDefault(),t.viewOccupationDetail(e)}}},[a("i",{staticClass:"fab fa-amazon-pay"})])],1)],1)})),1)],1)],1)]):a("b-alert",{staticClass:"text-center",attrs:{variant:"info",show:""}},[a("i",{staticClass:"fa fa-exclamation-triangle fa-3x"}),t._v(" "),a("br"),a("span",{staticClass:"h4 d-inline-flex ml-2"},[t._v("Vous n'avez défini aucune occupation pour le moment")])]),a("paginator",{attrs:{hr:"top",offset:t.offset,total:t.itemsOccupations.length,limit:t.perPage,page:t.currentPage},on:{pageChanged:function(e){t.currentPage=e},limitChanged:function(e){t.perPage=e}}})],1):t._e(),"logements"==t.section?a("b-container",{attrs:{fluid:""}}):t._e(),"loyers"==t.section?a("b-container",{attrs:{fluid:""}}):t._e(),"charges"==t.section?a("div",{staticStyle:{height:"75vh","overflow-y":"auto","overflow-x":"hidden"}}):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"add-occupation"==t.section,expression:"section == 'add-occupation'"}]},[a("occupation-form",{attrs:{locataire:t.locataire,provenance:t.provenance,action:t.action},on:{occupationAdded:t.addedOccupation}})],1)],1)])])])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dd",{staticClass:"mt-1 mb-2 col-1"},[a("i",{staticClass:"fa fa-phone"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dd",{staticClass:"mt-1 mb-2 col-1"},[a("i",{staticClass:"fa fa-envelope"})])}],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"modal"},[a("div",{staticClass:"container"},[a("div",[t._v("Direction")]),a("p",[t._v("Get a direction with your favourite apps")]),t._m(0),t._m(1),a("button",{on:{click:function(e){return e.preventDefault(),t.close.apply(null,arguments)}}},[t._v("Close")])])])},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"btn gmaps",attrs:{href:"#"}},[a("img",{attrs:{src:"https://img.icons8.com/color/420/google-maps.png"}}),t._v(" Google Maps ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"#"}},[a("img",{attrs:{src:"https://img.icons8.com/color/420/waze.png"}}),t._v(" Waze ")])}],C={name:"Modal",props:{value:{required:!0}},methods:{close(){this.$emit("input",!this.value)}}},y=C,_=(a("7544"),Object(m["a"])(y,v,g,!1,null,"2cd95d92",null)),w=_.exports,x=a("278e");const k=a("5a6f");var N={components:{OccupationForm:x["a"],ModalRecharge:w},props:{locataire:{type:Object,required:!0}},data:()=>({action:0,section:"occupations",currentPage:1,perPage:10,occupations:[],setOccupation:!1,provenance:2,action:"add",recharge:{enabled:!1,submitted:!1,error:!1,montant:null,pay:!1},show:!1,modalClass:"",showModal:!0,idOccupation:"",transfert:{enabled:!1,submitted:!1,compteDebiteur:"",compteCredite:"",montant:null},touslesComptes:[{text:"loyer",value:"compteLoyer"},{text:"électricité",value:"compteEnergie"},{text:"eau",value:"compteEau"}],requiredCompteCrediteur:!0,requiredCompteDebiteur:!0}),computed:{itemsOccupations(){return k.array_slice(this.locataire.occupations||[],this.offset,this.perPage)},offset(){return this.currentPage*this.perPage-this.perPage},comptesfiltres(){return this.touslesComptes.map(t=>{t.value,this.transfert.compteDebiteur})}},mounted(){},methods:{addedOccupation(){axios.get(`locataires/${this.locataire.idLocataire}/occupations`).then(t=>t.result||[]).then(t=>{this.locataire.occupations=t,this.section="occupations"})},getOccupations(){axios.get("locataires/"+locataire.idLocataire+"/occupations").then(t=>{this.occupations=t.result})},viewOccupationDetail(t){this.$root.$emit("show-detail-occupation",t)},callRechargeForm(t){console.log("locataire 1",t),this.recharge.enabled=!0,this.locataire=t,this.$refs["modal-recharge"].show()},validateRecharge(t){t.preventDefault(),this.recharge.error=!1,k.empty(this.recharge.montant)||this.recharge.montant<1e3?this.recharge.error=!0:(this.recharge.submitted=!0,axios.post(`locataires/${this.locataire.idLocataire}/recharge`,this.recharge).then(t=>(this.getHousing(!1),this.resetRechargeForm(),App.notifySuccess(t.message))).catch(t=>(this.recharge.submitted=!1,App.alertError(t.message))))},resetRechargeForm(){this.recharge={enabled:!1,submitted:!1,error:!1,montant:null}},callTranfertForm(t){console.log("locataire 2",t),this.transfert.enabled=!0,this.locataire=t,this.$refs["modal-tranfert"].show()},filterAccountList(t){this.comptesfiltres=[];let e=this.touslesComptes,a=e.filter(t=>t.value!=this.transfert.compteDebiteur);this.comptesfiltres=a,console.log("sous-type",this.comptesfiltres)},validateTransfert(t){t.preventDefault(),this.transfert.error=!1,k.empty(this.transfert.montant)||k.empty(this.transfert.compteDebiteur)||k.empty(this.transfert.compteCredite)?this.transfert.error=!0:(this.transfert.submitted=!0,axios.post(`locataires/${this.locataire.idLocataire}/transfert`,this.transfert).then(t=>(this.resetTransfertForm(),App.notifySuccess(t.message))).catch(t=>(this.transfert.submitted=!1,App.alertError(t.message))))},resetTransfertForm(){this.transfert={enabled:!1,submitted:!1,error:!1,compteDebiteur:null,compteCredite:null,montant:null}}}},D=N,O=(a("bce6"),Object(m["a"])(D,p,f,!1,null,"f9d2da04",null)),P=O.exports,L=a("fb87");const E=a("5a6f");var A={name:"list-habitants",components:{HabitantForm:h,DetailsHabitant:P,SearchForm:L["a"]},data:()=>({action:"add",search:null,showOverlay:!0,currentPage:1,perPage:4,locataire:null,habitants:[],trueHabitants:[],title:"Ajouter un locataire"}),computed:{items(){return E.array_slice(this.habitants,this.offset,this.perPage)},offset(){return this.currentPage*this.perPage-this.perPage}},beforeMount(){this.getHabitants()},mounted(){this.$root.$on("show-detail-occupation",t=>{$("#editLayoutItem").modal("hide")})},methods:{addedHabitant(){this.getHabitants(),this.$bvModal.hide("habitantForm")},autoAddTarget(){const t=this.$route.query.formHabitant||null;t&&(this.$refs["habitant-form"].show(),window.history.replaceState({},"",window.location.href.split("?")[0]))},getHabitants(){axios.get("locataires").then(t=>t.result||[]).then(t=>{this.habitants=this.trueHabitants=t,this.autoAddTarget(),this.showOverlay=!1,this.autoDetailsTarget()})},updateHabitant(t){console.log("habitant",t)},removeHabitant(t){console.log("habitant",t)},showDetails(t){console.log("locataire",t," "),this.locataire=t,console.log("locataire",t," this.locataire",this.locataire),setTimeout(()=>{$("#editLayoutItem").modal("show"),$("#editLayoutItem").on("hide.bs.modal",t=>{this.locataire=null}),$("#editLayoutItem").on("hidden.bs.modal",t=>{this.locataire=null})},100)},showOccupation(){$("#editLayoutItem").modal("hide")},autoDetailsTarget(){const t=this.$route.query.target||null;if(t){const e=this.habitants.filter(e=>e.idLocataire==t)[0];e&&(this.showDetails(e),window.history.replaceState({},"",window.location.href.split("?")[0]))}}}},F=A,M=(a("d60b"),Object(m["a"])(F,i,s,!1,null,"0cadf038",null));e["default"]=M.exports},"24b9":function(t,e,a){},"2c43":function(t,e,a){"use strict";e["a"]={success:function(t,e){this.make(t,{type:"success",bgcolor:"#5bd747"},e)},error:function(t,e){this.make(t,{type:"error"},e)},make:function(t,e,a){notif(Object.assign({},{type:"info",msg:t,timeout:3e3,callback:a},e))}}},3266:function(t,e,a){},7544:function(t,e,a){"use strict";a("3266")},"8ac4":function(t,e,a){},aa1a:function(t,e,a){},bce6:function(t,e,a){"use strict";a("24b9")},cab1:function(t,e,a){"use strict";a("8ac4")},d60b:function(t,e,a){"use strict";a("aa1a")}}]);
//# sourceMappingURL=chunk-53da441c.2309e5f9.js.map