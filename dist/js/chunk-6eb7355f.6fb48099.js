(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eb7355f"],{"0882":function(t,e,a){"use strict";a("d0e0")},"7ade":function(t,e,a){t.exports=a.p+"img/contratDebail.9eed3615.jpg"},b15e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("page-description",{attrs:{title:"Modèle de contrats",description:"Gestion de  vos modèles contrat de baux ",icon:"file-signature",path:["Configuration et aide ","Mes Modèles de Contrats"]}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"mb-2 clearfix"},[a("div",{staticClass:"collapse d-md-block display-options",attrs:{id:"displayOptions"}},[a("div",{staticClass:"d-block d-md-inline-block"},[a("div",{staticClass:"search-sm d-inline-block float-md-left mr-1 mb-1 align-top"},[a("form",{attrs:{action:"",onSubmit:"return false"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recherche..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._m(0)])])]),a("div",{staticClass:"float-md-right"},[a("b-button",{attrs:{variant:"danger"},on:{click:function(e){return e.preventDefault(),function(){t.modal.action="add",t.$bvModal.show("contrat-modal"),t.getArticle()}.apply(null,arguments)}}},[a("i",{staticClass:"fa fa-plus-circle"}),t._v(" Nouveau Modèle")])],1)])]),a("div",{staticClass:"separator mb-20"}),a("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm"}},[t.contrats.length?a("b-row",{staticClass:"layout-wrap"},t._l(t.items,(function(e,s){return a("b-col",{key:e.idContrat||s,staticClass:"animated flipInX mb-4",attrs:{xl:"3",lg:"4",cols:"12",sm:"6"}},[a("app-contrat",{attrs:{contrat:e},on:{makeUpdate:t.updateArticle,showDetails:t.showDetails}})],1)})),1):a("b-alert",{staticClass:"text-center",attrs:{variant:"info",show:""}},[a("i",{staticClass:"fa fa-exclamation-triangle fa-3x"}),t._v(" "),a("br"),a("span",{staticClass:"h4 d-inline-flex ml-2"},[t._v("Aucun modèle de contrat trouvée")]),a("p",[t._v("Le contrat est définit usuellement comme un accord entre deux ou plusieurs volontés en vue de faire naître des effets de droit")])]),a("paginator",{attrs:{hr:"top",offset:t.offset,total:t.contrats.length,limit:t.perPage,page:t.currentPage},on:{pageChanged:function(e){t.currentPage=e},limitChanged:function(e){t.perPage=e}}})],1)],1)]),a("b-modal",{attrs:{"header-bg-variant":t.headerBgVariant,"hide-footer":"","header-text-variant":t.headerTextVariant,id:"contrat-modal",size:"xl",title:"Extra Large Modal"},scopedSlots:t._u([{key:"modal-title",fn:function(){return["add"==t.modal.action?a("span",[t._v("Ajouter un Modèle contrat")]):t._e(),"edit"==t.modal.action?a("span",[t._v("Edition d'un modèle de contrat")]):t._e()]},proxy:!0}])},[a("form-wizard",{on:{"on-complete":t.onComplete}},[a("tab-content",{attrs:{title:"Details Contrat"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"input-group input-group-warning"},[a("span",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text"},[a("i",{staticClass:"ik ik-file"})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelContrat.title,expression:"modelContrat.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"titre du contrat"},domProps:{value:t.modelContrat.title},on:{input:function(e){e.target.composing||t.$set(t.modelContrat,"title",e.target.value)}}})])]),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"input-group input-group-success"},[a("span",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text"},[a("i",{staticClass:"ik ik-shield"})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelContrat.libele,expression:"modelContrat.libele"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Libelle du contrat"},domProps:{value:t.modelContrat.libele},on:{input:function(e){e.target.composing||t.$set(t.modelContrat,"libele",e.target.value)}}})])])])]),a("tab-content",{attrs:{title:"Choisir les rubriques",icon:"fas fa-user"}},[a("div",{staticClass:"accordion",attrs:{role:"tablist"}},t._l(t.articles,(function(e){return a("b-card",{key:e.idArticle,staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],attrs:{block:"",variant:"info"}},[t._v(t._s(e.titreArticle))])],1),a("b-collapse",{attrs:{id:"accordion-1",visible:"",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("b-card-text",[a("div",{staticClass:"row layout-wrap",attrs:{id:"layout-wrap"}},t._l(e.Rubriques,(function(e){return a("div",{key:e.idRubrique,staticClass:"col-12 list-item"},[a("div",{staticClass:"card d-flex flex-row mb-3"},[a("a",{staticClass:"d-flex card-img",attrs:{href:"#editLayoutItem","data-toggle":"modal","data-target":"#editLayoutItem"}},[a("span",{staticClass:"badge badge-pill badge-primary position-absolute badge-top-left"},[t._v("New")]),a("span",{staticClass:"badge badge-pill badge-secondary position-absolute badge-top-left-2"},[t._v("Trending")])]),a("div",{staticClass:"d-flex flex-grow-1 min-width-zero card-content"},[a("div",{staticClass:"card-body align-self-center d-flex flex-column flex-md-row justify-content-between min-width-zero align-items-md-center"},[a("a",{staticClass:"list-item-heading mb-1 truncate w-180 w-xs-100",attrs:{href:"#editLayoutItem","data-toggle":"modal","data-target":"#editLayoutItem"}},[t._v(" "+t._s(e.descRubrique)+" ")]),a("div",{staticClass:"w-15 w-xs-100"},[1==e.value?a("span",{staticClass:"badge badge-pill badge-secondary"},[t._v("On Hold")]):t._e()])]),a("div",{staticClass:"list-actions"},[a("a",{attrs:{href:"#editLayoutItem","data-toggle":"modal","data-target":"#editLayoutItem"}},[a("i",{staticClass:"ik ik-eye"})]),1==e.value?a("a",{attrs:{href:"layout-edit-item.html"}},[a("i",{staticClass:"ik ik-edit-2"})]):t._e()]),a("div",{staticClass:"custom-control custom-checkbox pl-1 align-self-center"},[a("label",{staticClass:"custom-control custom-checkbox mb-0"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox"},on:{change:function(a){return t.Rubrique(e)}}}),a("span",{staticClass:"custom-control-label"})])])])])])})),0)])],1)],1)],1)})),1)]),a("tab-content",{attrs:{title:"Last step"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header text-center"},[a("h2",{staticClass:"d-block w-100"},[t._v(t._s(t.modelContrat.title))])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row invoice-info"},[a("div",{staticClass:"col-sm-12 invoice-col"},[t._v(" Entre "),a("address",[a("strong",[t._v("ThemeKit,")]),a("br"),t._v("795 Folsom Ave, Suite 546 "),a("br"),t._v("San Francisco, CA 54656 "),a("br"),t._v("Phone: (123) 123-4567"),a("br"),t._v("Email: info@themekit.com ")])]),a("div",{staticClass:"col-sm-12 invoice-col"},[t._v(" Et "),a("address",[a("strong",[t._v("John Doe")]),a("br"),t._v("795 Folsom Ave, Suite 600"),a("br"),t._v("San Francisco, CA 94107"),a("br"),t._v("Phone: (555) 123-7654"),a("br"),t._v("Email: john.doe@example.com ")])]),a("div",{staticClass:"col-sm-12 invoice-col"},[a("h3",[t._v("Il a été convenu ce qui suit:")]),a("br")])]),a("div",{staticClass:"row"},t._l(t.selectArcticle,(function(e){return a("div",{key:e.title,staticClass:"col-12"},[a("h5",[t._v(" "+t._s(e.title)+" ")]),t._l(e.rubriques,(function(e){return a("p",{key:e.idRubrique},[t._v(" "+t._s(e.descRubrique)+" ")])}))],2)})),0),a("div",{staticClass:"row no-print"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-primary pull-right",staticStyle:{"margin-right":"5px"},attrs:{type:"button"}},[a("i",{staticClass:"fa fa-download"}),t._v(" Generate PDF")])])])])])])],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-icon",attrs:{type:"submit"}},[a("i",{staticClass:"ik ik-search"})])}],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:" list-item list-item-grid"},[a("div",{staticClass:"owl-container"},[a("div",{staticClass:"owl-carousel basic"},[a("div",{staticClass:"card flex-row"},[t._m(0),a("div",{staticClass:"w-50"},[a("div",{staticClass:"card-body"},[a("h6",{staticClass:"mb-4"},[t._v(t._s(t.contrat.libelleModele))]),t._m(1)])]),a("div",{staticClass:"list-actions"},[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showDetails.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-eye"})]),a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("makeUpdate",t.article)}}},[a("i",{staticClass:"ik ik-edit-2"})]),a("a",{staticClass:"list-delete",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.remove.apply(null,arguments)}}},[a("i",{staticClass:"ik ik-trash-2"})])])])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-50 position-relative"},[s("img",{staticClass:"card-img-left",staticStyle:{width:"100%",display:"block"},attrs:{src:a("7ade"),alt:"Card image cap"}}),s("span",{staticClass:"badge badge-pill badge-primary position-absolute badge-top-left"},[t._v("New")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",[a("p",{staticClass:"text-muted text-small mb-0 font-weight-light"},[t._v("09.04.2018")])])}],o={props:{contrat:{type:Object,required:!0},isSub:{type:Boolean,default:!1}},computed:{dateCreation(){const t=this.$date(this.contrat.createdAt);return`Créée le ${t.format("dddd, DD MMMM YYYY")} à ${t.format("HH:mm")}`},isNew(){return dayjs().diff(this.contrat.createdAt,"hour")<=1}},methods:{showDetails(){if(this.isSub)return!1;this.$emit("showDetails",this.contrat),console.log(this.contrat)},remove(){App.confirm(`Voullez vous vraiment supprimer l'article " <b>${this.contrat.libelleModele}</b> " ?`,{confirm:()=>{axios.delete("articles/"+this.contrat.idModele).then(t=>t.success?(this.$emit("deleted",this.contrat.idModele),App.notifySuccess(t.message)):App.notifyError(t.message))}})}}},c=o,n=(a("0882"),a("2877")),d=Object(n["a"])(c,l,r,!1,null,null,null),u=d.exports;const m=a("5a6f");var p={name:"Contrats",components:{AppContrat:u},computed:{items(){return m.array_slice(this.contrats,this.offset,this.perPage)},offset(){return this.currentPage*this.perPage-this.perPage}},data:()=>({contrats:[],trueContrats:[],articles:[],selectArcticle:[],modelContrat:{title:"",libele:"",rubriques:[]},headerBgVariant:"dark",headerTextVariant:"light",showOverlay:!0,contrat:null,currentPage:1,itemTextShow:"",text:"lqdmfdqf",ListItem:[],perPage:10,search:null,modal:{action:"",nom:"",ref:"",idCite:""}}),watch:{search(t){m.empty(t)?this.contrats=this.trueContrats:this.contrats=this.trueContrats.filter(e=>e.nomCite.toLowerCase().includes(t.toLowerCase()))}},beforeMount(){this.getContrats()},methods:{getContrats(){axios.get("modeles-contrats").then(t=>t.result||[]).then(t=>{this.contrats=this.trueContrats=t,this.showOverlay=!1})},onComplete(){let t={libelle:this.modelContrat.libele,titre:this.modelContrat.title,rubriques:[]};this.selectArcticle.forEach(e=>{t.rubriques=m.array_merge(t.rubriques,e.rubriques.map(t=>t.idRubrique))}),console.log(t),axios.post("modeles-contrats",t).then(t=>{t.success&&this.getContrats()}).catch(t=>{console.log(t.response)})},Rubrique(t){console.log(t);let e=this.articles.filter(e=>e.idArticle===t.idArticle)[0];this.articleIsSelected(e.idArticle)?this.selectArcticle=this.selectArcticle.map(a=>(a.idArticle==e.idArticle&&a.rubriques.push(t),a)):this.selectArcticle.push({idArticle:e.idArticle,title:e.titreArticle,rubriques:[t]}),console.log(this.selectArcticle)},articleIsSelected(t){return this.selectArcticle.filter(e=>e.idArticle==t).length>0},showDetails(t){this.contrat=t,setTimeout(()=>{$("#editLayoutItem").modal("show"),$("#editLayoutItem").on("hide.bs.modal",t=>{this.contrat=null}),$("#editLayoutItem").on("hidden.bs.modal",t=>{this.contrat=null})},100)},async getArticle(){console.log("erreur"),await axios.get("articles").then(t=>t.result||[]).then(t=>{this.articles=t,console.log(t)})},setItems(t){this.ListItem=document.querySelectorAll(".items"),console.log(this.ListItem);for(let e=0;e<this.ListItem.length;e++)this.ListItem[e].classList.remove("active");this.ListItem[t].classList.add("active")},defaultBtnActive(){const t=document.querySelector("#default-btn");t.click()},updateArticle(t){this.modal={action:"edit",titreArticle:t.titreArticle,numArticle:t.numArticle,idCite:t.idArticle},this.$bvModal.show("modal-cite")}}},h=p,b=(a("da3b"),Object(n["a"])(h,s,i,!1,null,null,null));e["default"]=b.exports},cd0f:function(t,e,a){},d0e0:function(t,e,a){},da3b:function(t,e,a){"use strict";a("cd0f")}}]);
//# sourceMappingURL=chunk-6eb7355f.6fb48099.js.map