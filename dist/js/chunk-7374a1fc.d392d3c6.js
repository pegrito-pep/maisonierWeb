(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7374a1fc"],{"01a0":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[e("page-description",{attrs:{title:"Habitants",description:"Gestion de vos résidents",icon:"fas fa-users",path:["Patrimoine immobilier","Mes Habitants"]}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"mb-2 clearfix"},[e("div",{staticClass:"collapse d-md-block display-options",attrs:{id:"displayOptions"}},[e("div",{staticClass:"d-block d-md-inline-block"},[e("div",{staticClass:"search-sm d-inline-block float-md-left mr-1 mb-1 align-top"},[e("form",{attrs:{action:"",onSubmit:"return false"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recherche..."},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),t._m(0)])])]),e("div",{staticClass:"float-md-right"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-lg",modifiers:{"modal-lg":!0}}],attrs:{variant:"danger"},on:{click:function(a){return a.preventDefault(),t.addHabitant.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-plus-circle"}),t._v(" Créer un habitant")])],1)])]),e("div",{staticClass:"separator mb-20"}),e("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm"}},[t.habitants.length?e("b-row",{staticClass:"layout-wrap"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-bordered table-striped",attrs:{id:"sampleTable"}},[e("thead",[e("tr",[e("th",[t._v("id")]),e("th",[t._v("Avatar")]),e("th",[t._v("Nom")]),e("th",[t._v("E-Mail")]),e("th",[t._v("N° Téléphone")]),e("th",[t._v("Proféssion")]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.habitants,(function(a){return e("tr",{key:a.idLocataire},[e("td",[t._v(t._s(a.idLocataire))]),e("td",[e("b-avatar",{attrs:{src:a.avatar}})],1),e("td",[t._v(t._s(a.nomLocataire))]),e("td",[t._v(t._s(a.email))]),e("td",[t._v(t._s(a.tel))]),e("td",[t._v(t._s(a.profession))]),e("td",[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Modifier",expression:"'Modifier'",modifiers:{top:!0}}],attrs:{href:"#!"}},[e("i",{staticClass:"ik ik-edit f-16 mr-15 text-green"})]),e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Supprimer",expression:"'Supprimer'",modifiers:{top:!0}}],attrs:{href:"#!"}},[e("i",{staticClass:"ik ik-trash-2 f-16 mr-15 text-red"})]),e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.top",value:"Détails",expression:"'Détails'",modifiers:{top:!0}}],attrs:{href:"#!"},on:{click:function(a){return a.preventDefault(),t.showDetails.apply(null,arguments)}}},[e("i",{staticClass:"ik ik-eye f-16 text-blue"})])])])})),0)])])])]):e("b-alert",{staticClass:"text-center",attrs:{variant:"info",show:""}},[e("i",{staticClass:"fa fa-exclamation-triangle fa-3x"}),t._v(" "),e("br"),e("span",{staticClass:"h4 d-inline-flex ml-2"},[t._v("Aucun habitant crée pour l'instant")])]),e("paginator",{attrs:{hr:"top",offset:t.offset,total:t.habitants.length,limit:t.perPage,page:t.currentPage},on:{pageChanged:function(a){t.currentPage=a},limitChanged:function(a){t.perPage=a}}})],1)],1)]),t.habitant?e("div",{staticClass:"modal fade edit-layout-modal",attrs:{id:"editLayoutItem",tabindex:"-1",role:"dialog","aria-labelledby":"editLayoutItemLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"editLayoutItemLabel"}},[t._v("Détails de "),e("b",[t._v(t._s(t.habitant.titre))]),t._v(" "),e("b",[t._v(t._s(t.habitant.nomLocataire))])]),t._m(1)]),e("div",{staticClass:"modal-body pt-2"},[e("details-habitant",{attrs:{habitant:t.habitant}})],1)])])]):t._e(),t.commandeHabitant?e("add-habitant",{attrs:{action:t.action},on:{closeModal:t.onCloseSet}}):t._e()],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn btn-icon",attrs:{type:"submit"}},[e("i",{staticClass:"ik ik-search"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-modal",{ref:"habitant-modal",attrs:{id:"modal-lg",size:"lg",title:"Formulaire d'ajout d'un Locataire","ok-disabled":!0,"no-close-on-backdrop":"","hide-header-close":""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{size:"sm"},on:{click:t.resetModal}},[t._v(" Fermer ")])]},proxy:!0}])},[e("div",[e("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm"}},[e("form-wizard",{attrs:{title:"",subtitle:"",nextButtonText:"suivant",backButtonText:"Précedent",finishButtonText:"Enregistrer","aria-labelledby":"demoModalLabel",shape:"circle",color:"#e74c3c"},on:{"on-complete":t.onComplete,"on-loading":t.setLoading}},[e("tab-content",{attrs:{title:"Etat civil",icon:"fa fa-user","before-change":t.validateAsync}},[e("b-row",[e("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.alreadyset,expression:"!alreadyset"}]},[e("b-form-group",{attrs:{label:"Veuillez choisir le mode de création"}},[e("b-form-select",{attrs:{options:t.modeCreations},on:{change:t.changeForm},model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}})],1)],1),e("b-col",{directives:[{name:"show",rawName:"v-show",value:t.isCodeUtilisateur,expression:"isCodeUtilisateur"}]},[e("b-row",{staticClass:"mt-20"},[e("b-col",{attrs:{cols:"11",sm:"10"}},[e("b-form-input",{staticClass:"hightPadding",attrs:{id:"input-large",size:"lg",placeholder:"Ex: Veuillez entrer le code de l'utilisateur",trim:""},model:{value:t.habitant.code,callback:function(a){t.$set(t.habitant,"code",a)},expression:"habitant.code"}})],1),e("b-col",{attrs:{cols:"1"}},[e("button",{staticClass:"btn btn-icon btn-success mt-2",attrs:{id:"button-submit-habitant"},on:{click:function(a){return a.preventDefault(),t.getHabitantData.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-paper-plane"})]),e("b-tooltip",{attrs:{target:"button-submit-habitant",noninteractive:"",variant:"success"}},[e("span",[t._v(" Envoyer")])])],1)],1)],1)],1),e("transition",{attrs:{"enter-active-class":"animated zoomIn"}},[1==t.step?e("div",[e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Nom(s) *"}},[e("b-form-input",{attrs:{placeholder:"Ex: TAGNE SIPEUWO",trim:"",disabled:1==t.validated,type:"text"},model:{value:t.habitant.nom,callback:function(a){t.$set(t.habitant,"nom",a)},expression:"habitant.nom"}}),t.requiredNom?t._e():e("span",{staticStyle:{color:"red"}},[t._v("Nom Obligatoire")])],1)],1),e("b-col",[e("b-form-group",{attrs:{label:"Prénoms(s)"}},[e("b-form-input",{attrs:{placeholder:"Ex: Miguel Pedro",trim:"",disabled:1==t.validated},model:{value:t.habitant.prenom,callback:function(a){t.$set(t.habitant,"prenom",a)},expression:"habitant.prenom"}})],1)],1)],1),e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Date de Naissance"}},[e("date-picker",{staticClass:"w-100",attrs:{placeholder:"Selectionnez une date",format:"dddd, DD MMMM YYYY",valueType:"YYYY-MM-DD",clearable:!1},model:{value:t.habitant.dateNaiss,callback:function(a){t.$set(t.habitant,"dateNaiss",a)},expression:"habitant.dateNaiss"}})],1)],1),e("b-col",[e("b-form-group",{attrs:{label:"Lieu de Naissance"}},[e("b-form-input",{attrs:{trim:""},model:{value:t.habitant.lieuNaiss,callback:function(a){t.$set(t.habitant,"lieuNaiss",a)},expression:"habitant.lieuNaiss"}})],1)],1)],1),e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Numéro de Téléphone *"}},[e("b-form-input",{attrs:{placeholder:"Ex: 699716645",trim:"",disabled:1==t.validated,type:"number"},model:{value:t.habitant.tel,callback:function(a){t.$set(t.habitant,"tel",a)},expression:"habitant.tel"}}),t.requiredTel?t._e():e("span",{staticStyle:{color:"red"}},[t._v("Numéro de Téléphone obligatoire")])],1)],1),e("b-col",[e("b-form-group",{attrs:{label:"Email"}},[e("b-form-input",{attrs:{placeholder:"Ex: tagnemiguel@gmail.com",trim:"",disabled:1==t.validated,type:"email"},model:{value:t.habitant.email,callback:function(a){t.$set(t.habitant,"email",a)},expression:"habitant.email"}})],1)],1)],1)],1):t._e()])],1),e("tab-content",{attrs:{title:"Photo de profil",icon:"fas fa-image","before-change":t.validateSecond}},[e("div",{staticClass:"text-center"},[e("img",{staticClass:"rounded-circle",attrs:{src:t.habitant.avatar,width:"150"}}),e("h4",{staticClass:"card-title mt-10"},[t._v(t._s(t.habitant.nom))]),e("div",{staticClass:"imagesAnnonce border-dotted borderRadius"},[e("label",{staticClass:"mr-2",attrs:{for:"imagesAnnonce"}},[e("b",[t._v("Photo de profil ")])]),e("label",[e("b-img",{staticStyle:{width:"3em",height:"3em"},attrs:{src:"/img/camera.png"}}),e("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:".png, .jpg, .jpeg"},on:{change:t.onFileChange}})],1)])])]),e("tab-content",{attrs:{title:"Autres informations",icon:"fas fa-info-circle"}},[e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Titre honorifique"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.ariaDescribedby;return[e("b-form-radio-group",{attrs:{id:"radio-slots",options:t.options,"aria-describedby":i,name:"radio-options-slots"},model:{value:t.habitant.titre,callback:function(a){t.$set(t.habitant,"titre",a)},expression:"habitant.titre"}})]}}])})],1),e("b-col",[e("b-form-group",{attrs:{label:"Proféssion"}},[e("b-form-input",{attrs:{placeholder:"Ex: Développeur Informatique",trim:""},model:{value:t.habitant.profession,callback:function(a){t.$set(t.habitant,"profession",a)},expression:"habitant.profession"}})],1)],1)],1),e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Autre numéro de télephone"}},[e("b-form-input",{attrs:{placeholder:"Ex: 670142547",trim:"",type:"number"},model:{value:t.habitant.tel2,callback:function(a){t.$set(t.habitant,"tel2",a)},expression:"habitant.tel2"}})],1)],1),e("b-col",[e("b-form-group",{attrs:{label:"Autre adresse mail"}},[e("b-form-input",{attrs:{placeholder:"Ex: pedrospi@yahoo.com",trim:"",type:"email"},model:{value:t.habitant.email2,callback:function(a){t.$set(t.habitant,"email2",a)},expression:"habitant.email2"}})],1)],1)],1),e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Numéro Pièce D'identité"}},[e("b-form-input",{attrs:{placeholder:"Ex: 114989895",trim:"",type:"number"},model:{value:t.habitant.cni,callback:function(a){t.$set(t.habitant,"cni",a)},expression:"habitant.cni"}})],1)],1),e("b-col",[e("b-form-group",{attrs:{label:"Autre numéro de télephone"}},[e("b-form-input",{attrs:{placeholder:"Ex: 671202344",trim:"",type:"number"},model:{value:t.habitant.tel3,callback:function(a){t.$set(t.habitant,"tel3",a)},expression:"habitant.tel3"}})],1)],1)],1)],1),t.loadingWizard?e("div",{staticClass:"leloader"}):t._e()],1)],1)],1)])},o=[],l=e("2ee4"),r=(e("da93"),e("ec45")),c=(e("411c"),e("0edd"),e("2c43")),d={name:"add-habitant",data:()=>({validated:0,options:[{text:"Monsieur",value:"M"},{text:"Mme",value:"Mme"},{text:"Mademoiselle",value:"Mlle"}],time:"",showOverlay:!1,isCodeUtilisateur:!1,alreadyset:!1,habitant:{nom:"",prenom:"",dateNaiss:"",lieuNaiss:"",profession:"",cni:"",email:"",email2:"",tel:"",tel2:"",tel3:"",titre:"M",code:"",avatar:"http://localhost:8080/img/default.png"},step:0,showAddPicture:!1,selected:null,modeCreations:[{value:"2",text:"Utilisateur entidaté"},{value:"1",text:"Code Utilisateur"}],loadingWizard:!1,check:!0,check2:!0,requiredNom:!0,requiredTel:!0}),components:{FormWizard:l["FormWizard"],TabContent:l["TabContent"],DatePicker:r["default"]},props:["action"],methods:{photo_upload:function(t,a){console.log(t,a)},setLoading:function(t){this.loadingWizard=t},validateAsync:function(){return new Promise((t,a)=>{this.habitant.nom&&this.habitant.tel?(this.check=!0,this.alreadyset=!0):(this.habitant.nom?this.requiredNom=!0:this.requiredNom=!1,this.habitant.tel?this.requiredTel=!0:this.requiredTel=!1,this.check=!1),setTimeout(()=>{t(this.check)},1e3)})},validateSecond:function(){return new Promise((t,a)=>{this.habitant.tel?this.check2=!0:this.check2=!1,setTimeout(()=>{t(this.check2)},1e3)})},changeForm(){console.log("entrée ici");let t=this.selected;console.log("valeur sélectionnée",t),"1"===t&&(this.isCodeUtilisateur=!0,this.step=0),"2"===t&&(this.step=1,this.isCodeUtilisateur=!1)},resetModal(){this.habitant={nom:"",prenom:"",profession:"",cni:"",tel:"",email:"",email2:"",code:"",titre:"",dateNaiss:"",lieuNaiss:""},this.$refs["habitant-modal"].hide(),setTimeout(()=>{this.$emit("closeModal")},500)},getHabitantData(){this.showOverlay=!0,axios.get("utilisateurs/"+this.habitant.code).then(t=>{t.success?(this.habitant.avatar=t.result.avatar,this.habitant.nom=t.result.nom,this.habitant.prenom=t.result.prenom,this.habitant.tel=t.result.tel,this.habitant.dateNaiss=t.result.dateNaiss,this.habitant.email=t.result.email,this.habitant.isCertified=t.result.isCertified,this.step=1,this.validated=1,this.alreadyset=!0):(console.log("user inexistant"),App.confirm("Utilisateur Inexistant"))}),this.showOverlay=!1},getBase64(t){return new Promise((a,e)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>a(i.result),i.onerror=t=>e(t)})},async onFileChange(t){const a=t.target.files[0];this.habitant.avatar=await this.getBase64(a),console.log("avatar",this.habitant.avatar)},onComplete(){this.showOverlay=!0;let t={nom:this.habitant.nom,prenom:this.habitant.prenom,cni:this.habitant.cni,tel:this.habitant.tel,tel2:this.habitant.tel2,tel3:this.habitant.tel3,email:this.habitant.email,email2:this.habitant.email2,profession:this.habitant.profession,titre:this.habitant.titre,dateNaiss:this.habitant.dateNaiss,lieuNaiss:this.habitant.lieuNaiss,code:this.habitant.code,avatar:this.habitant.avatar};axios.post("locataires",t).then(t=>{this.habitant.nom=null,this.habitant.prenom=null,this.habitant.dateNaiss=null,this.habitant.lieuNaiss=null,this.habitant.profession=null,this.habitant.dateNaiss=null,this.habitant.cni=null,this.habitant.email=null,this.habitant.email2=null,this.habitant.tel=null,this.habitant.tel2=null,this.habitant.titre="M",this.habitant.code=null,this.habitant.avatar="http://localhost:8080/img/default.png",this.habitant.titre="M",c["a"].success(t.message),this.$root.$emit("new-habitant-added",t.result)}).catch(t=>{c["a"].error(t.message)}),setTimeout(()=>{this.$refs["habitant-modal"].hide(),this.showOverlay=!1},2e3)}}},h=d,b=(e("8625"),e("2877")),u=Object(b["a"])(h,n,o,!1,null,"f6360fa0",null),m=u.exports,p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"occupations"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(a){a.preventDefault(),t.section="occupations"}}},[t._v("Occupations")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"charges"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(a){a.preventDefault(),t.section="charges"}}},[t._v("Charges")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"loyers"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(a){a.preventDefault(),t.section="loyers"}}},[t._v("Loyers")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"logements"==t.section},attrs:{"data-toggle":"tab",href:"#"},on:{click:function(a){a.preventDefault(),t.section="Logements"}}},[t._v("Logements")])])]),e("div",{staticClass:"tab-content mt-3"},[e("div",{staticClass:"tab-pane fade show active"},["occupations"==t.section?e("b-container",{staticStyle:{height:"75vh","overflow-y":"auto","overflow-x":"hidden"},attrs:{fluid:""}},[t.occupations.length?e("div",{staticStyle:{height:"75vh"}},[e("paginator",{attrs:{"no-control":"",hr:"bottom",total:t.occupations.length,limit:t.perPage,page:t.currentPage},on:{pageChanged:function(a){t.currentPage=a},limitChanged:function(a){t.perPage=a}}}),e("div",{staticStyle:{height:"90%","overflow-y":"auto","overflow-x":"hidden"}},[e("b-row",{staticClass:"layout-wrap"},t._l(t.items,(function(a,i){return e("b-col",{key:a.idBatiment||i,attrs:{cols:"6"}},[e("batiment",{attrs:{batiment:a,"is-sub":""},on:{deleted:t.removeBatiment}})],1)})),1)],1)],1):e("b-alert",{attrs:{variant:"info",show:""}},[e("i",{staticClass:"fa fa-exclamation-triangle fa-3x float-left"}),e("span",{staticClass:"h4 d-inline-flex ml-2"},[t._v("Aucune Occupation affectée à ce résident pour le moment")]),e("b-button",{staticClass:"mt-1",attrs:{variant:"light"},on:{click:function(a){return a.preventDefault(),t.addOccupation.apply(null,arguments)}}},[t._v("Ajouter une occupation")])],1)],1):t._e(),"logements"==t.section?e("b-container",{attrs:{fluid:""}}):t._e(),"loyers"==t.section?e("b-container",{attrs:{fluid:""}}):t._e(),"charges"==t.section?e("div",{staticStyle:{height:"75vh","overflow-y":"auto","overflow-x":"hidden"}}):t._e()],1)])])},f=[],v={components:{},props:{habitant:{type:Object,required:!0}},data:()=>({section:"occupations",occupations:[],setOccupation:!1}),computed:{},mounted(){},methods:{addOccupation(){this.setOccupation=!0},getOccupations(){axios.get("locataires/"+habitant.idLocataire+"/occupations").then(t=>{this.occupations=t.result})}}},g=v,C=Object(b["a"])(g,p,f,!1,null,null,null),y=C.exports;const _=e("5a6f");var x={name:"list-habitants",components:{AddHabitant:m,DetailsHabitant:y},data:()=>({action:"add",commandeHabitant:!1,search:null,showOverlay:!0,currentPage:1,perPage:4,habitant:null,habitants:[],trueHabitants:[]}),computed:{items(){return _.array_slice(this.habitants,this.offset,this.perPage)},offset(){return this.currentPage*this.perPage-this.perPage}},beforeMount(){this.getHabitants()},mounted(){this.$root.$on("new-habitant-added",()=>{this.getHabitants(),this.commandeHabitant=!1})},methods:{sendData(){},onCloseSet(){this.commandeHabitant=!1},addHabitant(){this.action="add",this.commandeHabitant=!0},getHabitants(){axios.get("locataires").then(t=>t.result||[]).then(t=>{this.habitants=this.habitants=t,this.showOverlay=!1})},addHabitant(){this.commandeHabitant=!0},updateHabitant(t){console.log("habitant",t)},removeHabitant(t){console.log("habitant",t)},showDetails(t){this.habitant=t,setTimeout(()=>{$("#editLayoutItem").modal("show"),$("#editLayoutItem").on("hide.bs.modal",t=>{this.habitant=null}),$("#editLayoutItem").on("hidden.bs.modal",t=>{this.habitant=null})},100)}}},w=x,k=(e("d0ae"),Object(b["a"])(w,i,s,!1,null,"601f1a66",null));a["default"]=k.exports},"5faf":function(t,a,e){},8625:function(t,a,e){"use strict";e("5faf")},a1c0:function(t,a,e){},d0ae:function(t,a,e){"use strict";e("a1c0")}}]);
//# sourceMappingURL=chunk-7374a1fc.d392d3c6.js.map